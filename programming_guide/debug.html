

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Debugging &mdash; HIP  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Profiling HIP Code" href="profiling.html" />
    <link rel="prev" title="Known Bugs" href="known_bugs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> HIP
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Programming Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">HIP Installation Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="porting_from_cuda_to_hip.html">Porting a CUDA project to HIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiler_directives.html">Compiler Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiler_runtime.html">Compiler Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiler_linking.html">Compiler linking</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory_management.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="workarounds_and_tips.html">Workarounds and Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="known_bugs.html">Known Bugs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-hip-db">Using HIP_DB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-ltrace">Using ltrace</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chicken-bits">Chicken bits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-hip-applications">Debugging HIP Applications</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#print-env-var-state">Print env var state</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">Profiling HIP Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kernel_language/index.html">Kernel Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comparison.html">Comparison with CUDA and other compute APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../repository_information.html">Repository Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../depreciated.html">HIP Deprecated APIs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HIP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Programming Guide</a> &raquo;</li>
        
      <li>Debugging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/programming_guide/debug.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="using-hip-db">
<h2>Using HIP_DB<a class="headerlink" href="#using-hip-db" title="Permalink to this headline">¶</a></h2>
<p>This flag is primarily targeted to assist HIP development team in the
development of the HIP runtime, but in some situations may be useful to
HIP application developers as well. The HIP debug information is
designed to print important information during the execution of a HIP
API. HIP provides different color-coded levels of debug information:
- api : Print the beginning and end of each HIP API, including the
arguments and return codes. This is equivalent to setting
HIP_TRACE_API=1.
- sync : Print multi-thread and other synchronization
debug information.
- copy : Print which engine is doing the copy, which
copy flavor is selected, information on source and destination memory.
- mem : Print information about memory allocation - which pointers are
allocated, where they are allocated, peer mappings, and more.</p>
<div class="line-block">
<div class="line">HIP_DB format is flags separated by ‘+’ sign, or a hex code for the</div>
</div>
<p>bitmask. Generally the + format is preferred.
| For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ HIP_DB=api+copy+mem  my-application
$ HIP_DB=0xF  my-application
</pre></div>
</div>
</div>
<div class="section" id="using-ltrace">
<h2>Using ltrace<a class="headerlink" href="#using-ltrace" title="Permalink to this headline">¶</a></h2>
<p>ltrace is a standard linux tool which provides a message to stderr on
every dynamic library call. Since ROCr and the ROCt (the ROC thunk,
which is the thin user-space interface to the ROC kernel driver) are
both dynamic libraries, this provides an easy way to trace the activity
in these libraries. Tracing can be a powerful way to quickly observe the
flow of the application before diving into the details with a
command-line debugger. The trace can also show performance issues
related to accidental calls to expensive API calls on the critical path.</p>
<p>ltrace can be easily combined with the HIP_DB switches to visualize the
runtime behavior of the entire ROCm software stack. Here’s a sample
command-line and output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ HIP_DB=api ltrace -C -e &#39;hsa*&#39;   &lt;applicationName&gt; &lt;applicationArguments&gt;

...

&lt;&lt;hip-api tid:1.17 hipMemcpy (0x7f7776d3e010, 0x503d1d000, 4194304, hipMemcpyDeviceToHost)
libmcwamp_hsa.so-&gt;hsa_signal_store_relaxed(0x1804000, 0, 0, 0x400000) = 0
libmcwamp_hsa.so-&gt;hsa_signal_store_relaxed(0x1816000, 0, 0x7f777f85f2a0, 0x400000) = 0
libmcwamp_hsa.so-&gt;hsa_amd_memory_lock(0x7f7776d3e010, 0x400000, 0x1213b70, 1 &lt;unfinished ...&gt;
libhsa-runtime64.so.1-&gt;hsaKmtRegisterMemoryToNodes(0x7f7776d3e010, 0x400000, 1, 0x1220c10) = 0
libhsa-runtime64.so.1-&gt;hsaKmtMapMemoryToGPUNodes(0x7f7776d3e010, 0x400000, 0x7ffc32865400, 64) = 0
&lt;... hsa_amd_memory_lock resumed&gt; )              = 0
libmcwamp_hsa.so-&gt;hsa_signal_store_relaxed(0x1804000, 1, 0x7f777e95a770, 0x12205b0) = 0
libmcwamp_hsa.so-&gt;hsa_amd_memory_async_copy(0x50411d010, 0x11e70d0, 0x503d1d000, 0x11e70d0) = 0
libmcwamp_hsa.so-&gt;hsa_signal_wait_acquire(0x1804000, 2, 1, -1) = 0
libmcwamp_hsa.so-&gt;hsa_amd_memory_unlock(0x7f7776d3e010, 0x1213c6c, 0x12c3c600000000, 0x1804000 &lt;unfinished ...&gt;
libhsa-runtime64.so.1-&gt;hsaKmtUnmapMemoryToGPU(0x7f7776d3e010, 0x7f7776d3e010, 0x12c3c600000000, 0x1804000) = 0
libhsa-runtime64.so.1-&gt;hsaKmtDeregisterMemory(0x7f7776d3e010, 0x7f7776d3e010, 0x7f777f60f9e8, 0x1220580) = 0
&lt;... hsa_amd_memory_unlock resumed&gt; )            = 0
  hip-api tid:1.17 hipMemcpy                      ret= 0 (hipSuccess)&gt;&gt;
</pre></div>
</div>
<p>Some key information from the trace above. - Thy trace snippet shows the
execution of a hipMemcpy API, bracketed by the first and last message in
the trace output. The messages show the thread id and API sequence
number (<code class="docutils literal notranslate"><span class="pre">1.17</span></code>). ltrace output intermixes messages from all threads,
so the HIP debug information can be useful to determine which threads
are executing. - The code flows through HIP APIs into ROCr (HSA) APIs
(hsa*) and into the thunk (hsaKmt*) calls. - The HCC runtime is
“libmcwamp_hsa.so” and the HSA/ROCr runtime is “libhsa-runtime64.so”. -
In this particular case, the memory copy is for unpinned memory, and the
selected copy algorithm is to pin the host memory “in-place” before
performing the copy. The signaling APIs and calls to pin (“lock”,
“register”) the memory are readily apparent in the trace output.</p>
</div>
<div class="section" id="chicken-bits">
<h2>Chicken bits<a class="headerlink" href="#chicken-bits" title="Permalink to this headline">¶</a></h2>
<p>Chicken bits are environment variables which cause the HIP, HCC, or HSA
driver to disable some feature or optimization. These are not intended
for production but can be useful diagnose synchronization problems in
the application (or driver).</p>
<p>Some of the most useful chicken bits are described here. These bits are
supported on the ROCm path:</p>
<p>HIP provides 3 environment variables in the HIP_*_BLOCKING family.
These introduce additional synchronization and can be useful to isolate
synchronization problems. Specifically, if the code works with this flag
set, then it indicates the kernels are executing correctly, and any
failures likely are causes by improper or missing synchronization. These
flags will have performance impact and are not intended for production
use.</p>
<ul class="simple">
<li><p>HIP_LAUNCH_BLOCKING=1 : Waits on the host after each kernel launch.
Equivalent to setting CUDA_LAUNCH_BLOCKING.</p></li>
<li><p>HIP_LAUNCH_BLOCKING_KERNELS: A comma-separated list of kernel
names. The HIP runtime will wait on the host after one of the named
kernels executes. This provides a more targeted version of
HIP_LAUNCH_BLOCKING and may be useful to isolate exactly which
kernel needs further analysis if HIP_LAUNCH_BLOCKING=1 improves
functionality. There is no indication if kernel names are spelled
incorrectly. One mechanism to verify that the blocking is working is
to run with HIP_DB=api+sync and search for debug messages with
“LAUNCH_BLOCKING”.</p></li>
<li><p>HIP_API_BLOCKING : Forces hipMemcpyAsync and hipMemsetAsync to be
host-synchronous, meaning they will wait for the requested operation
to complete before returning to the caller.</p></li>
</ul>
<div class="line-block">
<div class="line">These options cause HCC to serialize. Useful if you have libraries or</div>
</div>
<p>code which is calling HCC kernels directly rather than using HIP.
| - HCC_SERIALIZE_KERNEL : 0x1=pre-serialize before each kernel
launch, 0x2=post-serialize after each kernel launch., 0x3= pre- and
post- serialize. - HCC_SERIALIZE_COPY : 0x1=pre-serialize before each
async copy, 0x2=post-serialize after each async copy., 0x3= pre- and
post- serialize.</p>
<ul class="simple">
<li><p>HSA_ENABLE_SDMA=0 : Causes host-to-device and device-to-host copies
to use compute shader blit kernels rather than the dedicated DMA copy
engines. Compute shader copies have low latency (typically &lt; 5us) and
can achieve approximately 80% of the bandwidth of the DMA copy
engine. This flag is useful to isolate issues with the hardware copy
engines.</p></li>
<li><p>HSA_ENABLE_INTERRUPT=0 : Causes completion signals to be detected
with memory-based polling rather than interrupts. Can be useful to
diagnose interrupt storm issues in the driver.</p></li>
<li><p>HSA_DISABLE_CACHE=1 : Disables the GPU L2 data cache.</p></li>
</ul>
</div>
<div class="section" id="debugging-hip-applications">
<h2>Debugging HIP Applications<a class="headerlink" href="#debugging-hip-applications" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The variable “tls_tidInfo” contains the API sequence number
(_apiSeqNum)- a monotonically increasing count of the HIP APIs
called from this thread. This can be useful for setting conditional
breakpoints. Also, each new HIP thread is mapped to monotically
increasing shortTid ID. Both of these fields are displayed in the HIP
debug info.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(gdb) p tls_tidInfo
$32 = {_shortTid = 1, _apiSeqNum = 803}
</pre></div>
</div>
</li>
<li><p>HCC tracks all of the application memory allocations, including those
from HIP and HC’s “am_alloc”. If the HCC runtime is built with debug
information (HCC_RUNTIME_DEBUG=ON when building HCC), then calling
the function ‘hc::am_memtracker_print()’ will show all memory
allocations. An optional argument specifies a void * targetPointer -
the print routine will mark the allocation which contains the
specified pointer with “–&gt;” in the printed output. This example
shows a sample GDB session where we print the memory allocated by
this process and mark a specified address by using the gdb “call”
function.. The gdb syntax also supports using the variable name (in
this case ‘dst’): ``` (gdb) p dst $33 = (void *) 0x5ec7e9000
(gdb) call hc::am_memtracker_print(dst) TargetAddress:0x5ec7e9000
0x504cfc000-0x504cfc00f:: allocSeqNum:1 hostPointer:0x504cfc000
devicePointer:0x504cfc000 sizeBytes:16 isInDeviceMem:0 isAmManaged:1
appId:0 appAllocFlags:0 appPtr:(nil) … –&gt;0x5ec7e9000-0x5f7e28fff::
allocSeqNum:488 hostPointer:(nil) devicePointer:0x5ec7e9000
sizeBytes:191102976 isInDeviceMem:1 isAmManaged:1 appId:0
appAllocFlags:0 appPtr:(nil)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">To</span> <span class="n">debug</span> <span class="n">an</span> <span class="n">explicit</span> <span class="n">address</span><span class="p">,</span> <span class="n">cast</span> <span class="n">the</span> <span class="n">address</span> <span class="n">to</span> <span class="p">(</span><span class="n">void</span><span class="o">*</span><span class="p">)</span> <span class="p">:</span>
</pre></div>
</div>
<p>(gdb) call hc::am_memtracker_print((void*)0x508c7f000)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Debugging</span> <span class="n">GPUVM</span> <span class="n">fault</span><span class="o">.</span>
<span class="n">For</span> <span class="n">example</span><span class="p">:</span>
</pre></div>
</div>
<p>Memory access fault by GPU node-1 on address 0x5924000. Reason: Page not
present or supervisor privilege.</p>
<div class="line-block">
<div class="line">Program received signal SIGABRT, Aborted. [Switching to Thread</div>
</div>
<p>0x7fffdffb5700 (LWP 14893)] 0x00007ffff2057c37 in <a href="#id1"><span class="problematic" id="id2">**</span></a>GI_raise
(<a class="reference external" href="mailto:sig=sig&#37;&#52;&#48;entry=6">sig=sig<span>&#64;</span>entry=6</a>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56 56
../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
(gdb) bt #0 0x00007ffff2057c37 in <a href="#id3"><span class="problematic" id="id4">**</span></a>GI_raise (<a class="reference external" href="mailto:sig=sig&#37;&#52;&#48;entry=6">sig=sig<span>&#64;</span>entry=6</a>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:56 #1 0x00007ffff205b028 in
<a href="#id5"><span class="problematic" id="id6">**</span></a>GI_abort () at abort.c:89 #2 0x00007ffff6f960eb in ?? () from
/opt/rocm/hsa/lib/libhsa-runtime64.so.1 #3 0x00007ffff6f99ea5 in ?? ()
from /opt/rocm/hsa/lib/libhsa-runtime64.so.1 #4 0x00007ffff6f78107 in ??
() from /opt/rocm/hsa/lib/libhsa-runtime64.so.1 #5 0x00007ffff744f184 in
start_thread (arg=0x7fffdffb5700) at pthread_create.c:312 #6
0x00007ffff211b37d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:111 (gdb) info threads Id
Target Id Frame 4 Thread 0x7fffdd521700 (LWP 14895) “caffe”
pthread_cond_wait&#64;&#64;GLIBC_2.3.2 () at
../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185 3
Thread 0x7fffddd22700 (LWP 14894) “caffe”
pthread_cond_wait&#64;&#64;GLIBC_2.3.2 () at
../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185 * 2
Thread 0x7fffdffb5700 (LWP 14893) “caffe” 0x00007ffff2057c37 in
<a href="#id7"><span class="problematic" id="id8">**</span></a>GI_raise (<a class="reference external" href="mailto:sig=sig&#37;&#52;&#48;entry=6">sig=sig<span>&#64;</span>entry=6</a>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:56 1 Thread 0x7ffff7fa6ac0 (LWP
14892) “caffe” 0x00007ffff6f934d5 in ?? () from
/opt/rocm/hsa/lib/libhsa-runtime64.so.1 (gdb) thread 1 [Switching to
thread 1 (Thread 0x7ffff7fa6ac0 (LWP 14892))] #0 0x00007ffff6f934d5 in
?? () from /opt/rocm/hsa/lib/libhsa-runtime64.so.1 (gdb) bt #0
0x00007ffff6f934d5 in ?? () from /opt/rocm/hsa/lib/libhsa-runtime64.so.1
#1 0x00007ffff6f929ba in ?? () from
/opt/rocm/hsa/lib/libhsa-runtime64.so.1 #2 0x00007fffe080beca in
HSADispatch::waitComplete() () from /opt/rocm/hcc/lib/libmcwamp_hsa.so
#3 0x00007fffe080415f in
HSADispatch::dispatchKernelAsync(Kalmar::HSAQueue<em>, void const</em>, int,
bool) () from /opt/rocm/hcc/lib/libmcwamp_hsa.so #4 0x00007fffe080238e
in
Kalmar::HSAQueue::dispatch_hsa_kernel(hsa_kernel_dispatch_packet_s
const<em>, void const</em>, unsigned long, hc::completion_future*) () from
/opt/rocm/hcc/lib/libmcwamp_hsa.so #5 0x00007ffff7bb7559 in
hipModuleLaunchKernel () from /opt/rocm/hip/lib/libhip_hcc.so #6
0x00007ffff2e6cd2c in mlopen::HIPOCKernel::run (this=0x7fffffffb5a8,
args=0x7fffffffb2a8, size=80) at
/root/MIOpen/src/hipoc/hipoc_kernel.cpp:15
| …</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### General Debugging Tips</span>
<span class="o">-</span> <span class="n">The</span> <span class="n">fault</span> <span class="n">will</span> <span class="n">be</span> <span class="n">caught</span> <span class="n">by</span> <span class="n">the</span> <span class="n">runtime</span> <span class="n">but</span> <span class="n">was</span> <span class="n">actually</span> <span class="n">generated</span> <span class="n">by</span> <span class="n">an</span> <span class="n">asynchronous</span> <span class="n">command</span> <span class="n">running</span> <span class="n">on</span> <span class="n">the</span> <span class="n">GPU</span><span class="o">.</span>    <span class="n">So</span><span class="p">,</span> <span class="n">the</span> <span class="n">GDB</span> <span class="n">backtrace</span> <span class="n">will</span> <span class="n">show</span> <span class="n">a</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">runtime</span><span class="p">,</span> <span class="n">ie</span> <span class="n">inside</span> <span class="s2">&quot;GI_Raise&quot;</span> <span class="k">as</span> <span class="n">shown</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">example</span> <span class="n">above</span><span class="o">.</span>
<span class="o">-</span> <span class="n">To</span> <span class="n">determine</span> <span class="n">the</span> <span class="n">true</span> <span class="n">location</span> <span class="n">of</span> <span class="n">the</span> <span class="n">fault</span><span class="p">,</span> <span class="n">force</span> <span class="n">the</span> <span class="n">kernels</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">synchronously</span> <span class="n">by</span> <span class="n">seeing</span> <span class="n">the</span> <span class="n">environment</span> <span class="n">variables</span> <span class="n">HCC_SERIALIZE_KERNEL</span><span class="o">=</span><span class="mi">3</span> <span class="n">HCC_SERIALIZE_COPY</span><span class="o">=</span><span class="mf">3.</span>  <span class="n">This</span> <span class="n">will</span> <span class="n">force</span> <span class="n">HCC</span> <span class="n">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">the</span> <span class="n">kernel</span> <span class="n">to</span> <span class="n">finish</span> <span class="n">executing</span> <span class="n">before</span> <span class="n">retuning</span><span class="o">.</span>  <span class="n">If</span> <span class="n">the</span> <span class="n">fault</span> <span class="n">occurs</span> <span class="n">during</span> <span class="n">the</span> <span class="n">execution</span> <span class="n">of</span> <span class="n">a</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">see</span> <span class="n">the</span> <span class="n">code</span> <span class="n">which</span> <span class="n">launched</span> <span class="n">the</span> <span class="n">kernel</span> <span class="n">inside</span> <span class="n">the</span> <span class="n">backtrace</span><span class="o">.</span>  <span class="n">A</span> <span class="n">bit</span> <span class="n">of</span> <span class="n">guesswork</span> <span class="ow">is</span> <span class="n">required</span> <span class="n">to</span> <span class="n">determine</span> <span class="n">which</span> <span class="n">thread</span> <span class="ow">is</span> <span class="n">actually</span> <span class="n">causing</span> <span class="n">the</span> <span class="n">issue</span> <span class="o">-</span> <span class="n">typically</span> <span class="n">it</span> <span class="n">will</span> <span class="n">the</span> <span class="n">thread</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">waiting</span> <span class="n">inside</span> <span class="n">the</span> <span class="n">libhsa</span><span class="o">-</span><span class="n">runtime64</span><span class="o">.</span><span class="n">so</span><span class="o">.</span>
<span class="o">-</span> <span class="n">VM</span> <span class="n">faults</span> <span class="n">inside</span> <span class="n">kernels</span> <span class="n">can</span> <span class="n">be</span> <span class="n">caused</span> <span class="n">byi</span><span class="p">:</span>
   <span class="o">-</span> <span class="n">incorrect</span> <span class="n">code</span> <span class="p">(</span><span class="n">ie</span> <span class="n">a</span> <span class="k">for</span> <span class="n">loop</span> <span class="n">which</span> <span class="n">extends</span> <span class="n">past</span> <span class="n">array</span> <span class="n">boundaries</span><span class="p">),</span> <span class="n">i</span>
   <span class="o">-</span> <span class="n">memory</span> <span class="n">issues</span>  <span class="o">-</span> <span class="n">kernel</span> <span class="n">arguments</span> <span class="n">which</span> <span class="n">are</span> <span class="n">invalid</span> <span class="p">(</span><span class="n">null</span> <span class="n">pointers</span><span class="p">,</span> <span class="n">unregistered</span> <span class="n">host</span> <span class="n">pointers</span><span class="p">,</span> <span class="n">bad</span> <span class="n">pointers</span><span class="p">)</span><span class="o">.</span>
   <span class="o">-</span> <span class="n">synchronization</span> <span class="n">issues</span>
   <span class="o">-</span> <span class="n">compiler</span> <span class="n">issues</span> <span class="p">(</span><span class="n">incorrect</span> <span class="n">code</span> <span class="n">generation</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">compiler</span><span class="p">)</span>
   <span class="o">-</span> <span class="n">runtime</span> <span class="n">issues</span>

<span class="o">--</span> <span class="n">General</span> <span class="n">debug</span> <span class="n">tips</span><span class="p">:</span>
<span class="o">-</span> <span class="s1">&#39;gdb --args&#39;</span> <span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="n">to</span> <span class="n">conviently</span> <span class="k">pass</span> <span class="n">the</span> <span class="n">executable</span> <span class="ow">and</span> <span class="n">arguments</span> <span class="n">to</span> <span class="n">gdb</span><span class="o">.</span>
<span class="o">-</span> <span class="n">From</span> <span class="n">inside</span> <span class="n">GDB</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="nb">set</span> <span class="n">environment</span> <span class="n">variables</span> <span class="s2">&quot;set env&quot;</span><span class="o">.</span>  <span class="n">Note</span> <span class="n">the</span> <span class="n">command</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">use</span> <span class="n">an</span> <span class="s1">&#39;=&#39;</span> <span class="n">sign</span><span class="p">:</span>
</pre></div>
</div>
<p>(gdb) set env HIP_DB 1 ```</p>
<div class="section" id="print-env-var-state">
<h3>Print env var state<a class="headerlink" href="#print-env-var-state" title="Permalink to this headline">¶</a></h3>
<p>Setting HIP_PRINT_ENV=1 and then running a HIP application will print
the HIP environment variables, their current values, and usage info.
Setting HCC_PRINT_ENV=1 and then running a HCC application will print
the HCC environment variables, their current values, and usage info.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="profiling.html" class="btn btn-neutral float-right" title="Profiling HIP Code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="known_bugs.html" class="btn btn-neutral float-left" title="Known Bugs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Open GPU Compute

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>