

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ROCm Libraries &mdash; HIP  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> HIP
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../programming_guide/index.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel_language/index.html">Kernel Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comparison.html">Comparison with CUDA and other compute APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../repository_information.html">Repository Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../depreciated.html">HIP Deprecated APIs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HIP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>ROCm Libraries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/ROCm_Libraries/ROCm_Libraries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rocm-libraries">
<span id="id1"></span><h1>ROCm Libraries<a class="headerlink" href="#rocm-libraries" title="Permalink to this headline">¶</a></h1>
<div class="section" id="rocblas">
<h2>rocBLAS<a class="headerlink" href="#rocblas" title="Permalink to this headline">¶</a></h2>
<p>Refer <a class="reference external" href="https://rocblas.readthedocs.io/en/latest/usermanual.html">rocBLAS User Guide</a> for the updated rocBLAS user manual.</p>
<p>A BLAS implementation on top of AMD’s Radeon Open Compute <a class="reference external" href="http://rocm-documentation.readthedocs.io/en/latest/Installation_Guide/Installation-Guide.html">ROCm</a> runtime and toolchains. rocBLAS is implemented in the <a class="reference external" href="http://rocm-documentation.readthedocs.io/en/latest/Programming_Guides/Programming-Guides.html#hip-programing-guide">HIP</a> programming language and optimized for AMD’s latest discrete GPUs.</p>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>A ROCm enabled platform, more information <a class="reference external" href="https://rocm.github.io/install.html">here</a>.</p></li>
<li><p>Base software stack, which includes
*  <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="installing-pre-built-packages">
<h3>Installing pre-built packages<a class="headerlink" href="#installing-pre-built-packages" title="Permalink to this headline">¶</a></h3>
<p>Download pre-built packages either from <a class="reference external" href="http://rocm-documentation.readthedocs.io/en/latest/Installation_Guide/Installation-Guide.html#installation-guide-ubuntu">ROCm’s package servers</a> or by clicking the github releases tab and manually downloading, which could be newer. Release notes are available for each release on the releases tab.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">rocblas</span>
</pre></div>
</div>
</div>
<div class="section" id="quickstart-rocblas-build">
<h3>Quickstart rocBLAS build<a class="headerlink" href="#quickstart-rocblas-build" title="Permalink to this headline">¶</a></h3>
<p><strong>Bash helper build script (Ubuntu only)</strong></p>
<p>The root of this repository has a helper bash script install.sh to build and install rocBLAS on Ubuntu with a single command. It does not take a lot of options and hard-codes configuration that can be specified through invoking cmake directly, but it’s a great way to get started quickly and can serve as an example of how to build/install. A few commands in the script need sudo access, so it may prompt you for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">install</span> <span class="o">-</span><span class="n">h</span> <span class="o">--</span> <span class="n">shows</span> <span class="n">help</span>
<span class="o">./</span><span class="n">install</span> <span class="o">-</span><span class="nb">id</span> <span class="o">--</span> <span class="n">build</span> <span class="n">library</span><span class="p">,</span> <span class="n">build</span> <span class="n">dependencies</span> <span class="ow">and</span> <span class="n">install</span> <span class="p">(</span><span class="o">-</span><span class="n">d</span> <span class="n">flag</span> <span class="n">only</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">passed</span> <span class="n">once</span> <span class="n">on</span> <span class="n">a</span> <span class="n">system</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="manual-build-all-supported-platforms">
<h3>Manual build (all supported platforms)<a class="headerlink" href="#manual-build-all-supported-platforms" title="Permalink to this headline">¶</a></h3>
<p>If you use a distro other than Ubuntu, or would like more control over the build process, the <span class="xref std std-ref">rocblaswiki</span> has helpful information on how to configure cmake and manually build.</p>
<p><strong>Functions supported</strong></p>
<p>A list of <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Tools/rocblaswiki.html#exported-functions">exported functions</a>. from rocblas can be found on the wiki.</p>
</div>
<div class="section" id="rocblas-interface-examples">
<h3>rocBLAS interface examples<a class="headerlink" href="#rocblas-interface-examples" title="Permalink to this headline">¶</a></h3>
<p>In general, the rocBLAS interface is compatible with CPU oriented <a class="reference external" href="http://www.netlib.org/blas/">Netlib BLAS</a> and the cuBLAS-v2 API, with the explicit exception that traditional BLAS interfaces do not accept handles. The cuBLAS’ cublasHandle_t is replaced with rocblas_handle everywhere. Thus, porting a CUDA application which originally calls the cuBLAS API to a HIP application calling rocBLAS API should be relatively straightforward. For example, the rocBLAS SGEMV interface is</p>
</div>
<div class="section" id="gemv-api">
<h3>GEMV API<a class="headerlink" href="#gemv-api" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rocblas_status</span>
<span class="n">rocblas_sgemv</span><span class="p">(</span><span class="n">rocblas_handle</span> <span class="n">handle</span><span class="p">,</span>
              <span class="n">rocblas_operation</span> <span class="n">trans</span><span class="p">,</span>
              <span class="n">rocblas_int</span> <span class="n">m</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">n</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">alpha</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">lda</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">incx</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">beta</span><span class="p">,</span>
              <span class="nb">float</span><span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">incy</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="batched-and-strided-gemm-api">
<h3>Batched and strided GEMM API<a class="headerlink" href="#batched-and-strided-gemm-api" title="Permalink to this headline">¶</a></h3>
<p>rocBLAS GEMM can process matrices in batches with regular strides. There are several permutations of these API’s, the following is an example that takes everything</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rocblas_status</span>
<span class="n">rocblas_sgemm_strided_batched</span><span class="p">(</span>
    <span class="n">rocblas_handle</span> <span class="n">handle</span><span class="p">,</span>
    <span class="n">rocblas_operation</span> <span class="n">transa</span><span class="p">,</span> <span class="n">rocblas_operation</span> <span class="n">transb</span><span class="p">,</span>
    <span class="n">rocblas_int</span> <span class="n">m</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">n</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">k</span><span class="p">,</span>
    <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">alpha</span><span class="p">,</span>
    <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">ls_a</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">ld_a</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">bs_a</span><span class="p">,</span>
    <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">B</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">ls_b</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">ld_b</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">bs_b</span><span class="p">,</span>
    <span class="n">const</span> <span class="nb">float</span><span class="o">*</span> <span class="n">beta</span><span class="p">,</span>
          <span class="nb">float</span><span class="o">*</span> <span class="n">C</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">ls_c</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">ld_c</span><span class="p">,</span> <span class="n">rocblas_int</span> <span class="n">bs_c</span><span class="p">,</span>
    <span class="n">rocblas_int</span> <span class="n">batch_count</span> <span class="p">)</span>
</pre></div>
</div>
<p>rocBLAS assumes matrices A and vectors x, y are allocated in GPU memory space filled with data. Users are responsible for copying data from/to the host and device memory. HIP provides memcpy style API’s to facilitate data management.</p>
</div>
<div class="section" id="asynchronous-api">
<h3>Asynchronous API<a class="headerlink" href="#asynchronous-api" title="Permalink to this headline">¶</a></h3>
<p>Except a few routines (like TRSM) having memory allocation inside preventing asynchronicity, most of the library routines (like BLAS-1 SCAL, BLAS-2 GEMV, BLAS-3 GEMM) are configured to operate in asynchronous fashion with respect to CPU, meaning these library functions return immediately.</p>
<p>For more information regarding rocBLAS library and corresponding API documentation, refer <a class="reference external" href="https://rocblas.readthedocs.io/en/latest/">rocBLAS</a></p>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>This section provides details of the library API</p>
<div class="section" id="types">
<h4>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h4>
<div class="section" id="definitions">
<h5>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-int">
<h6>rocblas_int<a class="headerlink" href="#rocblas-int" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-stride">
<h6>rocblas_stride<a class="headerlink" href="#rocblas-stride" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-half">
<h6>rocblas_half<a class="headerlink" href="#rocblas-half" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-handle">
<h6>rocblas_handle<a class="headerlink" href="#rocblas-handle" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="enums">
<h5>Enums<a class="headerlink" href="#enums" title="Permalink to this headline">¶</a></h5>
<p>Enumeration constants have numbering that is consistent with CBLAS, ACML and most standard C BLAS libraries.</p>
<div class="section" id="rocblas-operation">
<h6>rocblas_operation<a class="headerlink" href="#rocblas-operation" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-fill">
<h6>rocblas_fill<a class="headerlink" href="#rocblas-fill" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-diagonal">
<h6>rocblas_diagonal<a class="headerlink" href="#rocblas-diagonal" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-side">
<h6>rocblas_side<a class="headerlink" href="#rocblas-side" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-status">
<h6>rocblas_status<a class="headerlink" href="#rocblas-status" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-datatype">
<h6>rocblas_datatype<a class="headerlink" href="#rocblas-datatype" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-pointer-mode">
<h6>rocblas_pointer_mode<a class="headerlink" href="#rocblas-pointer-mode" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-layer-mode">
<h6>rocblas_layer_mode<a class="headerlink" href="#rocblas-layer-mode" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-gemm-algo">
<h6>rocblas_gemm_algo<a class="headerlink" href="#rocblas-gemm-algo" title="Permalink to this headline">¶</a></h6>
</div>
</div>
</div>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="level-1-blas">
<h5>Level 1 BLAS<a class="headerlink" href="#level-1-blas" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-type-scal">
<h6>rocblas_&lt;type&gt;scal()<a class="headerlink" href="#rocblas-type-scal" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-scal-batched">
<h6>rocblas_&lt;type&gt;scal_batched()<a class="headerlink" href="#rocblas-type-scal-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-scal-strided-batched">
<h6>rocblas_&lt;type&gt;scal_strided_batched()<a class="headerlink" href="#rocblas-type-scal-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-copy">
<h6>rocblas_&lt;type&gt;copy()<a class="headerlink" href="#rocblas-type-copy" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-copy-batched">
<h6>rocblas_&lt;type&gt;copy_batched()<a class="headerlink" href="#rocblas-type-copy-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-copy-strided-batched">
<h6>rocblas_&lt;type&gt;copy_strided_batched()<a class="headerlink" href="#rocblas-type-copy-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-dot">
<h6>rocblas_&lt;type&gt;dot()<a class="headerlink" href="#rocblas-type-dot" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-dot-batched">
<h6>rocblas_&lt;type&gt;dot_batched()<a class="headerlink" href="#rocblas-type-dot-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-dot-strided-batched">
<h6>rocblas_&lt;type&gt;dot_strided_batched()<a class="headerlink" href="#rocblas-type-dot-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-swap">
<h6>rocblas_&lt;type&gt;swap()<a class="headerlink" href="#rocblas-type-swap" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-swap-batched">
<h6>rocblas_&lt;type&gt;swap_batched()<a class="headerlink" href="#rocblas-type-swap-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-swap-strided-batched">
<h6>rocblas_&lt;type&gt;swap_strided_batched()<a class="headerlink" href="#rocblas-type-swap-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-axpy">
<h6>rocblas_&lt;type&gt;axpy()<a class="headerlink" href="#rocblas-type-axpy" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-asum">
<h6>rocblas_&lt;type&gt;asum()<a class="headerlink" href="#rocblas-type-asum" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-asum-batched">
<h6>rocblas_&lt;type&gt;asum_batched()<a class="headerlink" href="#rocblas-type-asum-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-asum-strided-batched">
<h6>rocblas_&lt;type&gt;asum_strided_batched()<a class="headerlink" href="#rocblas-type-asum-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-nrm2">
<h6>rocblas_&lt;type&gt;nrm2()<a class="headerlink" href="#rocblas-type-nrm2" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-nrm2-batched">
<h6>rocblas_&lt;type&gt;nrm2_batched()<a class="headerlink" href="#rocblas-type-nrm2-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-nrm2-strided-batched">
<h6>rocblas_&lt;type&gt;nrm2_strided_batched()<a class="headerlink" href="#rocblas-type-nrm2-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-i-type-amax">
<h6>rocblas_i&lt;type&gt;amax()<a class="headerlink" href="#rocblas-i-type-amax" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-i-type-amax-batched">
<h6>rocblas_i&lt;type&gt;amax_batched()<a class="headerlink" href="#rocblas-i-type-amax-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-i-type-amax-strided-batched">
<h6>rocblas_i&lt;type&gt;amax_strided_batched()<a class="headerlink" href="#rocblas-i-type-amax-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-i-type-amin">
<h6>rocblas_i&lt;type&gt;amin()<a class="headerlink" href="#rocblas-i-type-amin" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-i-type-amin-batched">
<h6>rocblas_i&lt;type&gt;amin_batched()<a class="headerlink" href="#rocblas-i-type-amin-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-i-type-amin-strided-batched">
<h6>rocblas_i&lt;type&gt;amin_strided_batched()<a class="headerlink" href="#rocblas-i-type-amin-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rot">
<h6>rocblas_&lt;type&gt;rot()<a class="headerlink" href="#rocblas-type-rot" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rot-batched">
<h6>rocblas_&lt;type&gt;rot_batched()<a class="headerlink" href="#rocblas-type-rot-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rot-strided-batched">
<h6>rocblas_&lt;type&gt;rot_strided_batched()<a class="headerlink" href="#rocblas-type-rot-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotg">
<h6>rocblas_&lt;type&gt;rotg()<a class="headerlink" href="#rocblas-type-rotg" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotg-batched">
<h6>rocblas_&lt;type&gt;rotg_batched()<a class="headerlink" href="#rocblas-type-rotg-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotg-strided-batched">
<h6>rocblas_&lt;type&gt;rotg_strided_batched()<a class="headerlink" href="#rocblas-type-rotg-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotm">
<h6>rocblas_&lt;type&gt;rotm()<a class="headerlink" href="#rocblas-type-rotm" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotm-batched">
<h6>rocblas_&lt;type&gt;rotm_batched()<a class="headerlink" href="#rocblas-type-rotm-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotm-strided-batched">
<h6>rocblas_&lt;type&gt;rotm_strided_batched()<a class="headerlink" href="#rocblas-type-rotm-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotmg">
<h6>rocblas_&lt;type&gt;rotmg()<a class="headerlink" href="#rocblas-type-rotmg" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotmg-batched">
<h6>rocblas_&lt;type&gt;rotmg_batched()<a class="headerlink" href="#rocblas-type-rotmg-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-rotmg-strided-batched">
<h6>rocblas_&lt;type&gt;rotmg_strided_batched()<a class="headerlink" href="#rocblas-type-rotmg-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="level-2-blas">
<h5>Level 2 BLAS<a class="headerlink" href="#level-2-blas" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-type-gemv">
<h6>rocblas_&lt;type&gt;gemv()<a class="headerlink" href="#rocblas-type-gemv" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-hemv">
<h6>rocblas_&lt;type&gt;hemv()<a class="headerlink" href="#rocblas-type-hemv" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-hemv-batched">
<h6>rocblas_&lt;type&gt;hemv_batched()<a class="headerlink" href="#rocblas-type-hemv-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-hemv-strided-batched">
<h6>rocblas_&lt;type&gt;hemv_strided_batched()<a class="headerlink" href="#rocblas-type-hemv-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-gemv-batched">
<h6>rocblas_&lt;type&gt;gemv_batched()<a class="headerlink" href="#rocblas-type-gemv-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-gemv-strided-batched">
<h6>rocblas_&lt;type&gt;gemv_strided_batched()<a class="headerlink" href="#rocblas-type-gemv-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trmv">
<h6>rocblas_&lt;type&gt;trmv()<a class="headerlink" href="#rocblas-type-trmv" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trmv-batched">
<h6>rocblas_&lt;type&gt;trmv_batched()<a class="headerlink" href="#rocblas-type-trmv-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trmv-strided-batched">
<h6>rocblas_&lt;type&gt;trmv_strided_batched()<a class="headerlink" href="#rocblas-type-trmv-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-tbmv">
<h6>rocblas_&lt;type&gt;tbmv()<a class="headerlink" href="#rocblas-type-tbmv" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-tbmv-batched">
<h6>rocblas_&lt;type&gt;tbmv_batched()<a class="headerlink" href="#rocblas-type-tbmv-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-tbmv-strided-batched">
<h6>rocblas_&lt;type&gt;tbmv_strided_batched()<a class="headerlink" href="#rocblas-type-tbmv-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trsv">
<h6>rocblas_&lt;type&gt;trsv()<a class="headerlink" href="#rocblas-type-trsv" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trsv-batched">
<h6>rocblas_&lt;type&gt;trsv_batched()<a class="headerlink" href="#rocblas-type-trsv-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trsv-strided-batched">
<h6>rocblas_&lt;type&gt;trsv_strided_batched()<a class="headerlink" href="#rocblas-type-trsv-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-ger">
<h6>rocblas_&lt;type&gt;ger()<a class="headerlink" href="#rocblas-type-ger" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-ger-batched">
<h6>rocblas_&lt;type&gt;ger_batched()<a class="headerlink" href="#rocblas-type-ger-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-ger-strided-batched">
<h6>rocblas_&lt;type&gt;ger_strided_batched()<a class="headerlink" href="#rocblas-type-ger-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-syr">
<h6>rocblas_&lt;type&gt;syr()<a class="headerlink" href="#rocblas-type-syr" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-syr-batched">
<h6>rocblas_&lt;type&gt;syr_batched()<a class="headerlink" href="#rocblas-type-syr-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-syr-strided-batched">
<h6>rocblas_&lt;type&gt;syr_strided_batched()<a class="headerlink" href="#rocblas-type-syr-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="level-3-blas">
<h5>Level 3 BLAS<a class="headerlink" href="#level-3-blas" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-type-trtri">
<h6>rocblas_&lt;type&gt;trtri()<a class="headerlink" href="#rocblas-type-trtri" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trtri-batched">
<h6>rocblas_&lt;type&gt;trtri_batched()<a class="headerlink" href="#rocblas-type-trtri-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trtri-strided-batched">
<h6>rocblas_&lt;type&gt;trtri_strided_batched()<a class="headerlink" href="#rocblas-type-trtri-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trsm">
<h6>rocblas_&lt;type&gt;trsm()<a class="headerlink" href="#rocblas-type-trsm" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trsm-batched">
<h6>rocblas_&lt;type&gt;trsm_batched()<a class="headerlink" href="#rocblas-type-trsm-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trsm-strided-batched">
<h6>rocblas_&lt;type&gt;trsm_strided_batched()<a class="headerlink" href="#rocblas-type-trsm-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-trmm">
<h6>rocblas_&lt;type&gt;trmm()<a class="headerlink" href="#rocblas-type-trmm" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-gemm">
<h6>rocblas_&lt;type&gt;gemm()<a class="headerlink" href="#rocblas-type-gemm" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-gemm-batched">
<h6>rocblas_&lt;type&gt;gemm_batched()<a class="headerlink" href="#rocblas-type-gemm-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-gemm-strided-batched">
<h6>rocblas_&lt;type&gt;gemm_strided_batched()<a class="headerlink" href="#rocblas-type-gemm-strided-batched" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-gemm-kernel-name">
<h6>rocblas_&lt;type&gt;gemm_kernel_name()<a class="headerlink" href="#rocblas-type-gemm-kernel-name" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-type-geam">
<h6>rocblas_&lt;type&gt;geam()<a class="headerlink" href="#rocblas-type-geam" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="blas-extensions">
<h5>BLAS Extensions<a class="headerlink" href="#blas-extensions" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-gemm-ex">
<h6>rocblas_gemm_ex()<a class="headerlink" href="#rocblas-gemm-ex" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-gemm-strided-batched-ex">
<h6>rocblas_gemm_strided_batched_ex()<a class="headerlink" href="#rocblas-gemm-strided-batched-ex" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-trsm-ex">
<h6>rocblas_trsm_ex()<a class="headerlink" href="#rocblas-trsm-ex" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-trsm-batched-ex">
<h6>rocblas_trsm_batched_ex()<a class="headerlink" href="#rocblas-trsm-batched-ex" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-trsm-strided-batched-ex">
<h6>rocblas_trsm_strided_batched_ex()<a class="headerlink" href="#rocblas-trsm-strided-batched-ex" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="build-information">
<h5>Build Information<a class="headerlink" href="#build-information" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-get-version-string">
<h6>rocblas_get_version_string()<a class="headerlink" href="#rocblas-get-version-string" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="auxiliary">
<h5>Auxiliary<a class="headerlink" href="#auxiliary" title="Permalink to this headline">¶</a></h5>
<div class="section" id="rocblas-pointer-to-mode">
<h6>rocblas_pointer_to_mode()<a class="headerlink" href="#rocblas-pointer-to-mode" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-create-handle">
<h6>rocblas_create_handle()<a class="headerlink" href="#rocblas-create-handle" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-destroy-handle">
<h6>rocblas_destroy_handle()<a class="headerlink" href="#rocblas-destroy-handle" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-add-stream">
<h6>rocblas_add_stream()<a class="headerlink" href="#rocblas-add-stream" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-set-stream">
<h6>rocblas_set_stream()<a class="headerlink" href="#rocblas-set-stream" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-get-stream">
<h6>rocblas_get_stream()<a class="headerlink" href="#rocblas-get-stream" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-set-pointer-mode">
<h6>rocblas_set_pointer_mode()<a class="headerlink" href="#rocblas-set-pointer-mode" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-get-pointer-mode">
<h6>rocblas_get_pointer_mode()<a class="headerlink" href="#rocblas-get-pointer-mode" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-set-vector">
<h6>rocblas_set_vector()<a class="headerlink" href="#rocblas-set-vector" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-set-vector-async">
<h6>rocblas_set_vector_async()<a class="headerlink" href="#rocblas-set-vector-async" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-get-vector">
<h6>rocblas_get_vector()<a class="headerlink" href="#rocblas-get-vector" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="ocblas-get-vector-async">
<h6>ocblas_get_vector_async()<a class="headerlink" href="#ocblas-get-vector-async" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-set-matrix">
<h6>rocblas_set_matrix()<a class="headerlink" href="#rocblas-set-matrix" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-get-matrix">
<h6>rocblas_get_matrix()<a class="headerlink" href="#rocblas-get-matrix" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-get-matrix-async">
<h6>rocblas_get_matrix_async()<a class="headerlink" href="#rocblas-get-matrix-async" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-start-device-memory-size-query">
<h6>rocblas_start_device_memory_size_query()<a class="headerlink" href="#rocblas-start-device-memory-size-query" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-stop-device-memory-size-query">
<h6>rocblas_stop_device_memory_size_query()<a class="headerlink" href="#rocblas-stop-device-memory-size-query" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-get-device-memory-size">
<h6>rocblas_get_device_memory_size()<a class="headerlink" href="#rocblas-get-device-memory-size" title="Permalink to this headline">¶</a></h6>
</div>
<div class="section" id="rocblas-set-device-memory-size">
<h6>rocblas_set_device_memory_size()<a class="headerlink" href="#rocblas-set-device-memory-size" title="Permalink to this headline">¶</a></h6>
</div>
</div>
<div class="section" id="rocblas-is-managing-device-memory">
<h5>rocblas_is_managing_device_memory()<a class="headerlink" href="#rocblas-is-managing-device-memory" title="Permalink to this headline">¶</a></h5>
</div>
</div>
</div>
<div class="section" id="all-api">
<h3>All API<a class="headerlink" href="#all-api" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="hipblas">
<h2>hipBLAS<a class="headerlink" href="#hipblas" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Please Refer here for Github link <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/hipBLAS">hipBLAS</a></p>
<p>hipBLAS is a BLAS marshalling library, with multiple supported backends. It sits between the application and a ‘worker’ BLAS library, marshalling inputs into the backend library and marshalling results back to the application. hipBLAS exports an interface that does not require the client to change, regardless of the chosen backend. Currently, hipBLAS supports <span class="xref std std-ref">rocblas</span> and <a class="reference external" href="https://developer.nvidia.com/cublas">cuBLAS</a> as backends.</p>
<div class="section" id="id5">
<h4>Installing pre-built packages<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>Download pre-built packages either from <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Installation_Guide/Installation-Guide.html#installing-from-amd-rocm-repositories">ROCm’s package servers</a> or by clicking the github releases tab and manually downloading, which could be newer. Release notes are available for each release on the releases tab.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">hipblas</span>
</pre></div>
</div>
</div>
<div class="section" id="quickstart-hipblas-build">
<h4>Quickstart hipBLAS build<a class="headerlink" href="#quickstart-hipblas-build" title="Permalink to this headline">¶</a></h4>
<p><strong>Bash helper build script (Ubuntu only)</strong></p>
<p>The root of this repository has a helper bash script install.sh to build and install hipBLAS on Ubuntu with a single command. It does not take a lot of options and hard-codes configuration that can be specified through invoking cmake directly, but it’s a great way to get started quickly and can serve as an example of how to build/install. A few commands in the script need sudo access, so it may prompt you for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">install</span> <span class="o">-</span><span class="n">h</span> <span class="o">--</span> <span class="n">shows</span> <span class="n">help</span>
<span class="o">./</span><span class="n">install</span> <span class="o">-</span><span class="nb">id</span> <span class="o">--</span> <span class="n">build</span> <span class="n">library</span><span class="p">,</span> <span class="n">build</span> <span class="n">dependencies</span> <span class="ow">and</span> <span class="n">install</span> <span class="p">(</span><span class="o">-</span><span class="n">d</span> <span class="n">flag</span> <span class="n">only</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">passed</span> <span class="n">once</span> <span class="n">on</span> <span class="n">a</span> <span class="n">system</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Manual build (all supported platforms)</strong></p>
<p>If you use a distro other than Ubuntu, or would like more control over the build process, the hipblas build has helpful information on how to configure cmake and manually build.</p>
</div>
</div>
<div class="section" id="build">
<h3>Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h3>
<div class="section" id="dependencies-for-building-library">
<h4>Dependencies For Building Library<a class="headerlink" href="#dependencies-for-building-library" title="Permalink to this headline">¶</a></h4>
<p><strong>CMake 3.5 or later</strong></p>
<p>The build infrastructure for hipBLAS is based on Cmake v3.5. This is the version of cmake available on ROCm supported platforms. If you are on a headless machine without the x-windows system, we recommend using <strong>ccmake</strong>; if you have access to X-windows, we recommend using <strong>cmake-gui</strong>.</p>
<p>Install one-liners cmake:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ubuntu</span><span class="p">:</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">cmake</span><span class="o">-</span><span class="n">qt</span><span class="o">-</span><span class="n">gui</span>
<span class="n">Fedora</span><span class="p">:</span> <span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">cmake</span><span class="o">-</span><span class="n">gui</span>
</pre></div>
</div>
</div>
<div class="section" id="build-library-using-script-ubuntu-only">
<h4>Build Library Using Script (Ubuntu only)<a class="headerlink" href="#build-library-using-script-ubuntu-only" title="Permalink to this headline">¶</a></h4>
<p>The root of this repository has a helper bash script <code class="docutils literal notranslate"><span class="pre">install.sh</span></code> to build and install hipBLAS on Ubuntu with a single command. It does not take a lot of options and hard-codes configuration that can be specified through invoking cmake directly, but it’s a great way to get started quickly and can serve as an example of how to build/install. A few commands in the script need sudo access, so it may prompt you for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">install</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">h</span> <span class="o">--</span> <span class="n">shows</span> <span class="n">help</span>
<span class="o">./</span><span class="n">install</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="nb">id</span> <span class="o">--</span> <span class="n">build</span> <span class="n">library</span><span class="p">,</span> <span class="n">build</span> <span class="n">dependencies</span> <span class="ow">and</span> <span class="n">install</span> <span class="p">(</span><span class="o">-</span><span class="n">d</span> <span class="n">flag</span> <span class="n">only</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">passed</span> <span class="n">once</span> <span class="n">on</span> <span class="n">a</span> <span class="n">system</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="build-library-using-individual-commands">
<h4>Build Library Using Individual Commands<a class="headerlink" href="#build-library-using-individual-commands" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -p [HIPBLAS_BUILD_DIR]/release
cd [HIPBLAS_BUILD_DIR]/release
# Default install location is in /opt/rocm, define -DCMAKE_INSTALL_PREFIX=&lt;path&gt; to specify other
# Default build config is &#39;Release&#39;, define -DCMAKE_BUILD_TYPE=&lt;config&gt; to specify other
CXX=/opt/rocm/bin/hcc ccmake [HIPBLAS_SOURCE]
make -j$(nproc)
sudo make install # sudo required if installing into system directory such as /opt/rocm
</pre></div>
</div>
</div>
<div class="section" id="build-library-tests-benchmarks-samples-using-individual-commands">
<h4>Build Library + Tests + Benchmarks + Samples Using Individual Commands<a class="headerlink" href="#build-library-tests-benchmarks-samples-using-individual-commands" title="Permalink to this headline">¶</a></h4>
<p>The repository contains source for clients that serve as samples, tests and benchmarks. Clients source can be found in the clients subdir.</p>
<p><strong>Dependencies (only necessary for hipBLAS clients)</strong></p>
<p>The hipBLAS samples have no external dependencies, but our unit test and benchmarking applications do. These clients introduce the following dependencies:</p>
<ol class="arabic simple">
<li><p>boost</p></li>
<li><dl class="simple">
<dt>lapack</dt><dd><ul class="simple">
<li><p>lapack itself brings a dependency on a fortran compiler</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>googletest</p></li>
</ol>
<p>Linux distros typically have an easy installation mechanism for boost through the native package manager.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ubuntu</span><span class="p">:</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libboost</span><span class="o">-</span><span class="n">program</span><span class="o">-</span><span class="n">options</span><span class="o">-</span><span class="n">dev</span>
<span class="n">Fedora</span><span class="p">:</span> <span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">boost</span><span class="o">-</span><span class="n">program</span><span class="o">-</span><span class="n">options</span>
</pre></div>
</div>
<p>Unfortunately, googletest and lapack are not as easy to install. Many distros do not provide a googletest package with pre-compiled libraries, and the lapack packages do not have the necessary cmake config files for cmake to configure linking the cblas library. hipBLAS provide a cmake script that builds the above dependencies from source. This is an optional step; users can provide their own builds of these dependencies and help cmake find them by setting the CMAKE_PREFIX_PATH definition. The following is a sequence of steps to build dependencies and install them to the cmake default /usr/local.</p>
<p><strong>(optional, one time only)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -p [HIPBLAS_BUILD_DIR]/release/deps
cd [HIPBLAS_BUILD_DIR]/release/deps
ccmake -DBUILD_BOOST=OFF [HIPBLAS_SOURCE]/deps   # assuming boost is installed through package manager as above
make -j$(nproc) install
</pre></div>
</div>
<p>Once dependencies are available on the system, it is possible to configure the clients to build. This requires a few extra cmake flags to the library cmake configure script. If the dependencies are not installed into system defaults (like /usr/local ), you should pass the CMAKE_PREFIX_PATH to cmake to help find them.</p>
<p><code class="docutils literal notranslate"><span class="pre">-DCMAKE_PREFIX_PATH=&quot;&lt;semicolon</span> <span class="pre">separated</span> <span class="pre">paths&gt;&quot;</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Default install location is in /opt/rocm, use -DCMAKE_INSTALL_PREFIX=&lt;path&gt; to specify other
CXX=/opt/rocm/bin/hcc ccmake -DBUILD_CLIENTS_TESTS=ON -DBUILD_CLIENTS_BENCHMARKS=ON [HIPBLAS_SOURCE]
make -j$(nproc)
sudo make install   # sudo required if installing into system directory such as /opt/rocm
</pre></div>
</div>
</div>
<div class="section" id="common-build-problems">
<h4>Common build problems<a class="headerlink" href="#common-build-problems" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p><strong>Issue:</strong> HIP (/opt/rocm/hip) was built using hcc 1.0.xxx-xxx-xxx-xxx, but you are using /opt/rocm/hcc/hcc with version 1.0.yyy-yyy-yyy-yyy from hipcc. (version does not match) . Please rebuild HIP including cmake or update HCC_HOME variable.</p></li>
</ul>
<p><strong>Solution:</strong> Download HIP from github and use hcc to build from source and then use the build HIP instead of /opt/rocm/hip one or singly overwrite the new build HIP to this location.</p>
<ul class="simple">
<li><p><strong>Issue:</strong> For Carrizo - HCC RUNTIME ERROR: Fail to find compatible kernel</p></li>
</ul>
<p><strong>Solution:</strong> Add the following to the cmake command when configuring: -DCMAKE_CXX_FLAGS=”–amdgpu-target=gfx801”</p>
<ul class="simple">
<li><p><strong>Issue:</strong> For MI25 (Vega10 Server) - HCC RUNTIME ERROR: Fail to find compatible kernel</p></li>
</ul>
<p><strong>Solution:</strong> export HCC_AMDGPU_TARGET=gfx900</p>
</div></blockquote>
</div>
</div>
<div class="section" id="running">
<h3>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h3>
<div class="section" id="notice">
<h4>Notice<a class="headerlink" href="#notice" title="Permalink to this headline">¶</a></h4>
<p>Before reading this Wiki, it is assumed hipBLAS with the client applications has been successfully built as described in <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#build">Build hipBLAS libraries and verification code</a></p>
<p><strong>Samples</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="p">[</span><span class="n">BUILD_DIR</span><span class="p">]</span><span class="o">/</span><span class="n">clients</span><span class="o">/</span><span class="n">staging</span>
<span class="o">./</span><span class="n">example</span><span class="o">-</span><span class="n">sscal</span>
</pre></div>
</div>
<p>Example code that calls hipBLAS you can also see the following blog on the right side Example C code calling hipBLAS routine.</p>
<p><strong>Unit tests</strong></p>
<p>Run tests with the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="p">[</span><span class="n">BUILD_DIR</span><span class="p">]</span><span class="o">/</span><span class="n">clients</span><span class="o">/</span><span class="n">staging</span>
<span class="o">./</span><span class="n">hipblas</span><span class="o">-</span><span class="n">test</span>
</pre></div>
</div>
<p>To run specific tests, use –gtest_filter=match where match is a ‘:’-separated list of wildcard patterns (called the positive patterns) optionally followed by a ‘-‘ and another ‘:’-separated pattern list (called the negative patterns). For example, run gemv tests with the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="p">[</span><span class="n">BUILD_DIR</span><span class="p">]</span><span class="o">/</span><span class="n">clients</span><span class="o">/</span><span class="n">staging</span>
<span class="o">./</span><span class="n">hipblas</span><span class="o">-</span><span class="n">test</span> <span class="o">--</span><span class="n">gtest_filter</span><span class="o">=*</span><span class="n">gemv</span><span class="o">*</span>
</pre></div>
</div>
<p><strong>Functions supported</strong></p>
<p>A list of <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/hipBLAS/wiki/Exported-functions">exported functions</a> from hipblas can be found on the wiki</p>
<p><strong>Platform: rocBLAS or cuBLAS</strong></p>
<p>hipBLAS is a marshalling library, so it runs with either rocBLAS or cuBLAS configured as the backend BLAS library, chosen at cmake configure time.</p>
</div>
<div class="section" id="hipblas-interface-examples">
<h4>hipBLAS interface examples<a class="headerlink" href="#hipblas-interface-examples" title="Permalink to this headline">¶</a></h4>
<p>The hipBLAS interface is compatible with rocBLAS and cuBLAS-v2 APIs. Porting a CUDA application which originally calls the cuBLAS API to an application calling hipBLAS API should be relatively straightforward. For example, the hipBLAS SGEMV interface is</p>
</div>
<div class="section" id="id8">
<h4>GEMV API<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hipblasStatus_t</span>
<span class="n">hipblasSgemv</span><span class="p">(</span> <span class="n">hipblasHandle_t</span> <span class="n">handle</span><span class="p">,</span>
             <span class="n">hipblasOperation_t</span> <span class="n">trans</span><span class="p">,</span>
             <span class="nb">int</span> <span class="n">m</span><span class="p">,</span> <span class="nb">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">alpha</span><span class="p">,</span>
             <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="nb">int</span> <span class="n">lda</span><span class="p">,</span>
             <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span> <span class="n">incx</span><span class="p">,</span> <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">beta</span><span class="p">,</span>
             <span class="nb">float</span> <span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="nb">int</span> <span class="n">incy</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h4>Batched and strided GEMM API<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>hipBLAS GEMM can process matrices in batches with regular strides. There are several permutations of these API’s, the following is an example that takes everything</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hipblasStatus_t</span>
<span class="n">hipblasSgemmStridedBatched</span><span class="p">(</span> <span class="n">hipblasHandle_t</span> <span class="n">handle</span><span class="p">,</span>
             <span class="n">hipblasOperation_t</span> <span class="n">transa</span><span class="p">,</span> <span class="n">hipblasOperation_t</span> <span class="n">transb</span><span class="p">,</span>
             <span class="nb">int</span> <span class="n">m</span><span class="p">,</span> <span class="nb">int</span> <span class="n">n</span><span class="p">,</span> <span class="nb">int</span> <span class="n">k</span><span class="p">,</span> <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">alpha</span><span class="p">,</span>
             <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="nb">int</span> <span class="n">lda</span><span class="p">,</span> <span class="n">long</span> <span class="n">long</span> <span class="n">bsa</span><span class="p">,</span>
             <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">B</span><span class="p">,</span> <span class="nb">int</span> <span class="n">ldb</span><span class="p">,</span> <span class="n">long</span> <span class="n">long</span> <span class="n">bsb</span><span class="p">,</span> <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">beta</span><span class="p">,</span>
             <span class="nb">float</span> <span class="o">*</span><span class="n">C</span><span class="p">,</span> <span class="nb">int</span> <span class="n">ldc</span><span class="p">,</span> <span class="n">long</span> <span class="n">long</span> <span class="n">bsc</span><span class="p">,</span>
             <span class="nb">int</span> <span class="n">batchCount</span><span class="p">);</span>
</pre></div>
</div>
<p>hipBLAS assumes matrices A and vectors x, y are allocated in GPU memory space filled with data. Users are responsible for copying data from/to the host and device memory.</p>
</div>
</div>
</div>
<div class="section" id="rocrand">
<h2>rocRAND<a class="headerlink" href="#rocrand" title="Permalink to this headline">¶</a></h2>
<p>The rocRAND project provides functions that generate pseudo-random and quasi-random numbers.</p>
<p>The rocRAND library is implemented in the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Programming_Guides/Programming-Guides.html#hip-programing-guide">HIP</a> programming language and optimised for AMD’s latest discrete GPUs. It is designed to run on top of AMD’s Radeon Open Compute <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/">ROCm</a> runtime, but it also works on CUDA enabled GPUs.</p>
<p>Additionally, the project includes a wrapper library called hipRAND which allows user to easily port CUDA applications that use cuRAND library to the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Programming_Guides/Programming-Guides.html#hip-programing-guide">HIP</a> layer. In <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/">ROCm</a> environment hipRAND uses rocRAND, however in CUDA environment cuRAND is used instead.</p>
<div class="section" id="supported-random-number-generators">
<h3>Supported Random Number Generators<a class="headerlink" href="#supported-random-number-generators" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>XORWOW</p></li>
<li><p>MRG32k3a</p></li>
<li><p>Mersenne Twister for Graphic Processors (MTGP32)</p></li>
<li><p>Philox (4x32, 10 rounds)</p></li>
<li><p>bSobol32</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p>Git</p></li>
<li><p>cmake (3.0.2 or later)</p></li>
<li><p>C++ compiler with C++11 support</p></li>
<li><dl class="simple">
<dt>For AMD platforms:</dt><dd><ul>
<li><p><a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/">ROCm</a> (1.7 or later)</p></li>
<li><p><a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Programming_Guides/hcc-guide.html#hccguide">HCC</a> compiler, which must be set as C++ compiler on ROCm platform.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>For CUDA platforms:</dt><dd><ul>
<li><p><a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Programming_Guides/Programming-Guides.html#hip-programing-guide">HIP</a> (hcc is not required)</p></li>
<li><p>Latest CUDA SDK</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><strong>Optional:</strong></p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/google/googletest">GTest</a> (required only for tests; building tests is enabled by default)</dt><dd><ul>
<li><p>Use GTEST_ROOT to specify GTest location (also see <a class="reference external" href="https://cmake.org/cmake/help/latest/module/FindGTest.html">FindGTest</a>)</p></li>
<li><p>Note: If GTest is not already installed, it will be automatically downloaded and built</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TestU01 (required only for crush tests)</dt><dd><ul>
<li><p>Use TESTU01_ROOT_DIR to specify TestU01 location</p></li>
<li><p>Note: If TestU01 is not already installed, it will be automatically downloaded and built</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Fortran compiler (required only for Fortran wrapper)</dt><dd><ul>
<li><p>gfortran is recommended.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Python 2.7+ or 3.5+ (required only for Python wrapper)</p></li>
</ul>
</div></blockquote>
<p>If some dependencies are missing, cmake script automatically downloads, builds and installs them. Setting DEPENDENCIES_FORCE_DOWNLOAD option ON forces script to not to use system-installed libraries, and to download all dependencies.</p>
</div>
<div class="section" id="build-and-install">
<h3>Build and Install<a class="headerlink" href="#build-and-install" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">rocRAND</span><span class="o">.</span><span class="n">git</span>

<span class="c1"># Go to rocRAND directory, create and go to build directory</span>
<span class="n">cd</span> <span class="n">rocRAND</span><span class="p">;</span> <span class="n">mkdir</span> <span class="n">build</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>

<span class="c1"># Configure rocRAND, setup options for your system</span>
<span class="c1"># Build options: BUILD_TEST, BUILD_BENCHMARK (off by default), BUILD_CRUSH_TEST (off by default)</span>
<span class="c1">#</span>
<span class="c1"># ! IMPORTANT !</span>
<span class="c1"># On ROCm platform set C++ compiler to HCC. You can do it by adding &#39;CXX=&lt;path-to-hcc&gt;&#39; or just</span>
<span class="c1"># `CXX=hcc` before &#39;cmake&#39;, or setting cmake option &#39;CMAKE_CXX_COMPILER&#39; to path to the HCC compiler.</span>
<span class="c1">#</span>
<span class="p">[</span><span class="n">CXX</span><span class="o">=</span><span class="n">hcc</span><span class="p">]</span> <span class="n">cmake</span> <span class="o">-</span><span class="n">DBUILD_BENCHMARK</span><span class="o">=</span><span class="n">ON</span> <span class="o">../.</span> <span class="c1"># or cmake-gui ../.</span>
<span class="c1"># Build</span>
<span class="c1"># For ROCM-1.6, if a HCC runtime error is caught, consider setting</span>
<span class="c1"># HCC_AMDGPU_TARGET=&lt;arch&gt; in front of make as a workaround</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j4</span>
<span class="c1"># Optionally, run tests if they&#39;re enabled</span>
<span class="n">ctest</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">failure</span>
<span class="c1"># Install</span>
<span class="p">[</span><span class="n">sudo</span><span class="p">]</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>Note: Existing gtest library in the system (especially static gtest libraries built with other compilers) may cause build failure; if errors are encountered with existing gtest library or other dependencies, DEPENDENCIES_FORCE_DOWNLOAD flag can be passed to cmake, as mentioned before, to help solve the problem.</p>
<p>Note: To disable inline assembly optimisations in rocRAND (for both the host library and the device functions provided in rocrand_kernel.h) set cmake option ENABLE_INLINE_ASM to OFF.</p>
</div>
<div class="section" id="running-unit-tests">
<h3>Running Unit Tests<a class="headerlink" href="#running-unit-tests" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to rocRAND build directory</span>
<span class="n">cd</span> <span class="n">rocRAND</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>
<span class="c1"># To run all tests</span>
<span class="n">ctest</span>
<span class="c1"># To run unit tests</span>
<span class="o">./</span><span class="n">test</span><span class="o">/&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="running-benchmarks">
<h3>Running Benchmarks<a class="headerlink" href="#running-benchmarks" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to rocRAND build directory</span>
<span class="n">cd</span> <span class="n">rocRAND</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>
<span class="c1"># To run benchmark for generate functions:</span>
<span class="c1"># engine -&gt; all, xorwow, mrg32k3a, mtgp32, philox, sobol32</span>
<span class="c1"># distribution -&gt; all, uniform-uint, uniform-float, uniform-double, normal-float, normal-double,</span>
<span class="c1">#                 log-normal-float, log-normal-double, poisson</span>
<span class="c1"># Further option can be found using --help</span>
<span class="o">./</span><span class="n">benchmark</span><span class="o">/</span><span class="n">benchmark_rocrand_generate</span> <span class="o">--</span><span class="n">engine</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">dis</span> <span class="o">&lt;</span><span class="n">distribution</span><span class="o">&gt;</span>
<span class="c1"># To run benchmark for device kernel functions:</span>
<span class="c1"># engine -&gt; all, xorwow, mrg32k3a, mtgp32, philox, sobol32</span>
<span class="c1"># distribution -&gt; all, uniform-uint, uniform-float, uniform-double, normal-float, normal-double,</span>
<span class="c1">#                 log-normal-float, log-normal-double, poisson, discrete-poisson, discrete-custom</span>
<span class="c1"># further option can be found using --help</span>
<span class="o">./</span><span class="n">benchmark</span><span class="o">/</span><span class="n">benchmark_rocrand_kernel</span> <span class="o">--</span><span class="n">engine</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">dis</span> <span class="o">&lt;</span><span class="n">distribution</span><span class="o">&gt;</span>
<span class="c1"># To compare against cuRAND (cuRAND must be supported):</span>
<span class="o">./</span><span class="n">benchmark</span><span class="o">/</span><span class="n">benchmark_curand_generate</span> <span class="o">--</span><span class="n">engine</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">dis</span> <span class="o">&lt;</span><span class="n">distribution</span><span class="o">&gt;</span>
<span class="o">./</span><span class="n">benchmark</span><span class="o">/</span><span class="n">benchmark_curand_kernel</span> <span class="o">--</span><span class="n">engine</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">dis</span> <span class="o">&lt;</span><span class="n">distribution</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="running-statistical-tests">
<h3>Running Statistical Tests<a class="headerlink" href="#running-statistical-tests" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to rocRAND build directory</span>
<span class="n">cd</span> <span class="n">rocRAND</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>
<span class="c1"># To run &quot;crush&quot; test, which verifies that generated pseudorandom</span>
<span class="c1"># numbers are of high quality:</span>
<span class="c1"># engine -&gt; all, xorwow, mrg32k3a, mtgp32, philox</span>
<span class="o">./</span><span class="n">test</span><span class="o">/</span><span class="n">crush_test_rocrand</span> <span class="o">--</span><span class="n">engine</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span>
<span class="c1"># To run Pearson Chi-squared and Anderson-Darling tests, which verify</span>
<span class="c1"># that distribution of random number agrees with the requested distribution:</span>
<span class="c1"># engine -&gt; all, xorwow, mrg32k3a, mtgp32, philox, sobol32</span>
<span class="c1"># distribution -&gt; all, uniform-float, uniform-double, normal-float, normal-double,</span>
<span class="c1">#                 log-normal-float, log-normal-double, poisson</span>
<span class="o">./</span><span class="n">test</span><span class="o">/</span><span class="n">stat_test_rocrand_generate</span> <span class="o">--</span><span class="n">engine</span> <span class="o">&lt;</span><span class="n">engine</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">dis</span> <span class="o">&lt;</span><span class="n">distribution</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># go to rocRAND doc directory</span>
<span class="n">cd</span> <span class="n">rocRAND</span><span class="p">;</span> <span class="n">cd</span> <span class="n">doc</span>
<span class="c1"># run doxygen</span>
<span class="n">doxygen</span> <span class="n">Doxyfile</span>
<span class="c1"># open html/index.html</span>
</pre></div>
</div>
</div>
<div class="section" id="wrappers">
<h3>Wrappers<a class="headerlink" href="#wrappers" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>C++ wrappers for host API of rocRAND and hipRAND are in files <strong>rocrand.hpp</strong> and <strong>hiprand.hpp</strong>.</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocRAND/blob/master-rocm-2.7/library/src/fortran">Fortran wrappers</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocRAND/blob/master-rocm-2.7/python">Python wrappers</a>: <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocRAND/blob/master-rocm-2.7/python/rocrand">rocRAND</a>  and <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocRAND/blob/master-rocm-2.7/python/hiprand">hipRAND</a>.</p></li>
</ul>
</div></blockquote>
<p><strong>Support</strong></p>
<p>Bugs and feature requests can be reported through the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocRAND/issues">issue tracker</a>.</p>
</div>
</div>
<div class="section" id="rocfft">
<h2>rocFFT<a class="headerlink" href="#rocfft" title="Permalink to this headline">¶</a></h2>
<p>rocFFT  is a software library for computing Fast Fourier Transforms (FFT) written in HIP. It is part of AMD’s software ecosystem based on ROCm. In addition to AMD GPU devices, the library can also be compiled with the CUDA compiler using HIP tools for running on Nvidia GPU devices.</p>
<p>The rocFFT library:</p>
<blockquote>
<div><ul class="simple">
<li><p>Provides a fast and accurate platform for calculating discrete FFTs.</p></li>
<li><p>Supports single and double precision floating point formats.</p></li>
<li><p>Supports 1D, 2D, and 3D transforms.</p></li>
<li><p>Supports computation of transforms in batches.</p></li>
<li><p>Supports real and complex FFTs.</p></li>
<li><p>Supports lengths that are any combination of powers of 2, 3, 5.</p></li>
</ul>
</div></blockquote>
<div class="section" id="api-design">
<h3>API design<a class="headerlink" href="#api-design" title="Permalink to this headline">¶</a></h3>
<p>Please refer to the <span class="xref std std-ref">rocFFTAPI</span> for current documentation. Work in progress.</p>
</div>
<div class="section" id="id17">
<h3>Installing pre-built packages<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>Download pre-built packages either from <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Installation_Guide/Installation-Guide.html">ROCm’s package servers</a> or by clicking the github releases tab and manually downloading, which could be newer. Release notes are available for each release on the releases tab.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">rocfft</span>
</pre></div>
</div>
</div>
<div class="section" id="quickstart-rocfft-build">
<h3>Quickstart rocFFT build<a class="headerlink" href="#quickstart-rocfft-build" title="Permalink to this headline">¶</a></h3>
<p>Bash helper build script (Ubuntu only)
The root of this repository has a helper bash script install.sh to build and install rocFFT on Ubuntu with a single command. It does not take a lot of options and hard-codes configuration that can be specified through invoking cmake directly, but it’s a great way to get started quickly and can serve as an example of how to build/install. A few commands in the script need sudo access, so it may prompt you for a password.
* <code class="docutils literal notranslate"><span class="pre">./install</span> <span class="pre">-h</span></code> – shows help
* <code class="docutils literal notranslate"><span class="pre">./install</span> <span class="pre">-id</span></code> – build library, build dependencies and install globally (-d flag only needs to be specified once on a system)
* <code class="docutils literal notranslate"><span class="pre">./install</span> <span class="pre">-c</span> <span class="pre">--cuda</span></code> – build library and clients for cuda backend into a local directory
Manual build (all supported platforms)
If you use a distro other than Ubuntu, or would like more control over the build process, the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocFFT/wiki/Build">rocfft build wiki</a> has helpful information on how to configure cmake and manually build.</p>
</div>
<div class="section" id="id19">
<h3>Manual build (all supported platforms)<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>If you use a distro other than Ubuntu, or would like more control over the build process, the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocFFT/wiki/Build">rocfft build wiki</a> has helpful information on how to configure cmake and manually build.</p>
<p><strong>Library and API Documentation</strong></p>
<p>Please refer to the <a class="reference external" href="https://rocfft.readthedocs.io/en/latest/">Library documentation</a> for current documentation.</p>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>The following is a simple example code that shows how to use rocFFT to compute a 1D single precision 16-point complex forward transform.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;iostream&gt;</span>
<span class="c1">#include &lt;vector&gt;</span>
<span class="c1">#include &quot;hip/hip_runtime_api.h&quot;</span>
<span class="c1">#include &quot;hip/hip_vector_types.h&quot;</span>
<span class="c1">#include &quot;rocfft.h&quot;</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
        <span class="o">//</span> <span class="n">rocFFT</span> <span class="n">gpu</span> <span class="n">compute</span>
        <span class="o">//</span> <span class="o">========================================</span>

        <span class="n">size_t</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
        <span class="n">size_t</span> <span class="n">Nbytes</span> <span class="o">=</span> <span class="n">N</span> <span class="o">*</span> <span class="n">sizeof</span><span class="p">(</span><span class="n">float2</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Create</span> <span class="n">HIP</span> <span class="n">device</span> <span class="n">buffer</span>
        <span class="n">float2</span> <span class="o">*</span><span class="n">x</span><span class="p">;</span>
        <span class="n">hipMalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="n">Nbytes</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Initialize</span> <span class="n">data</span>
        <span class="n">std</span><span class="p">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">float2</span><span class="o">&gt;</span> <span class="n">cx</span><span class="p">(</span><span class="n">N</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="n">cx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">cx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="o">//</span>  <span class="n">Copy</span> <span class="n">data</span> <span class="n">to</span> <span class="n">device</span>
        <span class="n">hipMemcpy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">cx</span><span class="o">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">Nbytes</span><span class="p">,</span> <span class="n">hipMemcpyHostToDevice</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Create</span> <span class="n">rocFFT</span> <span class="n">plan</span>
        <span class="n">rocfft_plan</span> <span class="n">plan</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
        <span class="n">size_t</span> <span class="n">length</span> <span class="o">=</span> <span class="n">N</span><span class="p">;</span>
        <span class="n">rocfft_plan_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">plan</span><span class="p">,</span> <span class="n">rocfft_placement_inplace</span><span class="p">,</span> <span class="n">rocfft_transform_type_complex_forward</span><span class="p">,</span> <span class="n">rocfft_precision_single</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>                        <span class="o">&amp;</span><span class="n">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NULL</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Execute</span> <span class="n">plan</span>
        <span class="n">rocfft_execute</span><span class="p">(</span><span class="n">plan</span><span class="p">,</span> <span class="p">(</span><span class="n">void</span><span class="o">**</span><span class="p">)</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Wait</span> <span class="k">for</span> <span class="n">execution</span> <span class="n">to</span> <span class="n">finish</span>
        <span class="n">hipDeviceSynchronize</span><span class="p">();</span>

        <span class="o">//</span> <span class="n">Destroy</span> <span class="n">plan</span>
        <span class="n">rocfft_plan_destroy</span><span class="p">(</span><span class="n">plan</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Copy</span> <span class="n">result</span> <span class="n">back</span> <span class="n">to</span> <span class="n">host</span>
        <span class="n">std</span><span class="p">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">float2</span><span class="o">&gt;</span> <span class="n">y</span><span class="p">(</span><span class="n">N</span><span class="p">);</span>
        <span class="n">hipMemcpy</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">x</span><span class="p">,</span> <span class="n">Nbytes</span><span class="p">,</span> <span class="n">hipMemcpyDeviceToHost</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">Print</span> <span class="n">results</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="o">//</span> <span class="n">Free</span> <span class="n">device</span> <span class="n">buffer</span>
        <span class="n">hipFree</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>

        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h3>API<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p>This section provides details of the library API</p>
<div class="section" id="id22">
<h4>Types<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>There are few data structures that are internal to the library. The pointer types to these
structures are given below. The user would need to use these types to create handles and pass them
between different library functions.</p>
</div>
<div class="section" id="library-setup-and-cleanup">
<h4>Library Setup and Cleanup<a class="headerlink" href="#library-setup-and-cleanup" title="Permalink to this headline">¶</a></h4>
<p>The following functions deals with initialization and cleanup of the library.</p>
</div>
<div class="section" id="plan">
<h4>Plan<a class="headerlink" href="#plan" title="Permalink to this headline">¶</a></h4>
<p>The following functions are used to create and destroy plan objects.</p>
<p>The following functions are used to query for information after a plan is created.</p>
</div>
<div class="section" id="plan-description">
<h4>Plan description<a class="headerlink" href="#plan-description" title="Permalink to this headline">¶</a></h4>
<p>Most of the times, <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rocfft_plan_create()</span></code> is all is needed to fully specify a transform.
And the description object can be skipped. But when a transform specification has more details
a description object need to be created and set up and the handle passed to the <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rocfft_plan_create()</span></code>.
Functions referred below can be used to manage plan description in order to specify more transform details.
The plan description object can be safely deleted after call to the plan api <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rocfft_plan_create()</span></code>.</p>
</div>
<div class="section" id="execution">
<h4>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h4>
<p>The following details the execution function. After a plan has been created, it can be used
to compute a transform on specified data. Aspects of the execution can be controlled and any useful
information returned to the user.</p>
</div>
<div class="section" id="execution-info">
<h4>Execution info<a class="headerlink" href="#execution-info" title="Permalink to this headline">¶</a></h4>
<p>The execution api <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rocfft_execute()</span></code> takes a rocfft_execution_info parameter. This parameter needs
to be created and setup by the user and passed to the execution api. The execution info handle encapsulates
information such as execution mode, pointer to any work buffer etc. It can also hold information that are
side effect of execution such as event objects. The following functions deal with managing execution info
object. Note that the <em>set</em> functions below need to be called before execution and <em>get</em> functions after
execution.</p>
</div>
<div class="section" id="enumerations">
<h4>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h4>
<p>This section provides all the enumerations used.</p>
</div>
</div>
</div>
<div class="section" id="rocsparse">
<h2>rocSPARSE<a class="headerlink" href="#rocsparse" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id23">
<h3>Introduction<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<p>rocSPARSE is a library that contains basic linear algebra subroutines for sparse matrices and vectors written in HiP for GPU devices. It is designed to be used from C and C++ code.</p>
<p>The functionality of rocSPARSE is organized in the following categories:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-auxiliary-functions">Sparse Auxiliary Functions</a> describe available helper functions that are required for subsequent library calls.</p></li>
<li><p><a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-level1-functions">Sparse Level 1 Functions</a> describe operations between a vector in sparse format and a vector in dense format.</p></li>
<li><p><a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-level2-functions">Sparse Level 2 Functions</a> describe operations between a matrix in sparse format and a vector in dense format.</p></li>
<li><p><a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-level3-functions">Sparse Level 3 Functions</a> describe operations between a matrix in sparse format and multiple vectors in dense format.</p></li>
<li><p><a class="reference internal" href="#sparse"><span class="std std-ref">Sparse Extra Functions</span></a> describe operations that manipulate sparse matrices.</p></li>
<li><p><a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-precond-functions">Preconditioner Functions</a> describe manipulations on a matrix in sparse format to obtain a preconditioner.</p></li>
<li><p><a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-conversion-functions">Sparse Conversion Functions</a> describe operations on a matrix in sparse format to obtain a different matrix format.</p></li>
</ul>
</div></blockquote>
<p>The code is open and hosted here: <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocSPARSE">https://github.com/ROCmSoftwarePlatform/rocSPARSE</a></p>
</div>
<div class="section" id="building-and-installing">
<h3>Building and Installing<a class="headerlink" href="#building-and-installing" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id24">
<h4>Prerequisites<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p>rocSPARSE requires a ROCm enabled platform, more information <a class="reference external" href="https://rocm.github.io/">here</a></p>
</div>
<div class="section" id="id26">
<h4>Installing pre-built packages<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<p>rocSPARSE can be installed from AMD ROCm repository. For detailed instructions on how to set up ROCm on different platforms, see the AMD ROCm Platform Installation Guide for Linux.</p>
<p>rocSPARSE can be installed on e.g. Ubuntu using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">rocsparse</span>
</pre></div>
</div>
<p>Once installed, rocSPARSE can be used just like any other library with a C API. The header file will need to be included in the user code in order to make calls into rocSPARSE, and the rocSPARSE shared library will become link-time and run-time dependent for the user application.</p>
</div>
<div class="section" id="building-rocsparse-from-open-source-repository">
<h4>Building rocSPARSE from Open-Source repository<a class="headerlink" href="#building-rocsparse-from-open-source-repository" title="Permalink to this headline">¶</a></h4>
<p><strong>Building rocSPARSE from source</strong></p>
<p>Building from source is not necessary, as rocSPARSE can be used after installing the pre-built packages as described above. If desired, the following instructions can be used to build rocSPARSE from source. Furthermore, the following compile-time dependencies must be met</p>
<blockquote>
<div><ul class="simple">
<li><p>git</p></li>
<li><p>CMake 3.5 or later</p></li>
<li><p>AMD ROCm</p></li>
<li><p>rocPRIM</p></li>
<li><p>googletest (optional, for clients)</p></li>
<li><p>libboost-program-options (optional, for clients)</p></li>
</ul>
</div></blockquote>
<p><strong>Download rocSPARSE</strong></p>
<p>The rocSPARSE source code is available at the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocSPARSE">rocSPARSE github page</a>.
Download the master branch using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">-</span><span class="n">b</span> <span class="n">master</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">rocSPARSE</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">rocSPARSE</span>
</pre></div>
</div>
<p>Below are steps to build different packages of the library, including dependencies and clients.
It is recommended to install rocSPARSE using the <em>install.sh</em> script.</p>
</div>
<div class="section" id="using-install-sh-to-build-dependencies-with-library">
<h4>Using <em>install.sh</em> to build dependencies with library<a class="headerlink" href="#using-install-sh-to-build-dependencies-with-library" title="Permalink to this headline">¶</a></h4>
<p>The following table lists common uses of <em>install.sh</em> to build dependencies + library.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>./install.sh -h</cite></p></td>
<td><p>Print help information.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -d</cite></p></td>
<td><p>Build dependencies and library in your local directory. The <cite>-d</cite> flag only needs to be <a href="#id115"><span class="problematic" id="id116">|br|</span></a> used once. For subsequent invocations of <em>install.sh</em> it is not necessary to rebuild the <a href="#id117"><span class="problematic" id="id118">|br|</span></a> dependencies.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh</cite></p></td>
<td><p>Build library in your local directory. It is assumed dependencies are available.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -i</cite></p></td>
<td><p>Build library, then build and install rocSPARSE package in <cite>/opt/rocm/rocsparse</cite>. You will be <a href="#id119"><span class="problematic" id="id120">|br|</span></a> prompted for sudo access. This will install for all users.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-install-sh-to-build-dependencies-with-library-and-clients">
<h4>Using <em>install.sh</em> to build dependencies with library and clients<a class="headerlink" href="#using-install-sh-to-build-dependencies-with-library-and-clients" title="Permalink to this headline">¶</a></h4>
<p>The client contains example code, unit tests and benchmarks. Common uses of <em>install.sh</em> to build them are listed in the table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>./install.sh -h</cite></p></td>
<td><p>Print help information.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -dc</cite></p></td>
<td><p>Build dependencies, library and client in your local directory. The <cite>-d</cite> flag only needs to be <a href="#id121"><span class="problematic" id="id122">|br|</span></a> used once. For subsequent invocations of <em>install.sh</em> it is not necessary to rebuild the <a href="#id123"><span class="problematic" id="id124">|br|</span></a> dependencies.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh -c</cite></p></td>
<td><p>Build library and client in your local directory. It is assumed dependencies are available.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -idc</cite></p></td>
<td><p>Build library, dependencies and client, then build and install rocSPARSE package in <a href="#id125"><span class="problematic" id="id126">|br|</span></a> <cite>/opt/rocm/rocsparse</cite>. You will be prompted for sudo access. This will install for all users.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh -ic</cite></p></td>
<td><p>Build library and client, then build and install rocSPARSE package in <cite>opt/rocm/rocsparse</cite>. <a href="#id127"><span class="problematic" id="id128">|br|</span></a> You will be prompted for sudo access. This will install for all users.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-individual-commands-to-build-rocsparse">
<h4>Using individual commands to build rocSPARSE<a class="headerlink" href="#using-individual-commands-to-build-rocsparse" title="Permalink to this headline">¶</a></h4>
<p>CMake 3.5 or later is required in order to build rocSPARSE.
The rocSPARSE library contains both, host and device code, therefore the HCC compiler must be specified during cmake configuration process.</p>
<p>rocSPARSE can be built using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Create and change to build directory
mkdir -p build/release ; cd build/release

# Default install path is /opt/rocm, use -DCMAKE_INSTALL_PREFIX=&lt;path&gt; to adjust it
CXX=/opt/rocm/bin/hcc cmake ../..

# Compile rocSPARSE library
make -j$(nproc)

# Install rocSPARSE to /opt/rocm
sudo make install
</pre></div>
</div>
<p>Boost and GoogleTest is required in order to build rocSPARSE clients.</p>
<p>rocSPARSE with dependencies and client can be built using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Install boost on Ubuntu
sudo apt install libboost-program-options-dev

# Install googletest
mkdir -p build/release/deps ; cd build/release/deps
cmake ../../../deps
sudo make -j$(nproc) install

# Change to build directory
cd ..

# Configure rocSPARSE
# Build options:
#   BUILD_CLIENTS_TESTS      - build tests (OFF)
#   BUILD_CLIENTS_BENCHMARKS - build benchmarks (OFF)
#   BUILD_CLIENTS_SAMPLES    - build examples (ON)
#   BUILD_VERBOSE            - verbose output (OFF)
#   BUILD_SHARED_LIBS        - build rocSPARSE as a shared library (ON)

# Default install path is /opt/rocm, use -DCMAKE_INSTALL_PREFIX=&lt;path&gt; to adjust it
CXX=/opt/rocm/bin/hcc cmake ../.. -DBUILD_CLIENTS_TESTS=ON \
                                  -DBUILD_CLIENTS_BENCHMARKS=ON \
                                  -DBUILD_CLIENTS_SAMPLES=ON \
                                  -DBUILD_VERBOSE=OFF \
                                  -DBUILD_SHARED_LIBS=ON

# Compile rocSPARSE library
make -j$(nproc)

# Install rocSPARSE to /opt/rocm
sudo make install
</pre></div>
</div>
</div>
<div class="section" id="id27">
<h4>Common build problems<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p><strong>Issue:</strong> HIP (/opt/rocm/hip) was built using hcc 1.0.xxx-xxx-xxx-xxx, but you are using /opt/rocm/bin/hcc with version 1.0.yyy-yyy-yyy-yyy from hipcc (version mismatch). Please rebuild HIP including cmake or update HCC_HOME variable.</p>
<p><strong>Solution:</strong> Download HIP from github and use hcc to <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/blob/master/INSTALL.md">build from source</a> and then use the built HIP instead of /opt/rocm/hip.</p>
</li>
<li><p><strong>Issue:</strong> HCC RUNTIME ERROR: Failed to find compatible kernel</p>
<p><strong>Solution:</strong> Add the following to the cmake command when configuring: -DCMAKE_CXX_FLAGS=”–amdgpu-target=gfx803,gfx900,gfx906,gfx908”</p>
</li>
<li><dl class="simple">
<dt><strong>Issue:</strong> Could not find a package configuration file provided by “ROCM” with any of the following names:</dt><dd><p>ROCMConfig.cmake <a href="#id129"><span class="problematic" id="id130">|br|</span></a>
rocm-config.cmake</p>
</dd>
</dl>
<p><strong>Solution:</strong> Install <a class="reference external" href="https://github.com/RadeonOpenCompute/rocm-cmake">ROCm cmake modules</a></p>
</li>
</ol>
</div>
<div class="section" id="simple-test">
<h4>Simple Test<a class="headerlink" href="#simple-test" title="Permalink to this headline">¶</a></h4>
<p>You can test the installation by running one of the rocSPARSE examples, after successfully compiling the library with clients.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Navigate to clients binary directory
$ cd rocSPARSE/build/release/clients/staging

# Execute rocSPARSE example
$ ./example_csrmv 1000
</pre></div>
</div>
</div>
<div class="section" id="supported-targets">
<h4>Supported Targets<a class="headerlink" href="#supported-targets" title="Permalink to this headline">¶</a></h4>
<p>Currently, rocSPARSE is supported under the following operating systems</p>
<blockquote>
<div><ul class="simple">
<li><p>Ubuntu 16.04</p></li>
<li><p>Ubuntu 18.04</p></li>
<li><p>CentOS 7</p></li>
<li><p>SLES 15</p></li>
</ul>
</div></blockquote>
<p>To compile and run rocSPARSE, AMD ROCm Platform is required.</p>
<p>The following HIP capable devices are currently supported</p>
<blockquote>
<div><ul class="simple">
<li><p>gfx803 (e.g. Fiji)</p></li>
<li><p>gfx900 (e.g. Vega10, MI25)</p></li>
<li><p>gfx906 (e.g. Vega20, MI50, MI60)</p></li>
<li><p>gfx908</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="device-and-stream-management">
<h3>Device and Stream Management<a class="headerlink" href="#device-and-stream-management" title="Permalink to this headline">¶</a></h3>
<p><em>hipSetDevice()</em> and <em>hipGetDevice()</em> are HIP device management APIs. They are NOT part of the rocSPARSE API.</p>
<div class="section" id="asynchronous-execution">
<h4>Asynchronous Execution<a class="headerlink" href="#asynchronous-execution" title="Permalink to this headline">¶</a></h4>
<p>All rocSPARSE library functions, unless otherwise stated, are non blocking and executed asynchronously with respect to the host. They may return before the actual computation has finished. To force synchronization, <em>hipDeviceSynchronize()</em> or <em>hipStreamSynchronize()</em> can be used. This will ensure that all previously executed rocSPARSE functions on the device / this particular stream have completed.</p>
</div>
<div class="section" id="hip-device-management">
<h4>HIP Device Management<a class="headerlink" href="#hip-device-management" title="Permalink to this headline">¶</a></h4>
<p>Before a HIP kernel invocation, users need to call <em>hipSetDevice()</em> to set a device, e.g. device 1. If users do not explicitly call it, the system by default sets it as device 0. Unless users explicitly call <em>hipSetDevice()</em> to set to another device, their HIP kernels are always launched on device 0.</p>
<p>The above is a HIP (and CUDA) device management approach and has nothing to do with rocSPARSE. rocSPARSE honors the approach above and assumes users have already set the device before a rocSPARSE routine call.</p>
<p>Once users set the device, they create a handle with <a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-create-handle">rocsparse_create_handle()</a>.</p>
<p>Subsequent rocSPARSE routines take this handle as an input parameter. rocSPARSE ONLY queries (by hipGetDevice()) the user’s device; rocSPARSE does NOT set the device for users. If rocSPARSE does not see a valid device, it returns an error message. It is the users’ responsibility to provide a valid device to rocSPARSE and ensure the device safety.</p>
<p>Users CANNOT switch devices between <a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-create-handle">rocsparse_create_handle()</a> and <a class="reference external" href="https://rocsparse.readthedocs.io/en/latest/library.html#rocsparse-destroy-handle">rocsparse_destroy_handle()</a>. If users want to change device, they must destroy the current handle and create another rocSPARSE handle.</p>
</div>
<div class="section" id="hip-stream-management">
<h4>HIP Stream Management<a class="headerlink" href="#hip-stream-management" title="Permalink to this headline">¶</a></h4>
<p>HIP kernels are always launched in a queue (also known as stream).</p>
<p>If users do not explicitly specify a stream, the system provides a default stream, maintained by the system. Users cannot create or destroy the default stream. However, users can freely create new streams (with <em>hipStreamCreate()</em>) and bind it to the rocSPARSE handle. HIP kernels are invoked in rocSPARSE routines. The rocSPARSE handle is always associated with a stream, and rocSPARSE passes its stream to the kernels inside the routine. One rocSPARSE routine only takes one stream in a single invocation. If users create a stream, they are responsible for destroying it.</p>
</div>
<div class="section" id="multiple-streams-and-multiple-devices">
<h4>Multiple Streams and Multiple Devices<a class="headerlink" href="#multiple-streams-and-multiple-devices" title="Permalink to this headline">¶</a></h4>
<p>If the system under test has multiple HIP devices, users can run multiple rocSPARSE handles concurrently, but can NOT run a single rocSPARSE handle on different discrete devices. Each handle is associated with a particular singular device, and a new handle should be created for each additional device.</p>
</div>
</div>
<div class="section" id="storage-formats">
<h3>Storage Formats<a class="headerlink" href="#storage-formats" title="Permalink to this headline">¶</a></h3>
<div class="section" id="coo-storage-format">
<h4>COO storage format<a class="headerlink" href="#coo-storage-format" title="Permalink to this headline">¶</a></h4>
<p>The Coordinate (COO) storage format represents a <span class="math notranslate nohighlight">\(m \times n\)</span> matrix by</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>number of rows (integer).</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>number of columns (integer).</p></td>
</tr>
<tr class="row-odd"><td><p>nnz</p></td>
<td><p>number of non-zero elements (integer).</p></td>
</tr>
<tr class="row-even"><td><p>coo_val</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the data (floating point).</p></td>
</tr>
<tr class="row-odd"><td><p>coo_row_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the row indices (integer).</p></td>
</tr>
<tr class="row-even"><td><p>coo_col_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the column indices (integer).</p></td>
</tr>
</tbody>
</table>
<p>The COO matrix is expected to be sorted by row indices and column indices per row. Furthermore, each pair of indices should appear only once.
Consider the following <span class="math notranslate nohighlight">\(3 \times 5\)</span> matrix and the corresponding COO structures, with <span class="math notranslate nohighlight">\(m = 3, n = 5\)</span> and <span class="math notranslate nohighlight">\(\text{nnz} = 8\)</span> using zero based indexing:</p>
<div class="math notranslate nohighlight">
\[\begin{split}A = \begin{pmatrix}
      1.0 &amp; 2.0 &amp; 0.0 &amp; 3.0 &amp; 0.0 \\
      0.0 &amp; 4.0 &amp; 5.0 &amp; 0.0 &amp; 0.0 \\
      6.0 &amp; 0.0 &amp; 0.0 &amp; 7.0 &amp; 8.0 \\
    \end{pmatrix}\end{split}\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{ll}
  coo\_val[8] &amp; = \{1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0\} \\
  coo\_row\_ind[8] &amp; = \{0, 0, 0, 1, 1, 2, 2, 2\} \\
  coo\_col\_ind[8] &amp; = \{0, 1, 3, 1, 2, 0, 3, 4\}
\end{array}\end{split}\]</div>
</div>
<div class="section" id="csr-storage-format">
<h4>CSR storage format<a class="headerlink" href="#csr-storage-format" title="Permalink to this headline">¶</a></h4>
<p>The Compressed Sparse Row (CSR) storage format represents a <span class="math notranslate nohighlight">\(m \times n\)</span> matrix by</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>number of rows (integer).</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>number of columns (integer).</p></td>
</tr>
<tr class="row-odd"><td><p>nnz</p></td>
<td><p>number of non-zero elements (integer).</p></td>
</tr>
<tr class="row-even"><td><p>csr_val</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the data (floating point).</p></td>
</tr>
<tr class="row-odd"><td><p>csr_row_ptr</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">m+1</span></code> elements that point to the start of every row (integer).</p></td>
</tr>
<tr class="row-even"><td><p>csr_col_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the column indices (integer).</p></td>
</tr>
</tbody>
</table>
<p>The CSR matrix is expected to be sorted by column indices within each row. Furthermore, each pair of indices should appear only once.
Consider the following <span class="math notranslate nohighlight">\(3 \times 5\)</span> matrix and the corresponding CSR structures, with <span class="math notranslate nohighlight">\(m = 3, n = 5\)</span> and <span class="math notranslate nohighlight">\(\text{nnz} = 8\)</span> using one based indexing:</p>
<div class="math notranslate nohighlight">
\[\begin{split}A = \begin{pmatrix}
      1.0 &amp; 2.0 &amp; 0.0 &amp; 3.0 &amp; 0.0 \\
      0.0 &amp; 4.0 &amp; 5.0 &amp; 0.0 &amp; 0.0 \\
      6.0 &amp; 0.0 &amp; 0.0 &amp; 7.0 &amp; 8.0 \\
    \end{pmatrix}\end{split}\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{ll}
  csr\_val[8] &amp; = \{1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0\} \\
  csr\_row\_ptr[4] &amp; = \{1, 4, 6, 9\} \\
  csr\_col\_ind[8] &amp; = \{1, 2, 4, 2, 3, 1, 4, 5\}
\end{array}\end{split}\]</div>
</div>
<div class="section" id="ell-storage-format">
<h4>ELL storage format<a class="headerlink" href="#ell-storage-format" title="Permalink to this headline">¶</a></h4>
<p>The Ellpack-Itpack (ELL) storage format represents a <span class="math notranslate nohighlight">\(m \times n\)</span> matrix by</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>number of rows (integer).</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>number of columns (integer).</p></td>
</tr>
<tr class="row-odd"><td><p>ell_width</p></td>
<td><p>maximum number of non-zero elements per row (integer)</p></td>
</tr>
<tr class="row-even"><td><p>ell_val</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">times</span> <span class="pre">ell_width</span></code> elements containing the data (floating point).</p></td>
</tr>
<tr class="row-odd"><td><p>ell_col_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">times</span> <span class="pre">ell_width</span></code> elements containing the column indices (integer).</p></td>
</tr>
</tbody>
</table>
<p>The ELL matrix is assumed to be stored in column-major format. Rows with less than <code class="docutils literal notranslate"><span class="pre">ell_width</span></code> non-zero elements are padded with zeros (<code class="docutils literal notranslate"><span class="pre">ell_val</span></code>) and <span class="math notranslate nohighlight">\(-1\)</span> (<code class="docutils literal notranslate"><span class="pre">ell_col_ind</span></code>).
Consider the following <span class="math notranslate nohighlight">\(3 \times 5\)</span> matrix and the corresponding ELL structures, with <span class="math notranslate nohighlight">\(m = 3, n = 5\)</span> and <span class="math notranslate nohighlight">\(\text{ell_width} = 3\)</span> using zero based indexing:</p>
<div class="math notranslate nohighlight">
\[\begin{split}A = \begin{pmatrix}
      1.0 &amp; 2.0 &amp; 0.0 &amp; 3.0 &amp; 0.0 \\
      0.0 &amp; 4.0 &amp; 5.0 &amp; 0.0 &amp; 0.0 \\
      6.0 &amp; 0.0 &amp; 0.0 &amp; 7.0 &amp; 8.0 \\
    \end{pmatrix}\end{split}\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{ll}
  ell\_val[9] &amp; = \{1.0, 4.0, 6.0, 2.0, 5.0, 7.0, 3.0, 0.0, 8.0\} \\
  ell\_col\_ind[9] &amp; = \{0, 1, 0, 1, 2, 3, 3, -1, 4\}
\end{array}\end{split}\]</div>
</div>
<div class="section" id="hyb-storage-format">
<span id="id29"></span><h4>HYB storage format<a class="headerlink" href="#hyb-storage-format" title="Permalink to this headline">¶</a></h4>
<p>The Hybrid (HYB) storage format represents a <span class="math notranslate nohighlight">\(m \times n\)</span> matrix by</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>number of rows (integer).</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>number of columns (integer).</p></td>
</tr>
<tr class="row-odd"><td><p>nnz</p></td>
<td><p>number of non-zero elements of the COO part (integer)</p></td>
</tr>
<tr class="row-even"><td><p>ell_width</p></td>
<td><p>maximum number of non-zero elements per row of the ELL part (integer)</p></td>
</tr>
<tr class="row-odd"><td><p>ell_val</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">times</span> <span class="pre">ell_width</span></code> elements containing the ELL part data (floating point).</p></td>
</tr>
<tr class="row-even"><td><p>ell_col_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">times</span> <span class="pre">ell_width</span></code> elements containing the ELL part column indices (integer).</p></td>
</tr>
<tr class="row-odd"><td><p>coo_val</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the COO part data (floating point).</p></td>
</tr>
<tr class="row-even"><td><p>coo_row_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the COO part row indices (integer).</p></td>
</tr>
<tr class="row-odd"><td><p>coo_col_ind</p></td>
<td><p>array of <code class="docutils literal notranslate"><span class="pre">nnz</span></code> elements containing the COO part column indices (integer).</p></td>
</tr>
</tbody>
</table>
<p>The HYB format is a combination of the ELL and COO sparse matrix formats. Typically, the regular part of the matrix is stored in ELL storage format, and the irregular part of the matrix is stored in COO storage format. Three different partitioning schemes can be applied when converting a CSR matrix to a matrix in HYB storage format. For further details on the partitioning schemes, see <span class="xref std std-ref">rocsparse_hyb_partition_</span>.</p>
</div>
</div>
<div class="section" id="id30">
<h3>Types<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rocsparse-handle">
<h4>rocsparse_handle<a class="headerlink" href="#rocsparse-handle" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-mat-descr">
<h4>rocsparse_mat_descr<a class="headerlink" href="#rocsparse-mat-descr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-mat-info">
<h4>rocsparse_mat_info<a class="headerlink" href="#rocsparse-mat-info" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-hyb-mat">
<h4>rocsparse_hyb_mat<a class="headerlink" href="#rocsparse-hyb-mat" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-action">
<h4>rocsparse_action<a class="headerlink" href="#rocsparse-action" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-hyb-partition">
<h4>rocsparse_hyb_partition<a class="headerlink" href="#rocsparse-hyb-partition" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-index-base">
<h4>rocsparse_index_base<a class="headerlink" href="#rocsparse-index-base" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-matrix-type">
<h4>rocsparse_matrix_type<a class="headerlink" href="#rocsparse-matrix-type" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-fill-mode">
<h4>rocsparse_fill_mode<a class="headerlink" href="#rocsparse-fill-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-diag-type">
<h4>rocsparse_diag_type<a class="headerlink" href="#rocsparse-diag-type" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-operation">
<h4>rocsparse_operation<a class="headerlink" href="#rocsparse-operation" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-pointer-mode">
<h4>rocsparse_pointer_mode<a class="headerlink" href="#rocsparse-pointer-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-analysis-policy">
<h4>rocsparse_analysis_policy<a class="headerlink" href="#rocsparse-analysis-policy" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-solve-policy">
<h4>rocsparse_solve_policy<a class="headerlink" href="#rocsparse-solve-policy" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-layer-mode">
<h4>rocsparse_layer_mode<a class="headerlink" href="#rocsparse-layer-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-status">
<h4>rocsparse_status<a class="headerlink" href="#rocsparse-status" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>Three different environment variables can be set to enable logging in rocSPARSE: <code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code>, <code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LOG_TRACE_PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LOG_BENCH_PATH</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code> is a bit mask, where several logging modes can be combined as follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 57%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code> unset</p></td>
<td><p>logging is disabled.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code> set to <code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>trace logging is enabled.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code> set to <code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
<td><p>bench logging is enabled.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code> set to <code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td><p>trace logging and bench logging is enabled.</p></td>
</tr>
</tbody>
</table>
<p>When logging is enabled, each rocSPARSE function call will write the function name as well as function arguments to the logging stream. The default logging stream is <code class="docutils literal notranslate"><span class="pre">stderr</span></code>.</p>
<p>If the user sets the environment variable <code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LOG_TRACE_PATH</span></code> to the full path name for a file, the file is opened and trace logging is streamed to that file. If the user sets the environment variable <code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LOG_BENCH_PATH</span></code> to the full path name for a file, the file is opened and bench logging is streamed to that file. If the file cannot be opened, logging output is stream to <code class="docutils literal notranslate"><span class="pre">stderr</span></code>.</p>
<p>Note that performance will degrade when logging is enabled. By default, the environment variable <code class="docutils literal notranslate"><span class="pre">ROCSPARSE_LAYER</span></code> is unset and logging is disabled.</p>
</div>
<div class="section" id="id31">
<h3>Sparse Auxiliary Functions<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<p>This module holds all sparse auxiliary functions.</p>
<p>The functions that are contained in the auxiliary module describe all available helper functions that are required for subsequent library calls.</p>
<div class="section" id="id32">
<h4>rocsparse_create_handle()<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="id33">
<h4>rocsparse_destroy_handle()<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-set-stream">
<h4>rocsparse_set_stream()<a class="headerlink" href="#rocsparse-set-stream" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-stream">
<h4>rocsparse_get_stream()<a class="headerlink" href="#rocsparse-get-stream" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-set-pointer-mode">
<h4>rocsparse_set_pointer_mode()<a class="headerlink" href="#rocsparse-set-pointer-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-pointer-mode">
<h4>rocsparse_get_pointer_mode()<a class="headerlink" href="#rocsparse-get-pointer-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-version">
<h4>rocsparse_get_version()<a class="headerlink" href="#rocsparse-get-version" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-git-rev">
<h4>rocsparse_get_git_rev()<a class="headerlink" href="#rocsparse-get-git-rev" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-create-mat-descr">
<h4>rocsparse_create_mat_descr()<a class="headerlink" href="#rocsparse-create-mat-descr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-destroy-mat-descr">
<h4>rocsparse_destroy_mat_descr()<a class="headerlink" href="#rocsparse-destroy-mat-descr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-copy-mat-descr">
<h4>rocsparse_copy_mat_descr()<a class="headerlink" href="#rocsparse-copy-mat-descr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-set-mat-index-base">
<h4>rocsparse_set_mat_index_base()<a class="headerlink" href="#rocsparse-set-mat-index-base" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-mat-index-base">
<h4>rocsparse_get_mat_index_base()<a class="headerlink" href="#rocsparse-get-mat-index-base" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-set-mat-type">
<h4>rocsparse_set_mat_type()<a class="headerlink" href="#rocsparse-set-mat-type" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-mat-type">
<h4>rocsparse_get_mat_type()<a class="headerlink" href="#rocsparse-get-mat-type" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-set-mat-fill-mode">
<h4>rocsparse_set_mat_fill_mode()<a class="headerlink" href="#rocsparse-set-mat-fill-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-mat-fill-mode">
<h4>rocsparse_get_mat_fill_mode()<a class="headerlink" href="#rocsparse-get-mat-fill-mode" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-set-mat-diag-type">
<h4>rocsparse_set_mat_diag_type()<a class="headerlink" href="#rocsparse-set-mat-diag-type" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-get-mat-diag-type">
<h4>rocsparse_get_mat_diag_type()<a class="headerlink" href="#rocsparse-get-mat-diag-type" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-create-hyb-mat">
<h4>rocsparse_create_hyb_mat()<a class="headerlink" href="#rocsparse-create-hyb-mat" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-destroy-hyb-mat">
<h4>rocsparse_destroy_hyb_mat()<a class="headerlink" href="#rocsparse-destroy-hyb-mat" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-create-mat-info">
<h4>rocsparse_create_mat_info()<a class="headerlink" href="#rocsparse-create-mat-info" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-destroy-mat-info">
<h4>rocsparse_destroy_mat_info()<a class="headerlink" href="#rocsparse-destroy-mat-info" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id34">
<h3>Sparse Level 1 Functions<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<p>The sparse level 1 routines describe operations between a vector in sparse format and a vector in dense format. This section describes all rocSPARSE level 1 sparse linear algebra functions.</p>
<div class="section" id="rocsparse-axpyi">
<h4>rocsparse_axpyi()<a class="headerlink" href="#rocsparse-axpyi" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-doti">
<h4>rocsparse_doti()<a class="headerlink" href="#rocsparse-doti" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-dotci">
<h4>rocsparse_dotci()<a class="headerlink" href="#rocsparse-dotci" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-gthr">
<h4>rocsparse_gthr()<a class="headerlink" href="#rocsparse-gthr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-gthrz">
<h4>rocsparse_gthrz()<a class="headerlink" href="#rocsparse-gthrz" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-roti">
<h4>rocsparse_roti()<a class="headerlink" href="#rocsparse-roti" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-sctr">
<h4>rocsparse_sctr()<a class="headerlink" href="#rocsparse-sctr" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id35">
<h3>Sparse Level 2 Functions<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<p>This module holds all sparse level 2 routines.</p>
<p>The sparse level 2 routines describe operations between a matrix in sparse format and a vector in dense format.</p>
<div class="section" id="rocsparse-coomv">
<h4>rocsparse_coomv()<a class="headerlink" href="#rocsparse-coomv" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrmv-analysis">
<h4>rocsparse_csrmv_analysis()<a class="headerlink" href="#rocsparse-csrmv-analysis" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrmv">
<h4>rocsparse_csrmv()<a class="headerlink" href="#rocsparse-csrmv" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrmv-analysis-clear">
<h4>rocsparse_csrmv_analysis_clear()<a class="headerlink" href="#rocsparse-csrmv-analysis-clear" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-ellmv">
<h4>rocsparse_ellmv()<a class="headerlink" href="#rocsparse-ellmv" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-hybmv">
<h4>rocsparse_hybmv()<a class="headerlink" href="#rocsparse-hybmv" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsv-zero-pivot">
<h4>rocsparse_csrsv_zero_pivot()<a class="headerlink" href="#rocsparse-csrsv-zero-pivot" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsv-buffer-size">
<h4>rocsparse_csrsv_buffer_size()<a class="headerlink" href="#rocsparse-csrsv-buffer-size" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsv-analysis">
<h4>rocsparse_csrsv_analysis()<a class="headerlink" href="#rocsparse-csrsv-analysis" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsv-solve">
<h4>rocsparse_csrsv_solve()<a class="headerlink" href="#rocsparse-csrsv-solve" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsv-clear">
<h4>rocsparse_csrsv_clear()<a class="headerlink" href="#rocsparse-csrsv-clear" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id36">
<h3>Sparse Level 3 Functions<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<p>This module holds all sparse level 3 routines.</p>
<p>The sparse level 3 routines describe operations between a matrix in sparse format and multiple vectors in dense format that can also be seen as a dense matrix.</p>
<div class="section" id="rocsparse-csrmm">
<h4>rocsparse_csrmm()<a class="headerlink" href="#rocsparse-csrmm" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="sparse-extra-functions">
<span id="sparse"></span><h3>Sparse Extra Functions<a class="headerlink" href="#sparse-extra-functions" title="Permalink to this headline">¶</a></h3>
<p>This module holds all sparse extra routines.</p>
<p>The sparse extra routines describe operations that manipulate sparse matrices.</p>
<div class="section" id="rocsparse-csrgemm-buffer-size">
<h4>rocsparse_csrgemm_buffer_size()<a class="headerlink" href="#rocsparse-csrgemm-buffer-size" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrgemm-nnz">
<h4>rocsparse_csrgemm_nnz()<a class="headerlink" href="#rocsparse-csrgemm-nnz" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrgemm">
<h4>rocsparse_csrgemm()<a class="headerlink" href="#rocsparse-csrgemm" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id37">
<h3>Preconditioner Functions<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<p>This module holds all sparse preconditioners.</p>
<p>The sparse preconditioners describe manipulations on a matrix in sparse format to obtain a sparse preconditioner matrix.</p>
<div class="section" id="rocsparse-csrilu0-zero-pivot">
<h4>rocsparse_csrilu0_zero_pivot()<a class="headerlink" href="#rocsparse-csrilu0-zero-pivot" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrilu0-buffer-size">
<h4>rocsparse_csrilu0_buffer_size()<a class="headerlink" href="#rocsparse-csrilu0-buffer-size" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrilu0-analysis">
<h4>rocsparse_csrilu0_analysis()<a class="headerlink" href="#rocsparse-csrilu0-analysis" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrilu0">
<h4>rocsparse_csrilu0()<a class="headerlink" href="#rocsparse-csrilu0" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrilu0-clear">
<h4>rocsparse_csrilu0_clear()<a class="headerlink" href="#rocsparse-csrilu0-clear" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id38">
<h3>Sparse Conversion Functions<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<p>This module holds all sparse conversion routines.</p>
<p>The sparse conversion routines describe operations on a matrix in sparse format to obtain a matrix in a different sparse format.</p>
<div class="section" id="rocsparse-csr2coo">
<h4>rocsparse_csr2coo()<a class="headerlink" href="#rocsparse-csr2coo" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-coo2csr">
<h4>rocsparse_coo2csr()<a class="headerlink" href="#rocsparse-coo2csr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csr2csc-buffer-size">
<h4>rocsparse_csr2csc_buffer_size()<a class="headerlink" href="#rocsparse-csr2csc-buffer-size" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csr2csc">
<h4>rocsparse_csr2csc()<a class="headerlink" href="#rocsparse-csr2csc" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csr2ell-width">
<h4>rocsparse_csr2ell_width()<a class="headerlink" href="#rocsparse-csr2ell-width" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csr2ell">
<h4>rocsparse_csr2ell()<a class="headerlink" href="#rocsparse-csr2ell" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-ell2csr-nnz">
<h4>rocsparse_ell2csr_nnz()<a class="headerlink" href="#rocsparse-ell2csr-nnz" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-ell2csr">
<h4>rocsparse_ell2csr()<a class="headerlink" href="#rocsparse-ell2csr" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csr2hyb">
<h4>rocsparse_csr2hyb()<a class="headerlink" href="#rocsparse-csr2hyb" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-create-identity-permutation">
<h4>rocsparse_create_identity_permutation()<a class="headerlink" href="#rocsparse-create-identity-permutation" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsort-buffer-size">
<h4>rocsparse_csrsort_buffer_size()<a class="headerlink" href="#rocsparse-csrsort-buffer-size" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-csrsort">
<h4>rocsparse_csrsort()<a class="headerlink" href="#rocsparse-csrsort" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-coosort-buffer-size">
<h4>rocsparse_coosort_buffer_size()<a class="headerlink" href="#rocsparse-coosort-buffer-size" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-coosort-by-row">
<h4>rocsparse_coosort_by_row()<a class="headerlink" href="#rocsparse-coosort-by-row" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rocsparse-coosort-by-column">
<h4>rocsparse_coosort_by_column()<a class="headerlink" href="#rocsparse-coosort-by-column" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="rocsolver">
<h2>rocSOLVER<a class="headerlink" href="#rocsolver" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="id39">
<h3>Introduction<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<p>An implementation of Lapack routines on top of AMD’s Radeon Open Compute Platform (ROCm) runtime and toolchains.
rocSOLVER is implemented in the HIP programming language; it is based on rocBLAS, an optimized BLAS
implementation for AMD’s latest discrete GPUs. More information about rocBLAS can be found
<a class="reference external" href="https://rocblas.readthedocs.io/en/latest/index.html">here</a>.</p>
</div>
<div class="section" id="id41">
<h3>Build and install<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<p>rocSOLVER requires <a class="reference external" href="https://cmake.org/install/">cmake</a>
and <a class="reference external" href="https://rocm.github.io/install.html">ROCm</a>, including
<a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/blob/master/INSTALL.md">hip</a> and
<a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocBLAS">rocBLAS</a>, to be installed.</p>
<p>Once these requirements are satisfied, the following
instructions will build and install rocSOLVER:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
<span class="nv">CXX</span><span class="o">=</span>/opt/rocm/bin/hcc cmake ..
make
make install
</pre></div>
</div>
</div>
<div class="section" id="brief-description-and-functionality">
<h3>Brief description and functionality<a class="headerlink" href="#brief-description-and-functionality" title="Permalink to this headline">¶</a></h3>
<p>rocSolver Library is in early stages of active development. New features and functionality is being continuosly added. New
functionality is documented at each release of the ROCm platform.</p>
<p>The following table summarizes the LAPACK functionality implemented in rocSOLVER’s last release.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Lapack Auxiliary Function</p></th>
<th class="head"><p>single</p></th>
<th class="head"><p>double</p></th>
<th class="head"><p>single complex</p></th>
<th class="head"><p>double complex</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>rocsolver_laswp</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_larfg</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_larft</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_larf</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_larfb</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_org2r</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_orgqr</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_orgl2</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_orglq</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_orgbr</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_orm2r</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_ormqr</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Lapack Function</p></th>
<th class="head"><p>single</p></th>
<th class="head"><p>double</p></th>
<th class="head"><p>single complex</p></th>
<th class="head"><p>double complex</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>rocsolver_potf2</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_potf2_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rocsolver_potf2_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_potrf</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rocsolver_potrf_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_potrf_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_getf2</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_getf2_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>rocsolver_getf2_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_getrf</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>rocsolver_getrf_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_getrf_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_geqr2</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_geqr2_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rocsolver_geqr2_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_geqrf</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rocsolver_geqrf_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_geqrf_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_gelq2</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_gelq2_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rocsolver_gelq2_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>rocsolver_gelqf</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rocsolver_gelqf_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_gelqf_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>rocsolver_getrs</strong></p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>rocsolver_getrs_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>rocsolver_getrs_strided_batched</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="benchmarking-and-testing">
<h3>Benchmarking and Testing<a class="headerlink" href="#benchmarking-and-testing" title="Permalink to this headline">¶</a></h3>
<p>Additionaly, rocSOLVER has a basic/preliminary infrastructure for testing and benchmarking similar to that of rocBLAS.</p>
<p>On a normal installation, clients should be located in the directory <strong>&lt;rocsolverDIR&gt;/build/clients/staging</strong>.</p>
<p><strong>rocsolver-test</strong> executes a suite of <a class="reference external" href="https://github.com/google/googletest">Google tests</a> (<em>gtest</em>) that verifies the correct
functioning of the library; the results computed by rocSOLVER, for random input data, are compared with the results computed by
<a class="reference external" href="http://www.netlib.org/lapack/">NETLib LAPACK</a> on the CPU.</p>
<p>Calling the rocSOLVER gtest client with the –help flag</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./rocsolver-test --help
</pre></div>
</div>
<p>returns information on different flags that control the behavior of the gtests.</p>
<p><strong>rocsolver-bench</strong> allows to run any rocSOLVER function with random data of the specified dimensions; it compares the computed results, and provides basic
performance information (as for now, execution times).</p>
<p>Similarly,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./rocsolver-bench --help
</pre></div>
</div>
<p>returns information on how to use the rocSOLVER benchmark client.</p>
</div>
<div class="section" id="rocsolver-api">
<h3>rocSOLVER API<a class="headerlink" href="#rocsolver-api" title="Permalink to this headline">¶</a></h3>
<p>This section provides details of the rocSOLVER library API as in release
<a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocSOLVER/tree/master-rocm-2.10">ROCm 2.10</a>.</p>
<p>Most rocSOLVER types are aliases of rocBLAS types.
See rocBLAS types <a class="reference external" href="https://rocblas.readthedocs.io/en/latest/api.html#types">here</a>.</p>
<div class="section" id="id46">
<h4>Definitions<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-int">
<h5>rocsolver_int<a class="headerlink" href="#rocsolver-int" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="id47">
<h4>Enums<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-handle">
<h5>rocsolver_handle<a class="headerlink" href="#rocsolver-handle" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-operation">
<h5>rocsolver_operation<a class="headerlink" href="#rocsolver-operation" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-fill">
<h5>rocsolver_fill<a class="headerlink" href="#rocsolver-fill" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-diagonal">
<h5>rocsolver_diagonal<a class="headerlink" href="#rocsolver-diagonal" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-side">
<h5>rocsolver_side<a class="headerlink" href="#rocsolver-side" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-direct">
<h5>rocsolver_direct<a class="headerlink" href="#rocsolver-direct" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-storev">
<h5>rocsolver_storev<a class="headerlink" href="#rocsolver-storev" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-status">
<h5>rocsolver_status<a class="headerlink" href="#rocsolver-status" title="Permalink to this headline">¶</a></h5>
<p>These are functions that support more advanced Lapack routines.</p>
</div>
</div>
<div class="section" id="matrix-permutations-and-manipulations">
<h4>Matrix permutations and manipulations<a class="headerlink" href="#matrix-permutations-and-manipulations" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-type-laswp">
<h5>rocsolver_&lt;type&gt;laswp()<a class="headerlink" href="#rocsolver-type-laswp" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="householder-reflexions">
<h4>Householder reflexions<a class="headerlink" href="#householder-reflexions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-type-larfg">
<h5>rocsolver_&lt;type&gt;larfg()<a class="headerlink" href="#rocsolver-type-larfg" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-larft">
<h5>rocsolver_&lt;type&gt;larft()<a class="headerlink" href="#rocsolver-type-larft" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-larf">
<h5>rocsolver_&lt;type&gt;larf()<a class="headerlink" href="#rocsolver-type-larf" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-larfb">
<h5>rocsolver_&lt;type&gt;larfb()<a class="headerlink" href="#rocsolver-type-larfb" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="orthonormal-matrices">
<h4>Orthonormal matrices<a class="headerlink" href="#orthonormal-matrices" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-type-org2r">
<h5>rocsolver_&lt;type&gt;org2r()<a class="headerlink" href="#rocsolver-type-org2r" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-orgqr">
<h5>rocsolver_&lt;type&gt;orgqr()<a class="headerlink" href="#rocsolver-type-orgqr" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-orgl2">
<h5>rocsolver_&lt;type&gt;orgl2()<a class="headerlink" href="#rocsolver-type-orgl2" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-orglq">
<h5>rocsolver_&lt;type&gt;orglq()<a class="headerlink" href="#rocsolver-type-orglq" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-orgbr">
<h5>rocsolver_&lt;type&gt;orgbr()<a class="headerlink" href="#rocsolver-type-orgbr" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-orm2r">
<h5>rocsolver_&lt;type&gt;orm2r()<a class="headerlink" href="#rocsolver-type-orm2r" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-ormqr">
<h5>rocsolver_&lt;type&gt;ormqr()<a class="headerlink" href="#rocsolver-type-ormqr" title="Permalink to this headline">¶</a></h5>
<p>Lapack routines solve complex Numerical Linear Algebra problems.</p>
</div>
</div>
<div class="section" id="special-matrix-factorizations">
<h4>Special Matrix Factorizations<a class="headerlink" href="#special-matrix-factorizations" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-type-potf2">
<h5>rocsolver_&lt;type&gt;potf2()<a class="headerlink" href="#rocsolver-type-potf2" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-potf2-batched">
<h5>rocsolver_&lt;type&gt;potf2_batched()<a class="headerlink" href="#rocsolver-type-potf2-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-potf2-strided-batched">
<h5>rocsolver_&lt;type&gt;potf2_strided_batched()<a class="headerlink" href="#rocsolver-type-potf2-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-potrf">
<h5>rocsolver_&lt;type&gt;potrf()<a class="headerlink" href="#rocsolver-type-potrf" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-potrf-batched">
<h5>rocsolver_&lt;type&gt;potrf_batched()<a class="headerlink" href="#rocsolver-type-potrf-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-potrf-strided-batched">
<h5>rocsolver_&lt;type&gt;potrf_strided_batched()<a class="headerlink" href="#rocsolver-type-potrf-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="general-matrix-factorizations">
<h4>General Matrix Factorizations<a class="headerlink" href="#general-matrix-factorizations" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-type-getf2">
<h5>rocsolver_&lt;type&gt;getf2()<a class="headerlink" href="#rocsolver-type-getf2" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getf2-batched">
<h5>rocsolver_&lt;type&gt;getf2_batched()<a class="headerlink" href="#rocsolver-type-getf2-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getf2-strided-batched">
<h5>rocsolver_&lt;type&gt;getf2_strided_batched()<a class="headerlink" href="#rocsolver-type-getf2-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getrf">
<h5>rocsolver_&lt;type&gt;getrf()<a class="headerlink" href="#rocsolver-type-getrf" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getrf-batched">
<h5>rocsolver_&lt;type&gt;getrf_batched()<a class="headerlink" href="#rocsolver-type-getrf-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getrf-strided-batched">
<h5>rocsolver_&lt;type&gt;getrf_strided_batched()<a class="headerlink" href="#rocsolver-type-getrf-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-geqr2">
<h5>rocsolver_&lt;type&gt;geqr2()<a class="headerlink" href="#rocsolver-type-geqr2" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-geqr2-batched">
<h5>rocsolver_&lt;type&gt;geqr2_batched()<a class="headerlink" href="#rocsolver-type-geqr2-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-geqr2-strided-batched">
<h5>rocsolver_&lt;type&gt;geqr2_strided_batched()<a class="headerlink" href="#rocsolver-type-geqr2-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-geqrf">
<h5>rocsolver_&lt;type&gt;geqrf()<a class="headerlink" href="#rocsolver-type-geqrf" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-geqrf-batched">
<h5>rocsolver_&lt;type&gt;geqrf_batched()<a class="headerlink" href="#rocsolver-type-geqrf-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-geqrf-strided-batched">
<h5>rocsolver_&lt;type&gt;geqrf_strided_batched()<a class="headerlink" href="#rocsolver-type-geqrf-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-gelq2">
<h5>rocsolver_&lt;type&gt;gelq2()<a class="headerlink" href="#rocsolver-type-gelq2" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-gelq2-batched">
<h5>rocsolver_&lt;type&gt;gelq2_batched()<a class="headerlink" href="#rocsolver-type-gelq2-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-gelq2-strided-batched">
<h5>rocsolver_&lt;type&gt;gelq2_strided_batched()<a class="headerlink" href="#rocsolver-type-gelq2-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-gelqf">
<h5>rocsolver_&lt;type&gt;gelqf()<a class="headerlink" href="#rocsolver-type-gelqf" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-gelqf-batched">
<h5>rocsolver_&lt;type&gt;gelqf_batched()<a class="headerlink" href="#rocsolver-type-gelqf-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-gelqf-strided-batched">
<h5>rocsolver_&lt;type&gt;gelqf_strided_batched()<a class="headerlink" href="#rocsolver-type-gelqf-strided-batched" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="general-systems-solvers">
<h4>General systems solvers<a class="headerlink" href="#general-systems-solvers" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-type-getrs">
<h5>rocsolver_&lt;type&gt;getrs()<a class="headerlink" href="#rocsolver-type-getrs" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getrs-batched">
<h5>rocsolver_&lt;type&gt;getrs_batched()<a class="headerlink" href="#rocsolver-type-getrs-batched" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-type-getrs-strided-batched">
<h5>rocsolver_&lt;type&gt;getrs_strided_batched()<a class="headerlink" href="#rocsolver-type-getrs-strided-batched" title="Permalink to this headline">¶</a></h5>
<p>rocSOLVER auxiliary functions are aliases of rocBLAS auxiliary functions. See rocBLAS auxiliary functions
<a class="reference external" href="https://rocblas.readthedocs.io/en/latest/api.html#auxiliary">here</a>.</p>
</div>
</div>
<div class="section" id="rocsolver-handle-auxiliaries">
<h4>rocSOLVER handle auxiliaries<a class="headerlink" href="#rocsolver-handle-auxiliaries" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-create-handle">
<h5>rocsolver_create_handle()<a class="headerlink" href="#rocsolver-create-handle" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-destroy-handle">
<h5>rocsolver_destroy_handle()<a class="headerlink" href="#rocsolver-destroy-handle" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-add-stream">
<h5>rocsolver_add_stream()<a class="headerlink" href="#rocsolver-add-stream" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-set-stream">
<h5>rocsolver_set_stream()<a class="headerlink" href="#rocsolver-set-stream" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-get-stream">
<h5>rocsolver_get_stream()<a class="headerlink" href="#rocsolver-get-stream" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="other-auxiliaries">
<h4>Other auxiliaries<a class="headerlink" href="#other-auxiliaries" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rocsolver-set-vector">
<h5>rocsolver_set_vector()<a class="headerlink" href="#rocsolver-set-vector" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-get-vector">
<h5>rocsolver_get_vector()<a class="headerlink" href="#rocsolver-get-vector" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-set-matrix">
<h5>rocsolver_set_matrix()<a class="headerlink" href="#rocsolver-set-matrix" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="rocsolver-get-matrix">
<h5>rocsolver_get_matrix()<a class="headerlink" href="#rocsolver-get-matrix" title="Permalink to this headline">¶</a></h5>
</div>
</div>
</div>
</div>
<div class="section" id="hipsparse">
<h2>hipSPARSE<a class="headerlink" href="#hipsparse" title="Permalink to this headline">¶</a></h2>
<p>hipSPARSE is a SPARSE marshalling library, with multiple supported backends. It sits between the application and a ‘worker’ SPARSE library, marshalling inputs into the backend library and marshalling results back to the application. hipSPARSE exports an interface that does not require the client to change, regardless of the chosen backend. Currently, hipSPARSE supports <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id51">rocSPARSE</a> and <a class="reference external" href="https://developer.nvidia.com/cusparse">cuSPARSE</a> as backends. Refer the hipSparse wiki page <a class="reference internal" href="hipsparse_wiki.html#hipsparsewiki"><span class="std std-ref">Building hipSPARSE</span></a></p>
<div class="section" id="id50">
<h3>Installing pre-built packages<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<p>Download pre-built packages either from <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/Installation_Guide/Installation-Guide.html#rocm-binary-package-structure">ROCm’s package servers</a> or by clicking the github releases tab and manually downloading, which could be newer. Release notes are available for each release on the releases tab.</p>
<blockquote>
<div><ul class="simple">
<li><p>sudo apt update &amp;&amp; sudo apt install hipsparse</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="quickstart-hipsparse-build">
<h3>Quickstart hipSPARSE build<a class="headerlink" href="#quickstart-hipsparse-build" title="Permalink to this headline">¶</a></h3>
<p><strong>Bash helper build script (Ubuntu only)</strong></p>
<p>The root of this repository has a helper bash script install.sh to build and install hipSPARSE on Ubuntu with a single command. It does not take a lot of options and hard-codes configuration that can be specified through invoking cmake directly, but it’s a great way to get started quickly and can serve as an example of how to build/install. A few commands in the script need sudo access, so it may prompt you for a password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">install</span> <span class="o">-</span><span class="n">h</span> <span class="o">--</span> <span class="n">shows</span> <span class="n">help</span>
<span class="o">./</span><span class="n">install</span> <span class="o">-</span><span class="nb">id</span> <span class="o">--</span> <span class="n">build</span> <span class="n">library</span><span class="p">,</span> <span class="n">build</span> <span class="n">dependencies</span> <span class="ow">and</span> <span class="n">install</span> <span class="p">(</span><span class="o">-</span><span class="n">d</span> <span class="n">flag</span> <span class="n">only</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">passed</span> <span class="n">once</span> <span class="n">on</span> <span class="n">a</span> <span class="n">system</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id52">
<h3>Manual build (all supported platforms)<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<p>If you use a distro other than Ubuntu, or would like more control over the build process, the <span class="xref std std-ref">hipsbuild</span> build wiki has helpful information on how to configure cmake and manually build.</p>
</div>
<div class="section" id="functions-supported">
<h3>Functions supported<a class="headerlink" href="#functions-supported" title="Permalink to this headline">¶</a></h3>
<p>A list of <a class="reference internal" href="hipsparse_wiki.html#export"><span class="std std-ref">Exported sparse BLAS functions</span></a> from hipSPARSE can be found on the wiki.</p>
</div>
<div class="section" id="hipsparse-interface-examples">
<h3>hipSPARSE interface examples<a class="headerlink" href="#hipsparse-interface-examples" title="Permalink to this headline">¶</a></h3>
<p>The hipSPARSE interface is compatible with rocSPARSE and cuSPARSE-v2 APIs. Porting a CUDA application which originally calls the cuSPARSE API to an application calling hipSPARSE API should be relatively straightforward. For example, the hipSPARSE SCSRMV interface is</p>
</div>
<div class="section" id="csrmv-api">
<h3>CSRMV API<a class="headerlink" href="#csrmv-api" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hipsparseStatus_t</span>
<span class="n">hipsparseScsrmv</span><span class="p">(</span><span class="n">hipsparseHandle_t</span> <span class="n">handle</span><span class="p">,</span>
              <span class="n">hipsparseOperation_t</span> <span class="n">transA</span><span class="p">,</span>
              <span class="nb">int</span> <span class="n">m</span><span class="p">,</span> <span class="nb">int</span> <span class="n">n</span><span class="p">,</span> <span class="nb">int</span> <span class="n">nnz</span><span class="p">,</span> <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">alpha</span><span class="p">,</span>
              <span class="n">const</span> <span class="n">hipsparseMatDescr_t</span> <span class="n">descrA</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">csrValA</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">int</span> <span class="o">*</span><span class="n">csrRowPtrA</span><span class="p">,</span> <span class="n">const</span> <span class="nb">int</span> <span class="o">*</span><span class="n">csrColIndA</span><span class="p">,</span>
              <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">const</span> <span class="nb">float</span> <span class="o">*</span><span class="n">beta</span><span class="p">,</span>
              <span class="nb">float</span> <span class="o">*</span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>hipSPARSE assumes matrix A and vectors x, y are allocated in GPU memory space filled with data. Users are responsible for copying data from/to the host and device memory.</p>
</div>
</div>
<div class="section" id="rocalution">
<h2>rocALUTION<a class="headerlink" href="#rocalution" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id53">
<h3>Introduction<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>rocALUTION is a sparse linear algebra library with focus on exploring fine-grained parallelism, targeting modern processors and accelerators including multi/many-core CPU and GPU platforms. The main goal of this package is to provide a portable library for iterative sparse methods on state of the art hardware. rocALUTION can be seen as middle-ware between different parallel backends and application specific packages.</p>
<p>The major features and characteristics of the library are</p>
<ul class="simple">
<li><dl class="simple">
<dt>Various backends</dt><dd><ul>
<li><p>Host - fallback backend, designed for CPUs</p></li>
<li><p>GPU/HIP - accelerator backend, designed for HIP capable AMD GPUs</p></li>
<li><p>OpenMP - designed for multi-core CPUs</p></li>
<li><p>MPI - designed for multi-node and multi-GPU configurations</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Easy to use</dt><dd><p>The syntax and structure of the library provide easy learning curves. With the help of the examples, anyone can try out the library - no knowledge in HIP, OpenMP or MPI programming required.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>No special hardware requirements</dt><dd><p>There are no hardware requirements to install and run rocALUTION. If a GPU device and HIP is available, the library will use them.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Variety of iterative solvers</dt><dd><ul>
<li><p>Fixed-Point iteration - Jacobi, Gauss-Seidel, Symmetric-Gauss Seidel, SOR and SSOR</p></li>
<li><p>Krylov subspace methods - CR, CG, BiCGStab, BiCGStab(l), GMRES, IDR, QMRCGSTAB, Flexible CG/GMRES</p></li>
<li><p>Mixed-precision defect-correction scheme</p></li>
<li><p>Chebyshev iteration</p></li>
<li><p>Multiple MultiGrid schemes, geometric and algebraic</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Various preconditioners</dt><dd><ul>
<li><p>Matrix splitting - Jacobi, (Multi-colored) Gauss-Seidel, Symmetric Gauss-Seidel, SOR, SSOR</p></li>
<li><p>Factorization - ILU(0), ILU(p) (based on levels), ILU(p,q) (power(q)-pattern method), Multi-Elimination ILU (nested/recursive), ILUT (based on threshold) and IC(0)</p></li>
<li><p>Approximate Inverse - Chebyshev matrix-valued polynomial, SPAI, FSAI and TNS</p></li>
<li><p>Diagonal-based preconditioner for Saddle-point problems</p></li>
<li><p>Block-type of sub-preconditioners/solvers</p></li>
<li><p>Additive Schwarz and Restricted Additive Schwarz</p></li>
<li><p>Variable type preconditioners</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Generic and robust design</dt><dd><p>rocALUTION is based on a generic and robust design allowing expansion in the direction of new solvers and preconditioners and support for various hardware types. Furthermore, the design of the library allows the use of all solvers as preconditioners in other solvers. For example you can easily define a CG solver with a Multi-Elimination preconditioner, where the last-block is preconditioned with another Chebyshev iteration method which is preconditioned with a multi-colored Symmetric Gauss-Seidel scheme.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Portable code and results</dt><dd><p>All code based on rocALUTION is portable and independent of HIP or OpenMP. The code will compile and run everywhere. All solvers and preconditioners are based on a single source code, which delivers portable results across all supported backends (variations are possible due to different rounding modes on the hardware). The only difference which you can see for a hardware change is the performance variation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Support for several sparse matrix formats</dt><dd><p>Compressed Sparse Row (CSR), Modified Compressed Sparse Row (MCSR), Dense (DENSE), Coordinate (COO), ELL, Diagonal (DIA), Hybrid format of ELL and COO (HYB).</p>
</dd>
</dl>
</li>
</ul>
<p>The code is open-source under MIT license and hosted on here: <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocALUTION">https://github.com/ROCmSoftwarePlatform/rocALUTION</a></p>
</div>
<div class="section" id="id54">
<h3>Building and Installing<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="installing-from-amd-rocm-repositories">
<h3>Installing from AMD ROCm repositories<a class="headerlink" href="#installing-from-amd-rocm-repositories" title="Permalink to this headline">¶</a></h3>
<p>rocALUTION can be installed from <a class="reference external" href="https://rocm.github.io/ROCmInstall.html#installing-from-amd-rocm-repositories">AMD ROCm repository</a>. The repository hosts the single-node, accelerator enabled version of the library. If a different setup is required, e.g. multi-node support, rocALUTION need to be built from source, see <a class="reference external" href="https://rocalution.readthedocs.io/en/master/install.html#rocalution-building">Building from GitHub repository</a>.</p>
<p>For detailed instructions on how to set up ROCm on different platforms, see the <a class="reference external" href="https://rocm.github.io/ROCmInstall.html">AMD ROCm Platform Installation Guide for Linux</a>.</p>
<p>rocALUTION has the following run-time dependencies</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/RadeonOpenCompute/ROCm">AMD ROCm</a> 3.0 or later (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocSPARSE">rocSPARSE</a> (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocBLAS">rocBLAS</a> (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://www.openmp.org/">OpenMP</a> (optional, for OpenMP support)</p></li>
<li><p><a class="reference external" href="https://www.mcs.anl.gov/research/projects/mpi/">MPI</a> (optional, for multi-node / multi-GPU support)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="building-rocalution-from-github-repository">
<h3>Building rocALUTION from Github repository<a class="headerlink" href="#building-rocalution-from-github-repository" title="Permalink to this headline">¶</a></h3>
<p>To build rocALUTION from source, the following compile-time and run-time dependencies must be met</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://git-scm.com/">git</a></p></li>
<li><p>‘CMake &lt;<a class="reference external" href="https://cmake.org/">https://cmake.org/</a>&gt;`_ 3.5 or later</p></li>
<li><p><a class="reference external" href="https://github.com/RadeonOpenCompute/ROCm">AMD ROCm</a> 3.0 or later (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocSPARSE">rocSPARSE</a> (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocBLAS">rocBLAS</a> (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocPRIM">rocPRIM</a> (optional, for HIP support)</p></li>
<li><p><a class="reference external" href="https://www.openmp.org/">OpenMP</a> (optional, for OpenMP support)</p></li>
<li><p><a class="reference external" href="https://www.mcs.anl.gov/research/projects/mpi/">MPI</a> (optional, for multi-node / multi-GPU support)</p></li>
<li><p><a class="reference external" href="https://github.com/google/googletest">googletest</a> (optional, for clients)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="download-rocalution">
<h3>Download rocALUTION<a class="headerlink" href="#download-rocalution" title="Permalink to this headline">¶</a></h3>
<p>The rocALUTION source code is available at the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocALUTION">rocALUTION github page</a>.
Download the master branch using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">-</span><span class="n">b</span> <span class="n">master</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">rocALUTION</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">rocALUTION</span>
</pre></div>
</div>
<p>Below are steps to build different packages of the library, including dependencies and clients.
It is recommended to install rocALUTION using the <em>install.sh</em> script.</p>
</div>
<div class="section" id="using-install-sh-to-build-dependencies-library">
<h3>Using <em>install.sh</em> to build dependencies + library<a class="headerlink" href="#using-install-sh-to-build-dependencies-library" title="Permalink to this headline">¶</a></h3>
<p>The following table lists common uses of <em>install.sh</em> to build dependencies + library. Accelerator support via HIP and OpenMP will be enabled by default, whereas MPI is disabled.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>./install.sh -h</cite></p></td>
<td><p>Print help information.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -d</cite></p></td>
<td><p>Build dependencies and library in your local directory. The <cite>-d</cite> flag only needs to be <a href="#id131"><span class="problematic" id="id132">|br|</span></a> used once. For subsequent invocations of <em>install.sh</em> it is not necessary to rebuild the <a href="#id133"><span class="problematic" id="id134">|br|</span></a> dependencies.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh</cite></p></td>
<td><p>Build library in your local directory. It is assumed dependencies are available.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -i</cite></p></td>
<td><p>Build library, then build and install rocALUTION package in <cite>/opt/rocm/rocalution</cite>. You will <a href="#id135"><span class="problematic" id="id136">|br|</span></a> be prompted for sudo access. This will install for all users.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh –host</cite></p></td>
<td><p>Build library in your local directory without HIP support. It is assumed dependencies <a href="#id137"><span class="problematic" id="id138">|br|</span></a> are available.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh –mpi</cite></p></td>
<td><p>Build library in your local directory with HIP and MPI support. It is assumed <a href="#id139"><span class="problematic" id="id140">|br|</span></a> dependencies are available.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-install-sh-to-build-dependencies-library-client">
<h3>Using <em>install.sh</em> to build dependencies + library + client<a class="headerlink" href="#using-install-sh-to-build-dependencies-library-client" title="Permalink to this headline">¶</a></h3>
<p>The client contains example code, unit tests and benchmarks. Common uses of <em>install.sh</em> to build them are listed in the table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>./install.sh -h</cite></p></td>
<td><p>Print help information.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -dc</cite></p></td>
<td><p>Build dependencies, library and client in your local directory. The <cite>-d</cite> flag only needs to <a href="#id141"><span class="problematic" id="id142">|br|</span></a> be used once. For subsequent invocations of <em>install.sh</em> it is not necessary to rebuild the <a href="#id143"><span class="problematic" id="id144">|br|</span></a> dependencies.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh -c</cite></p></td>
<td><p>Build library and client in your local directory. It is assumed dependencies are available.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>./install.sh -idc</cite></p></td>
<td><p>Build library, dependencies and client, then build and install rocALUTION package in <a href="#id145"><span class="problematic" id="id146">|br|</span></a> <cite>/opt/rocm/rocalution</cite>. You will be prompted for sudo access. This will install for all users.</p></td>
</tr>
<tr class="row-even"><td><p><cite>./install.sh -ic</cite></p></td>
<td><p>Build library and client, then build and install rocALUTION package in <a href="#id147"><span class="problematic" id="id148">|br|</span></a> <cite>opt/rocm/rocalution</cite>. You will be prompted for sudo access. This will install for all users.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="using-individual-commands-to-build-rocalution">
<h3>Using individual commands to build rocALUTION<a class="headerlink" href="#using-individual-commands-to-build-rocalution" title="Permalink to this headline">¶</a></h3>
<p>CMake 3.5 or later is required in order to build rocALUTION without the use of install.sh.</p>
<p>rocALUTION can be built with cmake using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Create and change to build directory
mkdir -p build/release ; cd build/release

# Default install path is /opt/rocm, use -DCMAKE_INSTALL_PREFIX=&lt;path&gt; to adjust it
# Configure rocALUTION
# Build options:
#   SUPPORT_HIP    - build rocALUTION with HIP support (ON)
#   SUPPORT_OMP    - build rocALUTION with OpenMP support (ON)
#   SUPPORT_MPI    - build rocALUTION with MPI (multi-node) support (OFF)
#   BUILD_SHARED   - build rocALUTION as shared library (ON, recommended)
#   BUILD_EXAMPLES - build rocALUTION examples (ON)

cmake ../.. -DSUPPORT_HIP=ON \
            -DSUPPORT_MPI=OFF \
            -DSUPPORT_OMP=ON

# Compile rocALUTION library
make -j$(nproc)

# Install rocALUTION to /opt/rocm
sudo make install
</pre></div>
</div>
<p>GoogleTest is required in order to build rocALUTION client.</p>
<p>rocALUTION with dependencies and client can be built using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Install googletest
mkdir -p build/release/deps ; cd build/release/deps
cmake ../../../deps
sudo make -j$(nproc) install

# Change to build directory
cd ..

# Default install path is /opt/rocm, use -DCMAKE_INSTALL_PREFIX=&lt;path&gt; to adjust it
cmake ../.. -DBUILD_CLIENTS_TESTS=ON \
            -DBUILD_CLIENTS_SAMPLES=ON

# Compile rocALUTION library
make -j$(nproc)

# Install rocALUTION to /opt/rocm
sudo make install
</pre></div>
</div>
<p>The compilation process produces a shared library file <em>librocalution.so</em> and <em>librocalution_hip.so</em> if HIP support is enabled. Ensure that the library objects can be found in your library path. If you do not copy the library to a specific location you can add the path under Linux in the <em>LD_LIBRARY_PATH</em> variable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:&lt;path_to_rocalution&gt;
</pre></div>
</div>
</div>
<div class="section" id="id62">
<h3>Common build problems<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p><strong>Issue:</strong> HIP (/opt/rocm/hip) was built using hcc 1.0.xxx-xxx-xxx-xxx, but you are using /opt/rocm/bin/hcc with version 1.0.yyy-yyy-yyy-yyy from hipcc (version mismatch). Please rebuild HIP including cmake or update HCC_HOME variable.</p>
<p><strong>Solution:</strong> Download HIP from github and use hcc to <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP/blob/master/INSTALL.md">build from source</a> and then use the built HIP instead of /opt/rocm/hip.</p>
</li>
<li><p><strong>Issue:</strong> HCC RUNTIME ERROR: Failed to find compatible kernel</p>
<p><strong>Solution:</strong> export HCC_AMDGPU_TARGET=gfx803,gfx900,gfx906,gfx908</p>
</li>
<li><dl class="simple">
<dt><strong>Issue:</strong> Could not find a package configuration file provided by “ROCM” with any of the following names:</dt><dd><p>ROCMConfig.cmake <a href="#id149"><span class="problematic" id="id150">|br|</span></a>
rocm-config.cmake</p>
</dd>
</dl>
<p><strong>Solution:</strong> Install <a class="reference external" href="https://github.com/RadeonOpenCompute/rocm-cmake">ROCm cmake modules</a> either from source or from <a class="reference external" href="https://rocm.github.io/ROCmInstall.html#installing-from-amd-rocm-repositories">AMD ROCm repository</a></p>
</li>
<li><dl class="simple">
<dt><strong>Issue:</strong> Could not find a package configuration file provided by “ROCSPARSE” with any of the following names:</dt><dd><p>ROCSPARSE.cmake <a href="#id151"><span class="problematic" id="id152">|br|</span></a>
rocsparse-config.cmake</p>
</dd>
</dl>
<p><strong>Solution:</strong> Install <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocSPARSE">rocSPARSE</a> either from source or from ‘AMD ROCm repository &lt;<a class="reference external" href="https://rocm.github.io/ROCmInstall.html#installing-from-amd-rocm-repositories">https://rocm.github.io/ROCmInstall.html#installing-from-amd-rocm-repositories</a>&gt;`_</p>
</li>
<li><dl class="simple">
<dt><strong>Issue:</strong> Could not find a package configuration file provided by “ROCBLAS” with any of the following names:</dt><dd><p>ROCBLAS.cmake <a href="#id153"><span class="problematic" id="id154">|br|</span></a>
rocblas-config.cmake</p>
</dd>
</dl>
<p><strong>Solution:</strong> Install <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocBLAS">rocBLAS</a> either from source or from ‘AMD ROCm repository &lt;<a class="reference external" href="https://rocm.github.io/ROCmInstall.html#installing-from-amd-rocm-repositories">https://rocm.github.io/ROCmInstall.html#installing-from-amd-rocm-repositories</a>&gt;`_</p>
</li>
</ol>
</div>
<div class="section" id="id68">
<h3>Simple Test<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<p>You can test the installation by running a CG solver on a Laplace matrix. After compiling the library you can perform the CG solver test by executing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">rocALUTION</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">examples</span>

<span class="n">wget</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">math</span><span class="o">.</span><span class="n">nist</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">pub</span><span class="o">/</span><span class="n">MatrixMarket2</span><span class="o">/</span><span class="n">Harwell</span><span class="o">-</span><span class="n">Boeing</span><span class="o">/</span><span class="n">laplace</span><span class="o">/</span><span class="n">gr_30_30</span><span class="o">.</span><span class="n">mtx</span><span class="o">.</span><span class="n">gz</span>
<span class="n">gzip</span> <span class="o">-</span><span class="n">d</span> <span class="n">gr_30_30</span><span class="o">.</span><span class="n">mtx</span><span class="o">.</span><span class="n">gz</span>

<span class="o">./</span><span class="n">clients</span><span class="o">/</span><span class="n">staging</span><span class="o">/</span><span class="n">cg</span> <span class="n">gr_30_30</span><span class="o">.</span><span class="n">mtx</span>
</pre></div>
</div>
<p>For more information regarding rocALUTION library and corresponding API documentation, refer
<a class="reference external" href="https://rocalution.readthedocs.io/en/latest/library.html">rocALUTION</a></p>
</div>
<div class="section" id="id70">
<h3>API<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<p>This section provides details of the library API</p>
<div class="section" id="host-utility-functions">
<h4>Host Utility Functions<a class="headerlink" href="#host-utility-functions" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="backend-manager">
<h4>Backend Manager<a class="headerlink" href="#backend-manager" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="base-rocalution">
<h4>Base Rocalution<a class="headerlink" href="#base-rocalution" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="operator">
<h4>Operator<a class="headerlink" href="#operator" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="vector">
<h4>Vector<a class="headerlink" href="#vector" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="local-matrix">
<h4>Local Matrix<a class="headerlink" href="#local-matrix" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="local-stencil">
<h4>Local Stencil<a class="headerlink" href="#local-stencil" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="global-matrix">
<h4>Global Matrix<a class="headerlink" href="#global-matrix" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="local-vector">
<h4>Local Vector<a class="headerlink" href="#local-vector" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="global-vector">
<h4>Global Vector<a class="headerlink" href="#global-vector" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="parallel-manager">
<h4>Parallel Manager<a class="headerlink" href="#parallel-manager" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="solvers">
<h4>Solvers<a class="headerlink" href="#solvers" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="preconditioners">
<h4>Preconditioners<a class="headerlink" href="#preconditioners" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="tensile">
<h2>Tensile<a class="headerlink" href="#tensile" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id71">
<h3>Introduction<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<p>Tensile is a <strong>tool</strong> for creating a benchmark-driven backend library for GEMMs, GEMM-like problems (such as batched GEMM), N-dimensional tensor contractions, and anything else that multiplies two multi-dimensional objects together on a AMD GPU.</p>
<p>Overview for creating a custom TensileLib backend library for your application:</p>
<ol class="arabic">
<li><p>Install the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#dependencies">PyYAML and cmake dependency</a> (mandatory), <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">and</span> <span class="pre">cd</span> <span class="pre">Tensile</span></code></p></li>
<li><p>Create a <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#benchmark-config-example">benchmark config.yaml</a> file in <code class="docutils literal notranslate"><span class="pre">./Tensile/Configs/</span></code></p></li>
<li><p><a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id39">Run the benchmark</a>. After the benchmark is finished. Tensile will dump 4 directories: 1 &amp; 2 is about benchmarking. 3 &amp; 4 is the summarized results from your library (like rocBLAS) viewpoints.</p>
<blockquote>
<div><p>1_BenchmarkProblems: has all the problems descriptions and executables generated during benchmarking, where you can re-launch exe to reproduce results.</p>
<p>2_BenchmarkData: has the raw performance results.</p>
<p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/Tensile/wiki/Library-Logic">3_LibraryLogic</a>:  has optimal kernel configurations yaml file and Winner*.csv. Usually rocBLAS takes the yaml files from this folder.</p>
<p>4_LibraryClient: has a client exe, so you can launch from a library viewpoint.</p>
</div></blockquote>
</li>
<li><p>Add the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#tensile-lib">Tensile library</a> to your application’s CMake target. The Tensile library will be written, compiled and linked to your application at application-compile-time.</p>
<blockquote>
<div><ul class="simple">
<li><p>GPU kernels, written in <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#languages">HIP, OpenCL, or AMD GCN assembly</a>.</p></li>
<li><p>Solution classes which enqueue the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id43">kernels</a>.</p></li>
<li><p><a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#tensile-lib">APIs</a> which call the fastest solution for a problem.</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<div class="section" id="quick-example-ubuntu">
<h4>Quick Example (Ubuntu):<a class="headerlink" href="#quick-example-ubuntu" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">yaml</span>
<span class="n">mkdir</span> <span class="n">Tensile</span>
<span class="n">cd</span> <span class="n">Tensile</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">Tensile</span> <span class="n">repo</span>
<span class="n">cd</span> <span class="n">repo</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="n">python</span> <span class="o">../</span><span class="n">Tensile</span><span class="o">/</span><span class="n">Tensile</span><span class="o">.</span><span class="n">py</span> <span class="o">../</span><span class="n">Tensile</span><span class="o">/</span><span class="n">Configs</span><span class="o">/</span><span class="n">test_sgemm</span><span class="o">.</span><span class="n">yaml</span> <span class="o">./</span>
</pre></div>
</div>
<p>After about 10 minutes of benchmarking, Tensile will print out the path to the client you can run.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">4</span><span class="n">_LibraryClient</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">client</span> <span class="o">-</span><span class="n">h</span>
<span class="o">./</span><span class="mi">4</span><span class="n">_LibraryClient</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">client</span> <span class="o">--</span><span class="n">sizes</span> <span class="mi">5760</span> <span class="mi">5760</span> <span class="mi">1</span> <span class="mi">5760</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="benchmark-config-example">
<h3>Benchmark Config example<a class="headerlink" href="#benchmark-config-example" title="Permalink to this headline">¶</a></h3>
<p>Tensile uses an incremental and “programmable” <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id39">benchmarking protocol</a>.</p>
<div class="section" id="example-benchmark-config-yaml-as-input-file-to-tensile">
<h4>Example Benchmark config.yaml as input file to Tensile<a class="headerlink" href="#example-benchmark-config-yaml-as-input-file-to-tensile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GlobalParameters</span><span class="p">:</span>
  <span class="n">PrintLevel</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">ForceRedoBenchmarkProblems</span><span class="p">:</span> <span class="kc">False</span>
  <span class="n">ForceRedoLibraryLogic</span><span class="p">:</span> <span class="kc">True</span>
  <span class="n">ForceRedoLibraryClient</span><span class="p">:</span> <span class="kc">True</span>
  <span class="n">CMakeBuildType</span><span class="p">:</span> <span class="n">Release</span>
  <span class="n">EnqueuesPerSync</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">SyncsPerBenchmark</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">LibraryPrintDebug</span><span class="p">:</span> <span class="kc">False</span>
  <span class="n">NumElementsToValidate</span><span class="p">:</span> <span class="mi">128</span>
  <span class="n">ValidationMaxToPrint</span><span class="p">:</span> <span class="mi">16</span>
  <span class="n">ValidationPrintValids</span><span class="p">:</span> <span class="kc">False</span>
  <span class="n">ShortNames</span><span class="p">:</span> <span class="kc">False</span>
  <span class="n">MergeFiles</span><span class="p">:</span> <span class="kc">True</span>
  <span class="n">PlatformIdx</span><span class="p">:</span> <span class="mi">0</span>
  <span class="n">DeviceIdx</span><span class="p">:</span> <span class="mi">0</span>
  <span class="n">DataInitTypeAB</span><span class="p">:</span> <span class="mi">0</span>

<span class="n">BenchmarkProblems</span><span class="p">:</span>
  <span class="o">-</span> <span class="c1"># sgemm NN</span>
    <span class="o">-</span> <span class="c1"># ProblemType</span>
      <span class="n">OperationType</span><span class="p">:</span> <span class="n">GEMM</span>
      <span class="n">DataType</span><span class="p">:</span> <span class="n">s</span>
      <span class="n">TransposeA</span><span class="p">:</span> <span class="kc">False</span>
      <span class="n">TransposeB</span><span class="p">:</span> <span class="kc">False</span>
      <span class="n">UseBeta</span><span class="p">:</span> <span class="kc">True</span>
      <span class="n">Batched</span><span class="p">:</span> <span class="kc">True</span>

    <span class="o">-</span> <span class="c1"># BenchmarkProblemSizeGroup</span>
      <span class="n">InitialSolutionParameters</span><span class="p">:</span>
      <span class="n">BenchmarkCommonParameters</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">ProblemSizes</span><span class="p">:</span>
          <span class="o">-</span> <span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">5760</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span> <span class="p">]</span>
        <span class="o">-</span> <span class="n">LoopDoWhile</span><span class="p">:</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">NumLoadsCoalescedA</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">NumLoadsCoalescedB</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">WorkGroupMapping</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="n">ForkParameters</span><span class="p">:</span>
         <span class="o">-</span> <span class="n">ThreadTile</span><span class="p">:</span>
         <span class="o">-</span> <span class="p">[</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span> <span class="p">]</span>
         <span class="o">-</span> <span class="p">[</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span> <span class="p">]</span>
         <span class="o">-</span> <span class="p">[</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]</span>
        <span class="o">-</span> <span class="n">WorkGroup</span><span class="p">:</span>
          <span class="o">-</span> <span class="p">[</span>  <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span>  <span class="mi">1</span> <span class="p">]</span>
          <span class="o">-</span> <span class="p">[</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span>  <span class="mi">1</span> <span class="p">]</span>
        <span class="o">-</span> <span class="n">LoopTail</span><span class="p">:</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">EdgeType</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;None&quot;</span><span class="p">,</span> <span class="s2">&quot;Branch&quot;</span><span class="p">,</span> <span class="s2">&quot;ShiftPtr&quot;</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">DepthU</span><span class="p">:</span> <span class="p">[</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
        <span class="o">-</span> <span class="n">VectorWidth</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
      <span class="n">BenchmarkForkParameters</span><span class="p">:</span>
      <span class="n">JoinParameters</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">MacroTile</span>
      <span class="n">BenchmarkJoinParameters</span><span class="p">:</span>
      <span class="n">BenchmarkFinalParameters</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">ProblemSizes</span><span class="p">:</span>
          <span class="o">-</span> <span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">5760</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span> <span class="p">]</span>

<span class="n">LibraryLogic</span><span class="p">:</span>

<span class="n">LibraryClient</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="structure-of-config-yaml">
<h4>Structure of config.yaml<a class="headerlink" href="#structure-of-config-yaml" title="Permalink to this headline">¶</a></h4>
<p>Top level data structure whose keys are <strong>Parameters, BenchmarkProblems, LibraryLogic</strong> and <strong>LibraryClient</strong>.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Parameters</strong> contains a dictionary storing global parameters used for all parts of the benchmarking.</p></li>
<li><p><strong>BenchmarkProblems</strong> contains a list of dictionaries representing the benchmarks to conduct; each element, i.e. dictionary, in the list is for benchmarking a single <strong>ProblemType</strong>. The keys for these dictionaries are <strong>ProblemType, InitialSolutionParameters,                 BenchmarkCommonParameters, ForkParameters, BenchmarkForkParameters, JoinParameters, BenchmarkJoinParameters</strong> and                       <strong>BenchmarkFinalParameters</strong>. See <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id39">Benchmark Protocol</a> for more information on these steps.</p></li>
<li><p><strong>LibraryLogic</strong> contains a dictionary storing parameters for analyzing the benchmark data and designing how the backend library will select which Solution for certain ProblemSizes.</p></li>
<li><p><strong>LibraryClient</strong> contains a dictionary storing parameters for actually creating the library and creating a client which calls into the library.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="global-parameters">
<h4>Global Parameters<a class="headerlink" href="#global-parameters" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><strong>Name:</strong> Prefix to add to API function names; typically name of device.</p></li>
<li><p><strong>MinimumRequiredVersion:</strong> Which version of Tensile is required to interpret this yaml file</p></li>
<li><p><strong>RuntimeLanguage:</strong> Use HIP or OpenCL runtime.</p></li>
<li><p><strong>KernelLanguage:</strong> For OpenCL runtime, kernel language must be set to OpenCL. For HIP runtime, kernel language can be set to HIP or assembly (gfx803, gfx900).</p></li>
<li><p><strong>PrintLevel:</strong> 0=Tensile prints nothing, 1=prints some, 2=prints a lot.</p></li>
<li><p><strong>ForceRedoBenchmarkProblems:</strong> False means don’t redo a benchmark phase if results for it already exist.</p></li>
<li><p><strong>ForceRedoLibraryLogic:</strong> False means don’t re-generate library logic if it already exist.</p></li>
<li><p><strong>ForceRedoLibraryClient:</strong> False means don’t re-generate library client if it already exist.</p></li>
<li><p><strong>CMakeBuildType:</strong> Release or Debug</p></li>
<li><p><strong>EnqueuesPerSync:</strong> Num enqueues before syncing the queue.</p></li>
<li><p><strong>SyncsPerBenchmark:</strong> Num queue syncs for each problem size.</p></li>
<li><p><strong>LibraryPrintDebug:</strong> True means Tensile solutions will print kernel enqueue info to stdout</p></li>
<li><p><strong>NumElementsToValidate:</strong> Number of elements to validate; 0 means no validation.</p></li>
<li><p><strong>ValidationMaxToPrint:</strong> How many invalid results to print.</p></li>
<li><p><strong>ValidationPrintValids:</strong> True means print validation comparisons that are valid, not just invalids.</p></li>
<li><p><strong>ShortNames:</strong> Convert long kernel, solution and files names to short serial ids.</p></li>
<li><p><strong>MergeFiles:</strong> False means write each solution and kernel to its own file.</p></li>
<li><p><strong>PlatformIdx:</strong> OpenCL platform id.</p></li>
<li><p><strong>DeviceIdx:</strong> OpenCL or HIP device id.</p></li>
<li><p><strong>DataInitType[AB,C]:</strong> Initialize validation data with 0=0’s, 1=1’s, 2=serial, 3=random.</p></li>
<li><p><strong>KernelTime:</strong> Use kernel time reported from runtime rather than api times from cpu clocks to compare kernel performance.</p></li>
</ul>
<p>The exhaustive list of global parameters and their defaults is stored in Common.py.</p>
</div>
<div class="section" id="problem-type-parameters">
<h4>Problem Type Parameters<a class="headerlink" href="#problem-type-parameters" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><strong>OperationType</strong>: GEMM or TensorContraction.</p></li>
<li><p><strong>DataType:</strong> s, d, c, z, h</p></li>
<li><p><strong>UseBeta:</strong> False means library/solutions/kernel won’t accept a beta parameter; thus beta=0.</p></li>
<li><p><strong>UseInitialStrides:</strong> False means data is contiguous in memory.</p></li>
<li><p><strong>HighPrecisionAccumulate:</strong> For tmpC += a*b, use twice the precision for tmpC as for DataType. Not yet implemented.</p></li>
<li><p><strong>ComplexConjugateA:</strong> True or False; ignored for real precision.</p></li>
<li><p><strong>ComplexConjugateB:</strong> True or False; ignored for real precision.</p></li>
</ul>
<p>For OperationType=GEMM only:</p>
<ul class="simple">
<li><p><strong>TransposeA:</strong> True or False.</p></li>
<li><p><strong>TransposeB:</strong> True or False.</p></li>
<li><p><strong>Batched:</strong> True (False has been deprecated). For OperationType=TensorContraction only (showing batched gemm NT: C[ijk] = Sum[l] A[ilk] * B[jlk])</p></li>
<li><p><strong>IndexAssignmentsA:</strong> [0, 3, 2]</p></li>
<li><p><strong>IndexAssignmentsB:</strong> [1, 3, 2]</p></li>
<li><p><strong>NumDimensionsC:</strong> 3.</p></li>
</ul>
</div>
<div class="section" id="solution-kernel-parameters">
<h4>Solution / Kernel Parameters<a class="headerlink" href="#solution-kernel-parameters" title="Permalink to this headline">¶</a></h4>
<p>See: <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id43">Kernel Parameters</a>.</p>
</div>
<div class="section" id="defaults">
<h4>Defaults<a class="headerlink" href="#defaults" title="Permalink to this headline">¶</a></h4>
<p>Because of the flexibility / complexity of the benchmarking process and, therefore, of the config.yaml files; Tensile has a default value for every parameter. If you neglect to put LoopUnroll anywhere in your benchmark, rather than crashing or complaining, Tensile will put the default LoopUnroll options into the default phase (common, fork, join…). This guarantees ease of use and more importantly backward compatibility; every time we add a new possible solution parameter, you don’t necessarily need to update your configs; we’ll have a default figured out for you.</p>
<p>However, this may cause some confusion. If your config fork 2 parameters, but you see that 3 were forked during benchmarking, that’s because you didn’t specify the 3rd parameter anywhere, so Tensile stuck it in its default phase, which was forking (for example). Also, specifying ForkParameters: and leaving it empty isn’t the same as leaving JoinParameter out of your config. If you leave ForkParameters out of your config, Tensile will add a ForkParameters step and put the default parameters into it (unless you put all the parameters elsewhere), but if you specify ForkParameters and leave it empty, then you won’t work anything.</p>
<p>Therefore, it is safest to specify all parameters in your config.yaml files; that way you’ll guarantee the behavior you want. See /Tensile/Common.py for the current list of parameters.</p>
</div>
</div>
<div class="section" id="id72">
<h3>Benchmark Protocol<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<div class="section" id="old-benchmark-architecture-was-intractable">
<h4>Old Benchmark Architecture was Intractable<a class="headerlink" href="#old-benchmark-architecture-was-intractable" title="Permalink to this headline">¶</a></h4>
<p>The benchmarking strategy from version 1 was vanilla flavored brute force: (8 WorkGroups)* (12 ThreadTiles)* (4 NumLoadsCoalescedAs)* (4 NumLoadsCoalescedBs)* (3 LoopUnrolls)* (5 BranchTypes)* …*(1024 ProblemSizes)=23,592,960 is a multiplicative series which grows very quickly. Adding one more boolean parameter doubles the number of kernel enqueues of the benchmark.</p>
</div>
<div class="section" id="incremental-benchmark-is-faster">
<h4>Incremental Benchmark is Faster<a class="headerlink" href="#incremental-benchmark-is-faster" title="Permalink to this headline">¶</a></h4>
<p>Tensile version 2 allows the user to manually interrupt the multiplicative series with “additions” instead of “multiplies”, i.e., (8 WorkGroups)* (12 ThreadTiles)+ (4 NumLoadsCoalescedAs)* (4 NumLoadsCoalescedBs)* (3 LoopUnrolls)+ (5 BranchTypes)* …+(1024 ProblemSizes)=1,151 is a dramatically smaller number of enqueues. Now, adding one more boolean parameter may only add on 2 more enqueues.</p>
</div>
<div class="section" id="phases-of-benchmark">
<h4>Phases of Benchmark<a class="headerlink" href="#phases-of-benchmark" title="Permalink to this headline">¶</a></h4>
<p>To make the Tensile’s programability more manageable for the user and developer, the benchmarking protocol has been split up into several steps encoded in a config.yaml file. The below sections reference the following config.yaml. Note that this config.yaml has been created to be a simple illustration and doesn’t not represent an actual good benchmark protocol. See the configs included in the repository (/Tensile/Configs) for examples of good benchmarking configs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BenchmarkProblems</span><span class="p">:</span>
 <span class="o">-</span> <span class="c1"># sgemm</span>
   <span class="o">-</span> <span class="c1"># Problem Type</span>
     <span class="n">OperationType</span><span class="p">:</span> <span class="n">GEMM</span>
     <span class="n">Batched</span><span class="p">:</span> <span class="kc">True</span>
   <span class="o">-</span> <span class="c1"># Benchmark Size-Group</span>
    <span class="n">InitialSolutionParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">WorkGroup</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">]</span>
      <span class="o">-</span> <span class="n">NumLoadsCoalescedA</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span>
      <span class="o">-</span> <span class="n">NumLoadsCoalescedB</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span>
      <span class="o">-</span> <span class="n">ThreadTile</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]</span> <span class="p">]</span>

    <span class="n">BenchmarkCommonParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">ProblemSizes</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">512</span><span class="p">],</span> <span class="p">[</span><span class="mi">512</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">512</span><span class="p">]</span> <span class="p">]</span>
      <span class="o">-</span> <span class="n">EdgeType</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Branch&quot;</span><span class="p">,</span> <span class="s2">&quot;ShiftPtr&quot;</span><span class="p">]</span>
        <span class="n">PrefetchGlobalRead</span><span class="p">:</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>

    <span class="n">ForkParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">WorkGroup</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="p">]</span>
        <span class="n">ThreadTile</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="p">]</span>

    <span class="n">BenchmarkForkParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">ProblemSizes</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">Exact</span><span class="p">:</span> <span class="p">[</span> <span class="mi">2880</span><span class="p">,</span> <span class="mi">2880</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2880</span> <span class="p">]</span>
      <span class="o">-</span> <span class="n">NumLoadsCoalescedA</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span> <span class="p">]</span>
      <span class="o">-</span> <span class="n">NumLoadsCoalescedB</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span> <span class="p">]</span>

    <span class="n">JoinParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">MacroTile</span>

    <span class="n">BenchmarkJoinParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">LoopUnroll</span><span class="p">:</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>

    <span class="n">BenchmarkFinalParameters</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">ProblemSizes</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">128</span><span class="p">],</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">128</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">256</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="initial-solution-parameters">
<h4>Initial Solution Parameters<a class="headerlink" href="#initial-solution-parameters" title="Permalink to this headline">¶</a></h4>
<p>A Solution is comprised of ~20 parameters, and all are needed to create a kernel. Therefore, during the first benchmark which determines which WorkGroupShape is fastest, what are the other 19 solution parameters which are used to describe the kernels that we benchmark? That’s what InitialSolutionParameters are for. The solution used for benchmarking WorkGroupShape will use the parameters from InitialSolutionParameters. The user must choose good default solution parameters in order to correctly identify subsequent optimal parameters.</p>
</div>
<div class="section" id="problem-sizes">
<h4>Problem Sizes<a class="headerlink" href="#problem-sizes" title="Permalink to this headline">¶</a></h4>
<p>Each step of the benchmark can override what problem sizes will be benchmarked. A ProblemSizes entry of type Range is a list whose length is the number of indices in the ProblemType. A GEMM ProblemSizes must have 3 elements while a batched-GEMM ProblemSizes must have 4 elements. So, for a ProblemType of C[ij] = Sum[k] A[ik]*B[jk], the ProblemSizes elements represent [SizeI, SizeJ, SizeK]. For each index, there are 5 ways of specifying the sizes of that index:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>[1968]</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Benchmark only size 1968; n = 1.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>[16, 1920]</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Benchmark sizes 16 to 1968 using the default step size (=16); n = 123.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>[16, 32, 1968]</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Benchmark sizes 16 to 1968 using a step size of 32; n = 61.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>[64, 32, 16, 1968]</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Benchmark sizes from 64 to 1968 with a step size of 32. Also, increase the step size by 16 each iteration.</p></li>
<li><p>This causes fewer sizes to be benchmarked when the sizes are large, and more benchmarks where the sizes are small; this is          typically desired behavior.</p></li>
<li><p>n = 16 (64, 96, 144, 208, 288, 384, 496, 624, 768, 928, 1104, 1296, 1504, 1728, 1968). The stride at the beginning is 32, but the stride at the end is 256.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>0</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>The size of this index is just whatever size index 0 is. For a 3-dimensional ProblemType, this allows benchmarking only a 2-                dimensional or 1-dimensional slice of problem sizes.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Here are a few examples of valid ProblemSizes for 3D GEMMs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">128</span><span class="p">],</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">128</span><span class="p">],</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">128</span><span class="p">]</span> <span class="p">]</span> <span class="c1"># n = 512</span>
<span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">128</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># n = 8</span>
<span class="n">Range</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">5760</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="mi">4096</span><span class="p">]</span> <span class="p">]</span> <span class="c1"># n = 108</span>
</pre></div>
</div>
</div>
<div class="section" id="benchmark-common-parameters">
<h4>Benchmark Common Parameters<a class="headerlink" href="#benchmark-common-parameters" title="Permalink to this headline">¶</a></h4>
<p>During this first phase of benchmarking, we examine parameters which will be the same for all solutions for this ProblemType. During each step of benchmarking, there is only 1 winner. In the above example we are benchmarking the dictionary {EdgeType: [ Branch, ShiftPtr], PrefetchGlobalRead: [False, True]}.; therefore, this benchmark step generates 4 solution candidates, and the winner will be the fastest EdgeType/PrefetchGlobalRead combination. Assuming the winner is ET=SP and PGR=T, then all solutions for this ProblemType will have ET=SP and PGR=T. Also, once a parameter has been determined, all subsequent benchmarking steps will use this determined parameter rather than pulling values from InitialSolutionParameters. Because the common parameters will apply to all kernels, they are typically the parameters which are compiler-dependent or hardware-dependent rather than being tile-dependent.</p>
</div>
<div class="section" id="fork-parameters">
<h4>Fork Parameters<a class="headerlink" href="#fork-parameters" title="Permalink to this headline">¶</a></h4>
<p>If we continued to determine every parameter in the above manner, we’d end up with a single fastest solution for the specified ProblemSizes; we usually desire multiple different solutions with varying parameters which may be fastest for different groups of ProblemSizes. One simple example of this is small tiles sizes are fastest for small problem sizes, and large tiles are fastest for large tile sizes.</p>
<p>Therefore, we allow “forking” parameters; this means keeping multiple winners after each benchmark steps. In the above example we fork {WorkGroup: […], ThreadTile: […]}. This means that in subsequent benchmarking steps, rather than having one winning parameter, we’ll have one winning parameter per fork permutation; we’ll have 9 winners.</p>
</div>
<div class="section" id="benchmark-fork-parameters">
<h4>Benchmark Fork Parameters<a class="headerlink" href="#benchmark-fork-parameters" title="Permalink to this headline">¶</a></h4>
<p>When we benchmark the fork parameters, we retain one winner per permutation. Therefore, we first determine the fastest NumLoadsCoalescedA for each of the WG,TT permutations, then we determine the fastest NumLoadsCoalescedB for each permutation.</p>
</div>
<div class="section" id="join-parameters">
<h4>Join Parameters<a class="headerlink" href="#join-parameters" title="Permalink to this headline">¶</a></h4>
<p>After determining fastest parameters for all the forked solution permutations, we have the option of reducing the number of winning solutions. When a parameter is listed in the JoinParameters section, that means that of the kept winning solutions, each will have a different value for that parameter. Listing more parameters to join results in more winners being kept, while having a JoinParameters section with no parameters listed results on only 1 fastest solution.</p>
<p>In our example we join over the MacroTile (work-group x thread-tile). After forking tiles, there were 9 solutions that we kept. After joining MacroTile, we’ll only keep six: 16x256, 32x128, 64x64, 128x32 and 256x16. The solutions that are kept are based on their performance during the last BenchmarkForkParameters benchmark, or, if there weren’t any, JoinParameters will conduct a benchmark of all solution candidates then choose the fastest.</p>
</div>
<div class="section" id="benchmark-join-parameters">
<h4>Benchmark Join Parameters<a class="headerlink" href="#benchmark-join-parameters" title="Permalink to this headline">¶</a></h4>
<p>After narrowing the list of fastest solutions through joining, you can continue to benchmark parameters, keeping one winning parameter per solution permutation.</p>
</div>
<div class="section" id="benchmark-final-parameters">
<h4>Benchmark Final Parameters<a class="headerlink" href="#benchmark-final-parameters" title="Permalink to this headline">¶</a></h4>
<p>After all the parameter benchmarking has been completed and the final list of fastest solution has been assembled, we can benchmark all the solution over a large set of ProblemSizes. This benchmark represent the final output of benchmarking; it outputs a .csv file where the rows are all the problem sizes and the columns are all the solutions. This is the information which gets analysed to produce the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id46">library logic</a>.</p>
</div>
</div>
<div class="section" id="contributing">
<h3>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h3>
<p>We’d love your help, but…</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Never check in a tab (t); use 4 spaces.</p></li>
<li><p>Follow the coding style of the file you’re editing.</p></li>
<li><p>Make pull requests against develop branch.</p></li>
<li><p>Rebase your develop branch against ROCmSoftwarePlatform::Tensile::develop branch right before pull-requesting.</p></li>
<li><p>In your pull request, state what you tested (which OS, what drivers, what devices, which config.yaml’s) so we can ensure that your changes haven’t broken anything.</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id73">
<h4>CMake<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>CMake 2.9</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="python">
<h4>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h4>
<p>(One time only)</p>
<blockquote>
<div><ul class="simple">
<li><p>Ubuntu: sudo apt install python2.7 python-yaml</p></li>
<li><p>CentOS: sudo yum install python PyYAML</p></li>
<li><p>Fedora: sudo dnf install python PyYAML</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="compilers">
<h4>Compilers<a class="headerlink" href="#compilers" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul>
<li><p>For Tensile_BACKEND = OpenCL1.2 <em>(untested)</em></p>
<blockquote>
<div><ul class="simple">
<li><p>Visual Studio 14 (2015). (VS 2012 may also be supported; c++11 should no longer be required by Tensile. Need to verify.)</p></li>
<li><p>GCC 4.8 and above</p></li>
</ul>
</div></blockquote>
</li>
<li><p>For Tensile_BACKEND = HIP</p>
<blockquote>
<div><ul class="simple">
<li><p>Public ROCm</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Tensile can be installed via:</p>
<ol class="arabic simple">
<li><p>Download repo and don’t install; install PyYAML dependency manually and call python scripts manually:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">Tensile</span><span class="o">.</span><span class="n">git</span>
<span class="n">python</span> <span class="n">Tensile</span><span class="o">/</span><span class="n">Tensile</span><span class="o">/</span><span class="n">Tensile</span><span class="o">.</span><span class="n">py</span> <span class="n">your_custom_config</span><span class="o">.</span><span class="n">yaml</span> <span class="n">your_benchmark_path</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Install develop branch directly from repo using pip:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">Tensile</span><span class="o">.</span><span class="n">git</span><span class="nd">@develop</span>
<span class="n">tensile</span> <span class="n">your_custom_config</span><span class="o">.</span><span class="n">yaml</span> <span class="n">your_benchmark_path</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Download repo and install manually: (deprecated)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">Tensile</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">Tensile</span>
<span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
<span class="n">tensile</span> <span class="n">your_custom_config</span><span class="o">.</span><span class="n">yaml</span> <span class="n">your_benchmark_path</span>
</pre></div>
</div>
</div>
<div class="section" id="id74">
<h3>Kernel Parameters<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id75">
<h4>Solution / Kernel Parameters<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><strong>LoopDoWhile:</strong> True=DoWhile loop, False=While or For loop</p></li>
<li><p><strong>LoopTail:</strong> Additional loop with LoopUnroll=1.</p></li>
<li><p><strong>EdgeType:</strong> Branch, ShiftPtr or None</p></li>
<li><p><strong>WorkGroup:</strong> [dim0, dim1, LocalSplitU]</p></li>
<li><p><strong>ThreadTile:</strong> [dim0, dim1]</p></li>
<li><p><strong>GlobalSplitU:</strong> Split up summation among work-groups to create more concurrency. This option launches a kernel to handle the beta scaling, then a second kernel where the writes to global memory are atomic.</p></li>
<li><p><strong>PrefetchGlobalRead:</strong> True means outer loop should prefetch global data one iteration ahead.</p></li>
<li><p><strong>PrefetchLocalRead:</strong> True means inner loop should prefetch lds data one iteration ahead.</p></li>
<li><p><strong>WorkGroupMapping:</strong> In what order will work-groups compute C; affects cacheing.</p></li>
<li><p><strong>LoopUnroll:</strong> How many iterations to unroll inner loop; helps loading coalesced memory.</p></li>
<li><p><strong>MacroTile:</strong> Derrived from WorkGroup*ThreadTile.</p></li>
<li><p><strong>DepthU:</strong> Derrived from LoopUnroll*SplitU.</p></li>
<li><p><strong>NumLoadsCoalescedA,B:</strong> Number of loads from A in coalesced dimension.</p></li>
<li><p><strong>GlobalReadCoalesceGroupA,B:</strong> True means adjacent threads map to adjacent global read elements (but, if transposing data then write to lds is scattered).</p></li>
<li><p><strong>GlobalReadCoalesceVectorA,B:</strong> True means vector components map to adjacent global read elements (but, if transposing data then write to lds is scattered).</p></li>
<li><p><strong>VectorWidth:</strong> Thread tile elements are contiguous for faster memory accesses. For example VW=4 means a thread will read a float4 from memory rather than 4 non-contiguous floats.</p></li>
<li><p><strong>KernelLanguage:</strong> Whether kernels should be written in source code (HIP, OpenCL) or assembly (gfx803, gfx900, …).</p></li>
</ul>
<p>The exhaustive list of solution parameters and their defaults is stored in Common.py.</p>
</div>
<div class="section" id="kernel-parameters-affect-performance">
<h4>Kernel Parameters Affect Performance<a class="headerlink" href="#kernel-parameters-affect-performance" title="Permalink to this headline">¶</a></h4>
<p>The kernel parameters affect many aspects of performance. Changing a parameter may help address one performance bottleneck but worsen another. That is why searching through the parameter space is vital to discovering the fastest kernel for a given problem.</p>
<blockquote>
<div><img alt="../_images/img1.png" class="align-center" src="../_images/img1.png" />
</div></blockquote>
</div>
<div class="section" id="how-n-dimensional-tensor-contractions-are-mapped-to-finite-dimensional-gpu-kernels">
<h4>How N-Dimensional Tensor Contractions Are Mapped to Finite-Dimensional GPU Kernels<a class="headerlink" href="#how-n-dimensional-tensor-contractions-are-mapped-to-finite-dimensional-gpu-kernels" title="Permalink to this headline">¶</a></h4>
<p>For a traditional GEMM, the 2-dimensional output, C[i,j], is mapped to launching a 2-dimensional grid of work groups, each of which has a 2-dimensional grid of work items; one dimension belongs to i and one dimension belongs to j. The 1-dimensional summation is represented by a single loop within the kernel body.</p>
</div>
<div class="section" id="special-dimensions-d0-d1-and-du">
<h4>Special Dimensions: D0, D1 and DU<a class="headerlink" href="#special-dimensions-d0-d1-and-du" title="Permalink to this headline">¶</a></h4>
<p>To handle arbitrary dimensionality, Tensile begins by determining 3 special dimensions: D0, D1 and DU.</p>
<p>D0 and D1 are the free indices of A and B (one belongs to A and one to B) which have the shortest strides. This allows the inner-most loops to read from A and B the fastest via coalescing. In a traditional GEMM, every matrix has a dimension with a shortest stride of 1, but Tensile doesn’t make that assumption. Of these two dimensions, D0 is the dimension which has the shortest tensor C stride which allows for fast writing.</p>
<p>DU represents the summation index with the shortest combined stride (stride in A + stride in B); it becomes the inner most loop which gets “U”nrolled. This assignment is also mean’t to assure fast reading in the inner-most summation loop. There can be multiple summation indices (i.e. embedded loops) and DU will be iterated over in the inner most loop.</p>
</div>
<div class="section" id="gpu-kernel-dimension">
<h4>GPU Kernel Dimension<a class="headerlink" href="#gpu-kernel-dimension" title="Permalink to this headline">¶</a></h4>
<p>OpenCL allows for 3-dimensional grid of work-groups, and each work-group can be a 3-dimensional grid of work-items. Tensile assigns D0 to be dimension-0 of the work-group and work-item grid; it assigns D1 to be dimension-1 of the work-group and work-item grids. All other free or batch dimensions are flattened down into the final dimension-2 of the work-group and work-item grids. Withing the GPU kernel, dimensions-2 is reconstituted back into whatever dimensions it represents.</p>
</div>
</div>
<div class="section" id="languages">
<h3>Languages<a class="headerlink" href="#languages" title="Permalink to this headline">¶</a></h3>
<div class="section" id="tensile-benchmarking-is-python3">
<h4>Tensile Benchmarking is Python3<a class="headerlink" href="#tensile-benchmarking-is-python3" title="Permalink to this headline">¶</a></h4>
<p>The benchmarking module, Tensile.py, is written in python3. The python scripts write solution, kernels, cmake files and all other C/C++ files used for benchmarking. Please note that Tensile is not compatible with Python2.</p>
</div>
<div class="section" id="id76">
<h4>Tensile Library<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p>The Tensile API, Tensile.h, is confined to C89 so that it will be usable by most software. The code behind the API is allowed to be c++11.</p>
</div>
<div class="section" id="device-languages">
<h4>Device Languages<a class="headerlink" href="#device-languages" title="Permalink to this headline">¶</a></h4>
<p>The device languages Tensile supports for the gpu kernels is</p>
<ul>
<li><p>OpenCL 1.2</p></li>
<li><p>HIP</p></li>
<li><p>Assembly</p>
<blockquote>
<div><ul class="simple">
<li><p>gfx803</p></li>
<li><p>gfx900</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="id77">
<h3>Library Logic<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<p>Running the <code class="docutils literal notranslate"><span class="pre">LibraryLogic</span></code> phase of benchmarking analyses the benchmark data and encodes a mapping for each problem type. For each problem type, it maps problem sizes to best solution (i.e. kernel).</p>
<p>When you build Tensile.lib, you point the <code class="docutils literal notranslate"><span class="pre">TensileCreateLibrary</span></code> function to a directory where your library logic yaml files are.</p>
</div>
<div class="section" id="problem-nomenclature">
<h3>Problem Nomenclature<a class="headerlink" href="#problem-nomenclature" title="Permalink to this headline">¶</a></h3>
<div class="section" id="example-problems">
<h4>Example Problems<a class="headerlink" href="#example-problems" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul>
<li><p>Standard GEMM has 4 variants (2 free indices (i, j) and 1 summation index l)</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>N(N:nontranspose)N: C[i,j] = Sum[l] A[i,l] * B[l,j]</p></li>
<li><p>NT(T:transpose): C[i,j] = Sum[l] A[i,l] * B[j, l]</p></li>
<li><p>TN: C[i,j] = Sum[l] A[l, i] * B[l,j]</p></li>
<li><p>TT: C[i,j] = Sum[l] A[l, i] * B[j, l]</p></li>
</ol>
</div></blockquote>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>C[i,j,k] = Sum[l] A[i,l,k] * B[l,j,k] (batched-GEMM; 2 free indices, 1 batched index k and 1 summation index l)</p></li>
<li><p>C[i,j] = Sum[k,l] A[i,k,l] * B[j,l,k] (2D summation)</p></li>
<li><p>C[i,j,k,l,m] = Sum[n] A[i,k,m,l,n] * B[j,k,l,n,m] (GEMM with 3 batched indices)</p></li>
<li><p>C[i,j,k,l,m] = Sum[n,o] A[i,k,m,o,n] * B[j,m,l,n,o] (4 free indices, 2 summation indices and 1 batched index)</p></li>
<li><p>C[i,j,k,l] = Sum[m,n] A[i,j,m,n,l] * B[m,n,k,j,l] (batched image convolution mapped to 7D tensor contraction)</p></li>
<li><p>and even crazier</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="nomenclature">
<h4>Nomenclature<a class="headerlink" href="#nomenclature" title="Permalink to this headline">¶</a></h4>
<p>The indices describe the dimensionality of the problem being solved. A GEMM operation takes 2 2-dimensional matrices as input (totaling 4 input dimensions) and contracts them along one dimension (which cancels out 2 of the dimensions), resulting in a 2-dimensional result.</p>
<p>Whenever an index shows up in multiple tensors, those tensors must be the same size along that dimension but they may have different strides.</p>
<p>There are 3 categories of indices/dimensions that Tensile deals with: free, batch and bound.</p>
<p><strong>Free Indices</strong></p>
<p>Free indices are the indices of tensor C which come in pairs; one of the pair shows up in tensor A while the other shows up in tensor B. In the really crazy example above, i/j/k/l are the 4 free indices of tensor C. Indices i and k come from tensor A and indices j and l come from tensor B.</p>
<p><strong>Batch Indices</strong></p>
<p>Batch indices are the indices of tensor C which shows up in both tensor A and tensor B. For example, the difference between the GEMM example and the batched-GEMM example above is the additional index. In the batched-GEMM example, the index K is the batch index which is batching together multiple independent GEMMs.</p>
<p><strong>Bound/Summation Indices</strong></p>
<p>The final type of indices are called bound indices or summation indices. These indices do not show up in tensor C; they show up in the summation symbol (Sum[k]) and in tensors A and B. It is along these indices that we perform the inner products (pairwise multiply then sum).</p>
</div>
<div class="section" id="limitations">
<h4>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h4>
<p>Problem supported by Tensile must meet the following conditions:</p>
<p>There must be at least one pair of free indices.</p>
</div>
</div>
<div class="section" id="tensile-lib">
<h3>Tensile.lib<a class="headerlink" href="#tensile-lib" title="Permalink to this headline">¶</a></h3>
<p>After running the <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id39">benchmark</a> and generating <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Libraries/ROCm_Libraries.html#id46">library config files</a>, you’re ready to add Tensile.lib to your project. Tensile provides a <code class="docutils literal notranslate"><span class="pre">TensileCreateLibrary</span></code> function, which can be called:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>set(Tensile_BACKEND &quot;HIP&quot;)
set( Tensile_LOGIC_PATH &quot;~/LibraryLogic&quot; CACHE STRING &quot;Path to Tensile logic.yaml files&quot;)
option( Tensile_MERGE_FILES &quot;Tensile to merge kernels and solutions files?&quot; OFF)
option( Tensile_SHORT_NAMES &quot;Tensile to use short file/function names? Use if compiler complains they&#39;re too long.&quot; OFF)
option( Tensile_PRINT_DEBUG &quot;Tensile to print runtime debug info?&quot; OFF)

find_package(Tensile) # use if Tensile has been installed

TensileCreateLibrary(
  ${Tensile_LOGIC_PATH}
  ${Tensile_BACKEND}
  ${Tensile_MERGE_FILES}
  ${Tensile_SHORT_NAMES}
  ${Tensile_PRINT_DEBUG}
  Tensile_ROOT ${Tensile_ROOT} # optional; use if tensile not installed
  )
target_link_libraries( TARGET Tensile )
</pre></div>
</div>
<p>TODO: Where is the Tensile include directory?</p>
</div>
<div class="section" id="versioning">
<h3>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h3>
<p>Tensile follows semantic versioning practices, i.e. Major.Minor.Patch, in BenchmarkConfig.yaml files, LibraryConfig.yaml files and in cmake find_package. Tensile is compatible with a “MinimumRequiredVersion” if Tensile.Major==MRV.Major and Tensile.Minor.Patch &gt;= MRV.Minor.Patch.</p>
<ul class="simple">
<li><p><strong>Major:</strong> Tensile increments the major version if the public API changes, or if either the benchmark.yaml or library-config.yaml files change format in a non-backwards-compatible manner.</p></li>
<li><p><strong>Minor:</strong> Tensile increments the minor version when new kernel, solution or benchmarking features are introduced in a backwards-compatible manner.</p></li>
<li><p><strong>Patch:</strong> Bug fixes or minor improvements.</p></li>
</ul>
</div>
</div>
<div class="section" id="rocthrust">
<h2>rocThrust<a class="headerlink" href="#rocthrust" title="Permalink to this headline">¶</a></h2>
<p>HIP back-end for Thrust(alpha release)</p>
<div class="section" id="id78">
<h3>Introduction<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<p>Thrust is a parallel algorithm library. This library has been ported to <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a>/<a class="reference external" href="https://rocm.github.io/">ROCm</a> platform, which uses the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocPRIM">rocPRIM library</a>. The HIP ported library works on HIP/ROCm platforms. Currently there is no CUDA backend in place.</p>
</div>
<div class="section" id="id81">
<h3>Requirements<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<p>Software</p>
<ul class="simple">
<li><p>Git</p></li>
<li><p>CMake (3.5.1 or later)</p></li>
<li><dl class="simple">
<dt>AMD <a class="reference external" href="https://rocm.github.io/">ROCm</a> platform (1.8.0 or later)</dt><dd><ul>
<li><p>Including <a class="reference external" href="https://github.com/RadeonOpenCompute/hcc">HCC</a> compiler, which must be set as C++ compiler on ROCm platform.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocPRIM">rocPRIM</a> library</dt><dd><ul>
<li><p>It will be automatically downloaded and built by CMake script.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Optional:</p>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/google/googletest">GTest</a></dt><dd><ul>
<li><p>Required only for tests. Building tests is enabled by default.</p></li>
<li><p>It will be automatically downloaded and built by CMake script.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="hardware">
<h3>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h3>
<p>Visit the following link for <a class="reference external" href="https://github.com/RadeonOpenCompute/ROCm/blob/master/README.md#supported-cpus">ROCm hardware requirements:</a></p>
</div>
<div class="section" id="id86">
<h3>Build And Install<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<p>For build and install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">rocThrust</span>

<span class="c1"># Go to rocThrust directory, create and go to the build directory.</span>
<span class="n">cd</span> <span class="n">rocThrust</span><span class="p">;</span> <span class="n">mkdir</span> <span class="n">build</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>

<span class="c1"># Configure rocThrust, setup options for your system.</span>
<span class="c1"># Build options:</span>
<span class="c1">#   BUILD_TEST - ON by default,</span>
<span class="c1">#</span>
<span class="c1"># ! IMPORTANT !</span>
<span class="c1"># On ROCm platform set C++ compiler to HCC. You can do it by adding &#39;CXX=&lt;path-to-hcc&gt;&#39;</span>
<span class="c1"># before &#39;cmake&#39; or setting cmake option &#39;CMAKE_CXX_COMPILER&#39; with the path to the HCC compiler.</span>
<span class="c1">#</span>
<span class="p">[</span><span class="n">CXX</span><span class="o">=</span><span class="n">hcc</span><span class="p">]</span> <span class="n">cmake</span> <span class="o">../.</span> <span class="c1"># or cmake-gui ../.</span>

<span class="c1"># Build</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j4</span>
<span class="c1"># Optionally, run tests if they&#39;re enabled.</span>
<span class="n">ctest</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">failure</span>

<span class="c1"># Package</span>
<span class="n">make</span> <span class="n">package</span>

<span class="c1"># Install</span>
<span class="p">[</span><span class="n">sudo</span><span class="p">]</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="using-rocthrust-in-a-project">
<h3>Using rocThrust In A Project<a class="headerlink" href="#using-rocthrust-in-a-project" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recommended</span> <span class="n">way</span> <span class="n">of</span> <span class="n">including</span> <span class="n">rocThrust</span> <span class="n">into</span> <span class="n">a</span> <span class="n">CMake</span> <span class="n">project</span> <span class="ow">is</span> <span class="n">by</span> <span class="n">using</span> <span class="n">its</span> <span class="n">package</span> <span class="n">configuration</span> <span class="n">files</span><span class="o">.</span>

<span class="c1"># On ROCm rocThrust requires rocPRIM</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">rocprim</span> <span class="n">REQUIRED</span> <span class="n">CONFIG</span> <span class="n">PATHS</span> <span class="s2">&quot;/opt/rocm/rocprim&quot;</span><span class="p">)</span>

<span class="c1"># &quot;/opt/rocm&quot; - default install prefix</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">rocthrust</span> <span class="n">REQUIRED</span> <span class="n">CONFIG</span> <span class="n">PATHS</span> <span class="s2">&quot;/opt/rocm/rocthrust&quot;</span><span class="p">)</span>

<span class="o">...</span>
<span class="n">includes</span> <span class="n">rocThrust</span> <span class="n">headers</span> <span class="ow">and</span> <span class="n">roc</span><span class="p">::</span><span class="n">rocprim_hip</span> <span class="n">target</span>
<span class="n">target_link_libraries</span><span class="p">(</span><span class="o">&lt;</span><span class="n">your_target</span><span class="o">&gt;</span> <span class="n">rocthrust</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id87">
<h3>Running Unit Tests<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to rocThrust build directory</span>
<span class="n">cd</span> <span class="n">rocThrust</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>

<span class="c1"># To run all tests</span>
<span class="n">ctest</span>

<span class="c1"># To run unit tests for rocThrust</span>
<span class="o">./</span><span class="n">test</span><span class="o">/&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id88">
<h3>Documentation<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<p>Documentation is available <a class="reference external" href="https://rocthrust.readthedocs.io/en/latest/">here</a>.</p>
</div>
<div class="section" id="support">
<h3>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h3>
<p>Bugs and feature requests can be reported through the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocThrust/issues">issue tracker</a>.</p>
</div>
</div>
<div class="section" id="rccl">
<h2>RCCL<a class="headerlink" href="#rccl" title="Permalink to this headline">¶</a></h2>
<p>ROCm Communication Collectives Library</p>
<div class="section" id="id91">
<h3>Introduction<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<p>RCCL (pronounced “Rickle”) is a stand-alone library of standard collective communication routines for GPUs, implementing all-reduce, all-gather, reduce, broadcast, and reduce-scatter. It has been optimized to achieve high bandwidth on platforms using PCIe, xGMI as well as networking using InfiniBand Verbs or TCP/IP sockets. RCCL supports an arbitrary number of GPUs installed in a single node, and can be used in either single- or multi-process (e.g., MPI) applications. Multi node support is planned for a future release.</p>
<p>The collective operations are implemented using ring algorithms and have been optimized for throughput and latency. For best performance, small operations can be either batched into larger operations or aggregated through the API.</p>
</div>
<div class="section" id="id92">
<h3>Requirements<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>ROCm supported GPUs</p></li>
<li><p>ROCm stack installed on the system (HIP runtime &amp; HCC)</p></li>
<li><p>For building and running the unit tests, chrpath will need to be installed on your machine first. (sudo apt-get install chrpath)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="quickstart-rccl-build">
<h3>Quickstart RCCL Build<a class="headerlink" href="#quickstart-rccl-build" title="Permalink to this headline">¶</a></h3>
<p>RCCL directly depends on HIP runtime &amp; HCC C++ compiler which are part of the ROCm software stack. In addition, HC Direct Function call support needs to be present on your machine. There are binaries for hcc and HIP that need to be installed to get HC Direct Function call support. These binaries are currently packaged with roc-master, and will be included in ROCm 2.4.</p>
<p>The root of this repository has a helper script ‘install.sh’ to build and install RCCL on Ubuntu with a single command. It does not take a lot of options and hard-codes configuration that can be specified through invoking cmake directly, but it’s a great way to get started quickly and can serve as an example of how to build/install.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>./install.sh</strong> – builds library including unit tests</p></li>
<li><p><strong>./install.sh -i</strong> – builds and installs the library to /opt/rocm/rccl; installation path can be changed with –prefix argument (see below.)</p></li>
<li><p><strong>./install.sh -h</strong> – shows help</p></li>
<li><p><strong>./install.sh -t</strong> – builds library including unit tests</p></li>
<li><p><strong>./install.sh -r</strong> – runs unit tests (must be already built)</p></li>
<li><p><strong>./install.sh -p</strong> – builds RCCL package</p></li>
<li><p><strong>./install.sh –prefix</strong> – specify custom path to install RCCL to (default:/opt/rocm)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="manual-build">
<h3>Manual build<a class="headerlink" href="#manual-build" title="Permalink to this headline">¶</a></h3>
<div class="section" id="to-build-the-library">
<h4>To build the library :<a class="headerlink" href="#to-build-the-library" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/ROCmSoftwarePlatform/rccl.git
$ cd rccl
$ mkdir build
$ cd build
$ CXX=/opt/rocm/bin/hcc cmake
$ make -j 8
</pre></div>
</div>
<p>You may substitute a path of your own choosing for CMAKE_INSTALL_PREFIX. Note: ensure rocm-cmake is installed,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="n">rocm</span><span class="o">-</span><span class="n">cmake</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="to-build-the-rccl-package-and-install-package">
<h3>To build the RCCL package and install package :<a class="headerlink" href="#to-build-the-rccl-package-and-install-package" title="Permalink to this headline">¶</a></h3>
<p>Assuming you have already cloned this repository and built the library as shown in the previous section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd rccl/build
$ make package
$ sudo dpkg -i *.deb
</pre></div>
</div>
<p>RCCL package install requires sudo/root access because it creates a directory called “rccl” under /opt/rocm/. This is an optional step and RCCL can be used directly by including the path containing librccl.so.</p>
</div>
<div class="section" id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h3>
<p>There are unit tests implemented with the Googletest framework in RCCL, which are currently a work-in-progress. To invoke the unit tests, go to the rccl-install folder, then the test/ subfolder, and execute the appropriate unit test executable(s). Several notes for running the unit tests:</p>
<blockquote>
<div><ul class="simple">
<li><p>The LD_LIBRARY_PATH environment variable will need to be set to include /path/to/rccl-install/lib/ in order to run the unit tests.</p></li>
<li><p>The HSA_FORCE_FINE_GRAIN_PCIE environment variable will need to be set to 1 in order to run the unit tests.</p></li>
</ul>
</div></blockquote>
<p>An example call to the unit tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ LD_LIBRARY_PATH=rccl-install/lib/ HSA_FORCE_FINE_GRAIN_PCIE=1 rccl-install/test/UnitTests
</pre></div>
</div>
<p>There are also other performance and error-checking tests for RCCL. These are maintained separately <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rccl-tests">here</a>. See the rccl-tests README for more information on how to build and run those tests.</p>
</div>
<div class="section" id="library-and-api-documentation">
<h3>Library and API Documentation<a class="headerlink" href="#library-and-api-documentation" title="Permalink to this headline">¶</a></h3>
<p>Please refer to the <a class="reference external" href="http://rccl.readthedocs.io/">Library documentation</a> for current documentation.</p>
</div>
<div class="section" id="copyright">
<h3>Copyright<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h3>
<p>All source code and accompanying documentation is copyright (c) 2015-2018, NVIDIA CORPORATION. All rights reserved.</p>
<p>All modifications are copyright (c) 2019 Advanced Micro Devices, Inc. All rights reserved.</p>
</div>
</div>
<div class="section" id="hipcub">
<h2>hipCUB<a class="headerlink" href="#hipcub" title="Permalink to this headline">¶</a></h2>
<p>hipCUB is a thin wrapper library on top of <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocPRIM">rocPRIM</a> or <a class="reference external" href="https://github.com/NVlabs/cub">CUB</a>. It enables developers to port project using CUB library to the <a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a> layer and to run them on AMD hardware. In <a class="reference external" href="https://rocm.github.io/">ROCm</a> environment hipCUB uses rocPRIM library as the backend, however, on CUDA platforms it uses CUB instead.</p>
<div class="section" id="id98">
<h3>Requirements<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Git</p></li>
<li><p>CMake (3.5.1 or later)</p></li>
<li><dl class="simple">
<dt>For AMD GPUs:</dt><dd><ul>
<li><dl class="simple">
<dt>AMD <a class="reference external" href="https://rocm.github.io/install.html">ROCm</a> platform (1.8.0 or later)</dt><dd><ul>
<li><p>Including <a class="reference external" href="https://github.com/RadeonOpenCompute/hcc">HCC</a> compiler, which must be set as C++ compiler on ROCm platform.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocPRIM">rocPRIM</a> library</dt><dd><ul>
<li><p>It will be automatically downloaded and built by CMake script.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>For NVIDIA GPUs:</dt><dd><ul>
<li><p>CUDA Toolkit</p></li>
<li><p>CUB library (automatically downloaded and by CMake script)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Optional:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/google/googletest">GTest</a></dt><dd><ul>
<li><p>Required only for tests. Building tests is enabled by default.</p></li>
<li><p>It will be automatically downloaded and built by CMake script.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id103">
<h3>Build And Install<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ROCmSoftwarePlatform</span><span class="o">/</span><span class="n">hipCUB</span><span class="o">.</span><span class="n">git</span>

<span class="c1"># Go to hipCUB directory, create and go to the build directory.</span>
<span class="n">cd</span> <span class="n">hipCUB</span><span class="p">;</span> <span class="n">mkdir</span> <span class="n">build</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>

<span class="c1"># Configure hipCUB, setup options for your system.</span>
<span class="c1"># Build options:</span>
<span class="c1">#   BUILD_TEST - ON by default,</span>
<span class="c1">#</span>
<span class="c1"># ! IMPORTANT !</span>
<span class="c1"># On ROCm platform set C++ compiler to HCC. You can do it by adding &#39;CXX=&lt;path-to-hcc&gt;&#39;</span>
<span class="c1"># before &#39;cmake&#39; or setting cmake option &#39;CMAKE_CXX_COMPILER&#39; to path to the HCC compiler.</span>
<span class="c1">#</span>
<span class="p">[</span><span class="n">CXX</span><span class="o">=</span><span class="n">hcc</span><span class="p">]</span> <span class="n">cmake</span> <span class="o">../.</span> <span class="c1"># or cmake-gui ../.</span>

<span class="c1"># Build</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j4</span>

<span class="c1"># Optionally, run tests if they&#39;re enabled.</span>
<span class="n">ctest</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">failure</span>

<span class="c1"># Package</span>
<span class="n">make</span> <span class="n">package</span>

<span class="c1"># Install</span>
<span class="p">[</span><span class="n">sudo</span><span class="p">]</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="using-hipcub-in-a-project">
<h3>Using hipCUB In A Project<a class="headerlink" href="#using-hipcub-in-a-project" title="Permalink to this headline">¶</a></h3>
<p>Recommended way of including hipCUB into a CMake project is by using its package configuration files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># On ROCm hipCUB requires rocPRIM</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">rocprim</span> <span class="n">REQUIRED</span> <span class="n">CONFIG</span> <span class="n">PATHS</span> <span class="s2">&quot;/opt/rocm/rocprim&quot;</span><span class="p">)</span>

<span class="c1"># &quot;/opt/rocm&quot; - default install prefix</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">hipcub</span> <span class="n">REQUIRED</span> <span class="n">CONFIG</span> <span class="n">PATHS</span> <span class="s2">&quot;/opt/rocm/hipcub&quot;</span><span class="p">)</span>

<span class="o">...</span>
<span class="c1"># On ROCm: includes hipCUB headers and roc::rocprim_hip target</span>
<span class="c1"># On CUDA: includes only hipCUB headers, user has to include CUB directory</span>
<span class="n">target_link_libraries</span><span class="p">(</span><span class="o">&lt;</span><span class="n">your_target</span><span class="o">&gt;</span> <span class="n">hip</span><span class="p">::</span><span class="n">hipcub</span><span class="p">)</span>
</pre></div>
</div>
<p>Include only the main header file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;hipcub/hipcub.hpp&gt;</span>
</pre></div>
</div>
<p>CUB or rocPRIM headers are included by hipCUB depending on the current HIP platform.</p>
</div>
<div class="section" id="id104">
<h3>Running Unit Tests<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to hipCUB build directory</span>
<span class="n">cd</span> <span class="n">hipCUB</span><span class="p">;</span> <span class="n">cd</span> <span class="n">build</span>

<span class="c1"># To run all tests</span>
<span class="n">ctest</span>

<span class="c1"># To run unit tests for hipCUB</span>
<span class="o">./</span><span class="n">test</span><span class="o">/</span><span class="n">hipcub</span><span class="o">/&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id105">
<h3>Documentation<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># go to hipCUB doc directory</span>
<span class="n">cd</span> <span class="n">hipCUB</span><span class="p">;</span> <span class="n">cd</span> <span class="n">doc</span>

<span class="c1"># run doxygen</span>
<span class="n">doxygen</span> <span class="n">Doxyfile</span>

<span class="c1"># open html/index.html</span>
</pre></div>
</div>
</div>
<div class="section" id="id106">
<h3>Support<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<p>Bugs and feature requests can be reported through the <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/hipCUB/issues">issue tracker</a>.</p>
</div>
<div class="section" id="contributions-and-license">
<h3>Contributions and License<a class="headerlink" href="#contributions-and-license" title="Permalink to this headline">¶</a></h3>
<p>Contributions of any kind are most welcome! More details are found at <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/hipCUB/blob/2.7.0/CONTRIBUTING.md">CONTRIBUTING</a> and <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/hipCUB/blob/2.7.0/LICENSE.txt">LICENSE</a>.</p>
</div>
</div>
<div class="section" id="amd-migraphx">
<h2>AMD MIGraphX<a class="headerlink" href="#amd-migraphx" title="Permalink to this headline">¶</a></h2>
<p>AMD’s graph optimization engine.</p>
<div class="section" id="id109">
<h3>Prerequisites<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/RadeonOpenCompute/rocm-cmake">ROCm cmake modules</a> required</p></li>
<li><p><a class="reference external" href="https://github.com/ROCmSoftwarePlatform/MIOpen">MIOpen</a> for running on the GPU</p></li>
<li><p><a class="reference external" href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a> for running on the GPU</p></li>
<li><p><a class="reference external" href="https://github.com/google/protobuf">Protobuf</a> for reading <a class="reference external" href="https://github.com/onnx/onnx">onxx</a> files</p></li>
<li><p><a class="reference external" href="http://half.sourceforge.net/">Half</a> - IEEE 754-based half-precision floating point library</p></li>
<li><p><a class="reference external" href="http://half.sourceforge.net/">pybind11</a> - for python bindings</p></li>
</ul>
</div></blockquote>
<p>Installing the dependencies</p>
<p>Dependencies can be installed using the ROCm build tool <a class="reference external" href="https://github.com/RadeonOpenCompute/rbuild">rbuild</a>.</p>
<p>To install rbuild:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">RadeonOpenCompute</span><span class="o">/</span><span class="n">rbuild</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">master</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>To build dependencies along with MIGraphX</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rbuild</span> <span class="n">build</span> <span class="o">-</span><span class="n">d</span> <span class="n">depend</span> <span class="o">--</span><span class="n">cxx</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">rocm</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">hcc</span>
</pre></div>
</div>
<p>This builds dependencies in the subdirectory named depend and then builds MIGraphX using these dependencies.</p>
</div>
<div class="section" id="building-migraphx-from-source">
<h3>Building MIGraphX from source<a class="headerlink" href="#building-migraphx-from-source" title="Permalink to this headline">¶</a></h3>
<p><strong>Configuring with cmake</strong></p>
<p>First create a build directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span><span class="p">;</span>
<span class="n">cd</span> <span class="n">build</span><span class="p">;</span>
</pre></div>
</div>
<p>Next configure cmake. The hcc compiler is required to build the MIOpen backend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CXX</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">rocm</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">hcc</span> <span class="n">cmake</span> <span class="o">..</span>
</pre></div>
</div>
<p>If the dependencies from install_deps.cmake was installed to another directory, the CMAKE_PREFIX_PATH needs to be set to what –prefix was set to from install_deps.cmake:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CXX</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">rocm</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">hcc</span> <span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_PREFIX_PATH</span><span class="o">=/</span><span class="n">some</span><span class="o">/</span><span class="nb">dir</span> <span class="o">..</span>
</pre></div>
</div>
<p><strong>Changing the cmake configuration</strong></p>
<p>The configuration can be changed after running cmake by using ccmake:</p>
<p>ccmake .. OR cmake-gui: cmake-gui ..</p>
</div>
<div class="section" id="building-the-library">
<h3>Building the library<a class="headerlink" href="#building-the-library" title="Permalink to this headline">¶</a></h3>
<p>The library can be built, from the build directory using the ‘Release’ configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="n">OR</span> <span class="n">make</span>
</pre></div>
</div>
<p>And can be installed by using the ‘install’ target:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="o">--</span><span class="n">target</span> <span class="n">install</span> <span class="n">OR</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>This will install the library to the CMAKE_INSTALL_PREFIX path that was set.</p>
</div>
<div class="section" id="running-the-tests">
<h3>Running the tests<a class="headerlink" href="#running-the-tests" title="Permalink to this headline">¶</a></h3>
<p>The tests can be run by using the ‘check’ target:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="o">--</span><span class="n">target</span> <span class="n">check</span> <span class="n">OR</span> <span class="n">make</span> <span class="n">check</span>
</pre></div>
</div>
</div>
<div class="section" id="building-the-documentation">
<h3>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>HTML and PDF documentation can be built using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="o">--</span><span class="n">target</span> <span class="n">doc</span> <span class="n">OR</span> <span class="n">make</span> <span class="n">doc</span>
</pre></div>
</div>
<p>This will build a local searchable web site inside the doc/html folder.</p>
<p>Documentation is built using <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/download.html">Doxygen</a>, <a class="reference external" href="http://www.sphinx-doc.org/en/stable/index.html">Sphinx</a>, and <a class="reference external" href="https://breathe.readthedocs.io/en/latest/">Breathe</a>.</p>
<p>Requirements for both Sphinx and Breathe can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">doc</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Depending on your setup sudo may be required for the pip install.</p>
</div>
<div class="section" id="formatting-the-code">
<h3>Formatting the code<a class="headerlink" href="#formatting-the-code" title="Permalink to this headline">¶</a></h3>
<p>All the code is formatted using clang-format. To format a file, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clang</span><span class="o">-</span><span class="nb">format</span><span class="o">-</span><span class="mf">5.0</span> <span class="o">-</span><span class="n">style</span><span class="o">=</span><span class="n">file</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">source</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Also, githooks can be installed to format the code per-commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./.</span><span class="n">githooks</span><span class="o">/</span><span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="using-docker">
<h3>Using docker<a class="headerlink" href="#using-docker" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to setup the development environment is to use docker. You can build the top-level docker file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">migraphx</span> <span class="o">.</span>
</pre></div>
</div>
<p>Then to enter the developement environment use docker run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run --device=&#39;/dev/kfd&#39; --device=&#39;/dev/dri&#39; -v=`pwd`:/data -w /data --group-add video -it migraphx
</pre></div>
</div>
</div>
</div>
<div class="section" id="deprecated-libraries">
<h2>Deprecated Libraries<a class="headerlink" href="#deprecated-libraries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="hcrng">
<h3>hCRNG<a class="headerlink" href="#hcrng" title="Permalink to this headline">¶</a></h3>
<p>hCRNG has been <strong>deprecated</strong> and has been replaced by <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocRAND">rocRAND</a></p>
<p>The hcRNG library is an implementation of uniform random number generators targeting the AMD heterogeneous hardware via HCC compiler runtime. The computational resources of underlying AMD heterogenous compute gets exposed and exploited through the HCC C++ frontend. Refer <a class="reference external" href="https://rocm-documentation.readthedocs.io/en/latest/ROCm_Tools/ROCm-Tools.html#hcc">here</a> for more details on HCC compiler.</p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#hcrg"><span class="std std-ref">hcRNG</span></a></p>
</div>
<div class="section" id="hipeigen">
<h3>hipeigen<a class="headerlink" href="#hipeigen" title="Permalink to this headline">¶</a></h3>
<p>Eigen is a C++ template library for linear algebra: matrices, vectors, numerical solvers, and related algorithms.</p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#hipe"><span class="std std-ref">hipeigen</span></a></p>
</div>
<div class="section" id="clfft">
<h3>clFFT<a class="headerlink" href="#clfft" title="Permalink to this headline">¶</a></h3>
<p>clFFT is a software library containing FFT functions written in OpenCL. In addition to GPU devices, the library also supports running on CPU devices to facilitate debugging and heterogeneous programming.</p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#clff"><span class="std std-ref">clFFT</span></a></p>
</div>
<div class="section" id="clblas">
<h3>clBLAS<a class="headerlink" href="#clblas" title="Permalink to this headline">¶</a></h3>
<p>This repository houses the code for the OpenCL™ BLAS portion of clMath. The complete set of BLAS level 1, 2 &amp; 3 routines is implemented. Please see Netlib BLAS for the list of supported routines. In addition to GPU devices, the library also supports running on CPU devices to facilitate debugging and multicore programming. APPML 1.12 is the most current generally available pre-packaged binary version of the library available for download for both Linux and Windows platforms.</p>
<p>The primary goal of clBLAS is to make it easier for developers to utilize the inherent performance and power efficiency benefits of heterogeneous computing. clBLAS interfaces do not hide nor wrap OpenCL interfaces, but rather leaves OpenCL state management to the control of the user to allow for maximum performance and flexibility. The clBLAS library does generate and enqueue optimized OpenCL kernels, relieving the user from the task of writing, optimizing and maintaining kernel code themselves.</p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#clb"><span class="std std-ref">clBLAS</span></a></p>
</div>
<div class="section" id="clsparse">
<h3>clSPARSE<a class="headerlink" href="#clsparse" title="Permalink to this headline">¶</a></h3>
<p>an OpenCL™ library implementing Sparse linear algebra routines. This project is a result of a collaboration between <a class="reference external" href="http://www.amd.com/en">AMD Inc.</a> and <a class="reference external" href="http://www.vratis.com/">Vratis Ltd.</a>.</p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#cls"><span class="std std-ref">clSPARSE</span></a></p>
</div>
<div class="section" id="clrng">
<h3>clRNG<a class="headerlink" href="#clrng" title="Permalink to this headline">¶</a></h3>
<p>A library for uniform random number generation in OpenCL.</p>
<p>Streams of random numbers act as virtual random number generators. They can be created on the host computer in unlimited numbers, and then used either on the host or on computing devices by work items to generate random numbers. Each stream also has equally-spaced substreams, which are occasionally useful. The API is currently implemented for four different RNGs, namely the MRG31k3p, MRG32k3a, LFSR113 and Philox-4×32-10 generators.</p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#clr"><span class="std std-ref">clRNG</span></a></p>
</div>
<div class="section" id="hcfft">
<h3>hcFFT<a class="headerlink" href="#hcfft" title="Permalink to this headline">¶</a></h3>
<p>hcFFT has been <strong>deprecated</strong> and has been replaced by <a class="reference external" href="https://github.com/ROCmSoftwarePlatform/rocFFT">rocFFT</a></p>
<p>For more information, please refer <a class="reference internal" href="dep-lib.html#hcf"><span class="std std-ref">hcFFT</span></a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Open GPU Compute

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>